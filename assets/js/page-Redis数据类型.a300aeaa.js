(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{712:function(t,s,a){"use strict";a.r(s);var e=a(1),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"redis-数据类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis-数据类型"}},[t._v("#")]),t._v(" Redis 数据类型")]),t._v(" "),a("p",[t._v("Redis 支持 5 种数据类型：string（字符串），hash（哈希），list（列表），set（集合）及 zset（sorted set：有序集合）。")]),t._v(" "),a("h2",{attrs:{id:"string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#string"}},[t._v("#")]),t._v(" String")]),t._v(" "),a("p",[t._v("最简单的数据存储类型。一个存储空间只保存一个数据，若字符串是数字按照数字处理。Redis 所有的操作是原子性的，采用单线程处理所有的业务，命令是一个一个执行的，因此无需考虑高并发带来的数据影响。")]),t._v(" "),a("blockquote",[a("p",[t._v("原子性：指一个操作序列就像一个操作一样不可分割，要么完整的被执行，要么完全不执行（银行转账：A 帐户成功扣款必然 B 账户成功入款，否则两个账户都回归原始状态）。")])]),t._v(" "),a("p",[t._v("最大存储量：512MB")]),t._v(" "),a("h3",{attrs:{id:"常用操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用操作"}},[t._v("#")]),t._v(" 常用操作")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" key value        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 赋值")]),t._v("\nget key              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取指定 key 的 value")]),t._v("\ndel key              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除指定 key")]),t._v("\nincr key             "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给指定 key 的值加一")]),t._v("\ndecr key             "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给指定的 key 的值减一")]),t._v("\nincrby key increment "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给指定的 key 的值加 increment")]),t._v("\ndecrby key decrement "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给指定的 key 的值减 decrement")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h3",{attrs:{id:"适用场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#适用场景"}},[t._v("#")]),t._v(" 适用场景")]),t._v(" "),a("h4",{attrs:{id:"_1-投票的有效时长"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-投票的有效时长"}},[t._v("#")]),t._v(" 1）投票的有效时长")]),t._v(" "),a("p",[t._v("可以指定数据的生命周期，来控制数据是什么时候失效，用过数据失效控制对应的业务行为，适用于具有时效性限定控制操作。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("setnx key seconds value  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置 key 对应 value 值的有效时长是 seconds")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-大-v-用户信息的数据存储情况-粉丝数、博文数等"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-大-v-用户信息的数据存储情况-粉丝数、博文数等"}},[t._v("#")]),t._v(" 2）大 V 用户信息的数据存储情况：粉丝数、博文数等")]),t._v(" "),a("p",[t._v("增加一个关注的粉丝，使用 "),a("code",[t._v("incr")]),t._v(" 直接增加：")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" user:id:12:fans "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("34")]),t._v("\nincr user:id:12:fans\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("Redis 用于各种数据结构和非结构高热度数据流访问。")]),t._v(" "),a("p",[t._v("这里说明一下数据库中热点数据 key 命名惯例：使用 "),a("code",[t._v(":")]),t._v(" 分割数据层次：")]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("svg",{attrs:{id:"SvgjsSvg1006",width:"441",height:"91",xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs"}},[a("defs",{attrs:{id:"SvgjsDefs1007"}}),a("g",{attrs:{id:"SvgjsG1008",transform:"translate(25,25)"}},[a("path",{attrs:{id:"SvgjsPath1009",d:"M 0 0L 120 0L 120 40L 0 40Z",stroke:"none",fill:"none"}}),a("g",{attrs:{id:"SvgjsG1010"}},[a("text",{attrs:{id:"SvgjsText1011","font-family":"微软雅黑","text-anchor":"middle","font-size":"16px",width:"120px",fill:"#f44336","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"16px",weight:"400","font-style":"",opacity:"1",y:"-14",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1012",dy:"20",x:"60"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1013"}},[t._v("表名:")])]),a("tspan",{attrs:{id:"SvgjsTspan1014",dy:"20",x:"60"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1015"}})]),a("tspan",{attrs:{id:"SvgjsTspan1016",dy:"20",x:"60"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1017"}},[t._v("news:")])])])])]),a("g",{attrs:{id:"SvgjsG1018",transform:"translate(115,25)"}},[a("path",{attrs:{id:"SvgjsPath1019",d:"M 0 0L 120 0L 120 40L 0 40Z",stroke:"none",fill:"none"}}),a("g",{attrs:{id:"SvgjsG1020"}},[a("text",{attrs:{id:"SvgjsText1021","font-family":"微软雅黑","text-anchor":"middle","font-size":"16px",width:"120px",fill:"#ff9800","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"16px",weight:"400","font-style":"",opacity:"1",y:"-14",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1022",dy:"20",x:"60"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1023"}},[t._v("主键名:")])]),a("tspan",{attrs:{id:"SvgjsTspan1024",dy:"20",x:"60"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1025"}})]),a("tspan",{attrs:{id:"SvgjsTspan1026",dy:"20",x:"60"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1027"}},[t._v("id:")])])])])]),a("g",{attrs:{id:"SvgjsG1028",transform:"translate(205.5,25)"}},[a("path",{attrs:{id:"SvgjsPath1029",d:"M 0 0L 120 0L 120 40L 0 40Z",stroke:"none",fill:"none"}}),a("g",{attrs:{id:"SvgjsG1030"}},[a("text",{attrs:{id:"SvgjsText1031","font-family":"微软雅黑","text-anchor":"middle","font-size":"16px",width:"120px",fill:"#2196f3","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"16px",weight:"400","font-style":"",opacity:"1",y:"-14",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1032",dy:"20",x:"60"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1033"}},[t._v("主键值:")])]),a("tspan",{attrs:{id:"SvgjsTspan1034",dy:"20",x:"60"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1035"}})]),a("tspan",{attrs:{id:"SvgjsTspan1036",dy:"20",x:"60"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1037"}},[t._v("202202:")])])])])]),a("g",{attrs:{id:"SvgjsG1038",transform:"translate(296,25)"}},[a("path",{attrs:{id:"SvgjsPath1039",d:"M 0 0L 120 0L 120 40L 0 40Z",stroke:"none",fill:"none"}}),a("g",{attrs:{id:"SvgjsG1040"}},[a("text",{attrs:{id:"SvgjsText1041","font-family":"微软雅黑","text-anchor":"middle","font-size":"16px",width:"120px",fill:"#4caf50","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"16px",weight:"400","font-style":"",opacity:"1",y:"-14",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1042",dy:"20",x:"60"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1043"}},[t._v("字段名:")])]),a("tspan",{attrs:{id:"SvgjsTspan1044",dy:"20",x:"60"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1045"}})]),a("tspan",{attrs:{id:"SvgjsTspan1046",dy:"20",x:"60"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1047"}},[t._v("title:")])])])])])]),t._v(" "),a("p",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("（热点数据 key 命名惯例）")])]),t._v(" "),a("h4",{attrs:{id:"_3-分布式锁"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-分布式锁"}},[t._v("#")]),t._v(" 3）分布式锁")]),t._v(" "),a("h2",{attrs:{id:"hash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hash"}},[t._v("#")]),t._v(" Hash")]),t._v(" "),a("p",[t._v("对存储的数据进行编组，典型的应用存储对象信息。一个存储空间可以保存多个键值对数据。底层是 hash 表的实现。")]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("svg",{attrs:{id:"SvgjsSvg1006",width:"414",height:"222",xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs"}},[a("defs",{attrs:{id:"SvgjsDefs1007"}},[a("marker",{attrs:{id:"SvgjsMarker1020",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[a("path",{attrs:{id:"SvgjsPath1021",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})])]),a("g",{attrs:{id:"SvgjsG1008",transform:"translate(25,95)"}},[a("path",{attrs:{id:"SvgjsPath1009",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(251,192,45,1)","stroke-width":"2","fill-opacity":"1",fill:"#fff9c4"}}),a("g",{attrs:{id:"SvgjsG1010"}},[a("text",{attrs:{id:"SvgjsText1011","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1012",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1013"}},[t._v("key")])])])])]),a("g",{attrs:{id:"SvgjsG1014",transform:"translate(153,25)"}},[a("path",{attrs:{id:"SvgjsPath1015",d:"M 0 4Q 0 0 4 0L 232 0Q 236 0 236 4L 236 168Q 236 172 232 172L 4 172Q 0 172 0 168Z","stroke-dasharray":"10,6",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),a("g",{attrs:{id:"SvgjsG1016"}},[a("text",{attrs:{id:"SvgjsText1017","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"216px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"75.375",transform:"rotate(0)"}})])]),a("g",{attrs:{id:"SvgjsG1018"}},[a("path",{attrs:{id:"SvgjsPath1019",d:"M107 111L129.5 111L129.5 111L149.39999999999998 111",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1020)"}})]),a("g",{attrs:{id:"SvgjsG1022",transform:"translate(180,44)"}},[a("path",{attrs:{id:"SvgjsPath1023",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(33,150,243,1)","stroke-width":"2","fill-opacity":"1",fill:"#c9e2f7"}}),a("g",{attrs:{id:"SvgjsG1024"}},[a("text",{attrs:{id:"SvgjsText1025","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1026",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1027"}},[t._v("field1")])])])])]),a("g",{attrs:{id:"SvgjsG1028",transform:"translate(284,44)"}},[a("path",{attrs:{id:"SvgjsPath1029",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(33,150,243,1)","stroke-width":"2","fill-opacity":"1",fill:"#c9e2f7"}}),a("g",{attrs:{id:"SvgjsG1030"}},[a("text",{attrs:{id:"SvgjsText1031","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1032",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1033"}},[t._v("value1")])])])])]),a("g",{attrs:{id:"SvgjsG1034",transform:"translate(180,95)"}},[a("path",{attrs:{id:"SvgjsPath1035",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(76,175,80,1)","stroke-width":"2","fill-opacity":"1",fill:"#d8f0d8"}}),a("g",{attrs:{id:"SvgjsG1036"}},[a("text",{attrs:{id:"SvgjsText1037","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1038",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1039"}},[t._v("field2")])])])])]),a("g",{attrs:{id:"SvgjsG1040",transform:"translate(284,95)"}},[a("path",{attrs:{id:"SvgjsPath1041",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(76,175,80,1)","stroke-width":"2","fill-opacity":"1",fill:"#d8f0d8"}}),a("g",{attrs:{id:"SvgjsG1042"}},[a("text",{attrs:{id:"SvgjsText1043","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1044",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1045"}},[t._v("value2")])])])])]),a("g",{attrs:{id:"SvgjsG1046",transform:"translate(180,146)"}},[a("path",{attrs:{id:"SvgjsPath1047",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(156,39,176,1)","stroke-width":"2","fill-opacity":"1",fill:"#f5dafa"}}),a("g",{attrs:{id:"SvgjsG1048"}},[a("text",{attrs:{id:"SvgjsText1049","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1050",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1051"}},[t._v("field3")])])])])]),a("g",{attrs:{id:"SvgjsG1052",transform:"translate(284,146)"}},[a("path",{attrs:{id:"SvgjsPath1053",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(156,39,176,1)","stroke-width":"2","fill-opacity":"1",fill:"#f5dafa"}}),a("g",{attrs:{id:"SvgjsG1054"}},[a("text",{attrs:{id:"SvgjsText1055","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1056",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1057"}},[t._v("value3")])])])])])]),t._v(" "),a("p",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("（Hash 存储结构）")])]),t._v(" "),a("p",[t._v("value 值只存储字符串，每个 hash 可以存储 2"),a("sup",[t._v("32")]),t._v("-1 个键值对。")]),t._v(" "),a("h3",{attrs:{id:"常用操作-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用操作-2"}},[t._v("#")]),t._v(" 常用操作")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("hset key field value   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 为指定的 key 设置一个含有 field、value 的值")]),t._v("\nhmset key field1 value1 field2 value2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给指定的 key 设置多个含有 field、value 的值")]),t._v("\nhget key field         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取指定 key、field 的值")]),t._v("\nhmget key field field2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取多个 key、field 的值")]),t._v("\nhgetall key            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取 key 下所有 field 的值，若内部 field 过多，遍历整体数据效率会很耗时")]),t._v("\nhdel key field1 field2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除指定 key 下指定 field 的值（可以单个或者多个）")]),t._v("\nhdel key               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除指定 key 下所有 field 的值")]),t._v("\nhexists key field      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看指定 key 的 field 是否存在")]),t._v("\nhlen key               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看指定 key 下 field 的个数")]),t._v("\nhkeys key              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取指定 key 下所有的 field")]),t._v("\nhvals key              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取指定 key 下所有的 value")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("h3",{attrs:{id:"适用场景-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#适用场景-2"}},[t._v("#")]),t._v(" 适用场景")]),t._v(" "),a("h4",{attrs:{id:"_1-电商网站购物车"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-电商网站购物车"}},[t._v("#")]),t._v(" 1）电商网站购物车")]),t._v(" "),a("p",[t._v("购物车信息，可以容易增删改查，管理数量等。")]),t._v(" "),a("h4",{attrs:{id:"_2-商家信息管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-商家信息管理"}},[t._v("#")]),t._v(" 2）商家信息管理")]),t._v(" "),a("p",[t._v("应用于抢购，发放消费券（发完为止）等数据存储设计。")]),t._v(" "),a("h2",{attrs:{id:"list"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#list"}},[t._v("#")]),t._v(" List")]),t._v(" "),a("p",[t._v("存储多个数据，对数据进入存储空间的顺序要进行区分。数据主要要体现顺序，底层使用双向链表实现。")]),t._v(" "),a("p",[t._v("list 保存的数据都是 string 类型的，最多有 2"),a("sup",[t._v("32")]),t._v("-1 个数据。list 有索引的概念。")]),t._v(" "),a("h3",{attrs:{id:"常用操作-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用操作-3"}},[t._v("#")]),t._v(" 常用操作")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给指定的 key 从头部开始添加 value，如果 key 不存在则会自动创建")]),t._v("\nlpush key value1 value2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给指定的 key 从尾部开始添加 value，如果 key 不存在同样自动创建")]),t._v("\nrpush key value1 value2\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取指定 key 从开始位置到结束位置的值，从 0 开始 -1 为最后一位")]),t._v("\nlrange key "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" -1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将指定 key 头部的值弹出，如果 key 不存在返回 nil，如果存在返回头部元素")]),t._v("\nlpop key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将指定 key 尾部的值弹出，如果 key 不存在返回 nil，如果存在返回尾部元素")]),t._v("\nrpop key\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取指定 key 链表的长度，如果 key 不存在返回 0")]),t._v("\nllen key\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给指定 key 从头部开始添加 value，只有 key 存在才能添加，不存在返回 0，并且只能添加一个值")]),t._v("\nlpushx key value\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给指定 key 从尾部开始添加 value，同上")]),t._v("\nrpushx key value\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除指定 key 的指定值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果 index 大于 0 则删除 index 位置上与 value 相等的值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 小于 0 则从尾部开始")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 等于 0 则删除链表中所有与 value 相等的值")]),t._v("\nlrem key index value\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给指定位置上的 value 修改为指定值，如果角标不存在则报错（(error) ERR index out of range）")]),t._v("\nlset key index value\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给指定 key 链表中指定 value 前添加一个新 value，从头开始")]),t._v("\nlinsert key before value newValue\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给指定 key 链表中指定 value 前添加一个新 value，从尾开始")]),t._v("\nlinsert key after value newValue\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将指定 key 的尾部元素弹出压入 key2 的头部，如果两个 key 相同，则在同一个链表中执行尾弹头压的操作")]),t._v("\nrpoplpush key key2\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br")])]),a("h3",{attrs:{id:"适用场景-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#适用场景-3"}},[t._v("#")]),t._v(" 适用场景")]),t._v(" "),a("h4",{attrs:{id:"_1-朋友圈点赞-按照点赞顺序显示好友"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-朋友圈点赞-按照点赞顺序显示好友"}},[t._v("#")]),t._v(" 1）朋友圈点赞，按照点赞顺序显示好友")]),t._v(" "),a("p",[t._v("应用于具有操作先后顺序的数据控制。")]),t._v(" "),a("h4",{attrs:{id:"_2-分页操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-分页操作"}},[t._v("#")]),t._v(" 2）分页操作")]),t._v(" "),a("p",[t._v("通常第一页信息来自 list，其他页信息来自数据库进行加载。")]),t._v(" "),a("h2",{attrs:{id:"set"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set"}},[t._v("#")]),t._v(" Set")]),t._v(" "),a("p",[t._v("存储大量数据，在查询方面提供更好的查询效率。与 hash 的存储结构相同，不同的是，只存储 field 值，不存储 value 值。Set 不允许数据重复，也不能启动 value 功能。")]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("svg",{attrs:{id:"SvgjsSvg1058",width:"414",height:"222",xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs"}},[a("defs",{attrs:{id:"SvgjsDefs1059"}},[a("marker",{attrs:{id:"SvgjsMarker1072",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[a("path",{attrs:{id:"SvgjsPath1073",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})])]),a("g",{attrs:{id:"SvgjsG1060",transform:"translate(25.000015258789062,94.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1061",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(251,192,45,1)","stroke-width":"2","fill-opacity":"1",fill:"#fff9c4"}}),a("g",{attrs:{id:"SvgjsG1062"}},[a("text",{attrs:{id:"SvgjsText1063","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1064",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1065"}},[t._v("key")])])])])]),a("g",{attrs:{id:"SvgjsG1066",transform:"translate(153.00001525878906,24.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1067",d:"M 0 4Q 0 0 4 0L 232 0Q 236 0 236 4L 236 168Q 236 172 232 172L 4 172Q 0 172 0 168Z","stroke-dasharray":"10,6",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),a("g",{attrs:{id:"SvgjsG1068"}},[a("text",{attrs:{id:"SvgjsText1069","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"216px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"75.375",transform:"rotate(0)"}})])]),a("g",{attrs:{id:"SvgjsG1070"}},[a("path",{attrs:{id:"SvgjsPath1071",d:"M107.00001525878906 110.99999237060547L129.50001525878906 110.99999237060547L129.50001525878906 110.99999237060547L149.40001525878904 110.99999237060547",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1072)"}})]),a("g",{attrs:{id:"SvgjsG1074",transform:"translate(180.00001525878906,43.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1075",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(33,150,243,1)","stroke-width":"2","fill-opacity":"1",fill:"#c9e2f7"}}),a("g",{attrs:{id:"SvgjsG1076"}},[a("text",{attrs:{id:"SvgjsText1077","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1078",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1079"}},[t._v("field1")])])])])]),a("g",{attrs:{id:"SvgjsG1080",transform:"translate(284.00001525878906,43.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1081",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(33,150,243,1)","stroke-width":"2","fill-opacity":"1",fill:"#c9e2f7"}}),a("g",{attrs:{id:"SvgjsG1082"}},[a("text",{attrs:{id:"SvgjsText1083","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1084",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1085"}},[t._v("nil")])])])])]),a("g",{attrs:{id:"SvgjsG1086",transform:"translate(180.00001525878906,94.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1087",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(76,175,80,1)","stroke-width":"2","fill-opacity":"1",fill:"#d8f0d8"}}),a("g",{attrs:{id:"SvgjsG1088"}},[a("text",{attrs:{id:"SvgjsText1089","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1090",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1091"}},[t._v("field2")])])])])]),a("g",{attrs:{id:"SvgjsG1092",transform:"translate(284.00001525878906,94.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1093",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(76,175,80,1)","stroke-width":"2","fill-opacity":"1",fill:"#d8f0d8"}}),a("g",{attrs:{id:"SvgjsG1094"}},[a("text",{attrs:{id:"SvgjsText1095","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1096",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1097"}},[t._v("nil")])])])])]),a("g",{attrs:{id:"SvgjsG1098",transform:"translate(180.00001525878906,145.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1099",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(156,39,176,1)","stroke-width":"2","fill-opacity":"1",fill:"#f5dafa"}}),a("g",{attrs:{id:"SvgjsG1100"}},[a("text",{attrs:{id:"SvgjsText1101","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1102",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1103"}},[t._v("field3")])])])])]),a("g",{attrs:{id:"SvgjsG1104",transform:"translate(284.00001525878906,145.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1105",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(156,39,176,1)","stroke-width":"2","fill-opacity":"1",fill:"#f5dafa"}}),a("g",{attrs:{id:"SvgjsG1106"}},[a("text",{attrs:{id:"SvgjsText1107","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1108",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1109"}},[t._v("nil")])])])])])]),t._v(" "),a("p",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("（Set 存储结构）")])]),t._v(" "),a("h3",{attrs:{id:"常用操作-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用操作-4"}},[t._v("#")]),t._v(" 常用操作")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给指定 key 中添加数据，元素不重复")]),t._v("\nsadd key value1 value2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取指定 key 中的元素")]),t._v("\nsmembers key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除指定 key 中的指定 value")]),t._v("\nsrem key members value1 value2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取某个 key，将该数据移除")]),t._v("\nspop key\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 判断指定 key 中的指定 value 值是否存在，存在返回 1，不存在返回 0 或者该 key 本身")]),t._v("\nsismember key value\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取 key 自身元素中与 key2 不相同的元素（差集）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sdiff")]),t._v(" key key2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取 key 与 key2 中相同的元素（交集）")]),t._v("\nsinter key key2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将 key 与 key2 元素合并返回，不包括相同元素（并集）")]),t._v("\nsunion key key2\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取指定 key 中元素的个数")]),t._v("\nscard key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 随机获取指定 key 中的一个元素")]),t._v("\nsrandmember key\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将 key1 与 key2 的差集存储到 key 中")]),t._v("\nsdiffstore key key1 key2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将 key1 与 key2 的交集存储到 key 中")]),t._v("\nsinterstore key key1 key2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将 key1 与 key2 的并集存储到 key 中")]),t._v("\nsunionstore key key1 key2\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br")])]),a("h3",{attrs:{id:"适用场景-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#适用场景-4"}},[t._v("#")]),t._v(" 适用场景")]),t._v(" "),a("h4",{attrs:{id:"_1-应用于同类消息的关联搜索"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-应用于同类消息的关联搜索"}},[t._v("#")]),t._v(" 1）应用于同类消息的关联搜索")]),t._v(" "),a("ul",[a("li",[t._v("显示共同好友/关注（一度）")]),t._v(" "),a("li",[t._v("由用户A出发，获取共同好友B的好友列表（一度）")]),t._v(" "),a("li",[t._v("由用户A出发，获取共同好友B的购物清单/游戏充值列表（二度）")])]),t._v(" "),a("h4",{attrs:{id:"_2-随机推荐类信息检索-例如推荐热点音乐、新闻等"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-随机推荐类信息检索-例如推荐热点音乐、新闻等"}},[t._v("#")]),t._v(" 2）随机推荐类信息检索，例如推荐热点音乐、新闻等")]),t._v(" "),a("h4",{attrs:{id:"_3-不同类型不重复数据的合并操作-如权限配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-不同类型不重复数据的合并操作-如权限配置"}},[t._v("#")]),t._v(" 3）不同类型不重复数据的合并操作，如权限配置")]),t._v(" "),a("h4",{attrs:{id:"_4-应用于同类型数据的快速去重-如访问量统计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-应用于同类型数据的快速去重-如访问量统计"}},[t._v("#")]),t._v(" 4）应用于同类型数据的快速去重，如访问量统计")]),t._v(" "),a("h4",{attrs:{id:"_5-基于黑名单与白名单设定服务控制-利用-set-的去重性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-基于黑名单与白名单设定服务控制-利用-set-的去重性"}},[t._v("#")]),t._v(" 5）基于黑名单与白名单设定服务控制（利用 set 的去重性）")]),t._v(" "),a("h2",{attrs:{id:"sorted-set"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sorted-set"}},[t._v("#")]),t._v(" Sorted Set")]),t._v(" "),a("p",[t._v("需求：数据排序有利于数据的展示，需要提供一种根据自身特征进行排序。在 set 的基础上添加 score 排序字段。score 不存储数据，只用于排序。")]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("svg",{attrs:{id:"SvgjsSvg1110",width:"524",height:"243.59999084472656",xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs"}},[a("defs",{attrs:{id:"SvgjsDefs1111"}},[a("marker",{attrs:{id:"SvgjsMarker1166",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[a("path",{attrs:{id:"SvgjsPath1167",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})])]),a("g",{attrs:{id:"SvgjsG1112",transform:"translate(25.000015258789062,109.09999084472656)"}},[a("path",{attrs:{id:"SvgjsPath1113",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(251,192,45,1)","stroke-width":"2","fill-opacity":"1",fill:"#fff9c4"}}),a("g",{attrs:{id:"SvgjsG1114"}},[a("text",{attrs:{id:"SvgjsText1115","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1116",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1117"}},[t._v("key")])])])])]),a("g",{attrs:{id:"SvgjsG1118",transform:"translate(155.00001525878906,31.599990844726562)"}},[a("path",{attrs:{id:"SvgjsPath1119",d:"M 0 4Q 0 0 4 0L 340 0Q 344 0 344 4L 344 183Q 344 187 340 187L 4 187Q 0 187 0 183Z","stroke-dasharray":"10,6",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),a("g",{attrs:{id:"SvgjsG1120"}},[a("text",{attrs:{id:"SvgjsText1121","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"324px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"82.875",transform:"rotate(0)"}})])]),a("g",{attrs:{id:"SvgjsG1122",transform:"translate(182.50001525878906,64.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1123",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(33,150,243,1)","stroke-width":"2","fill-opacity":"1",fill:"#c9e2f7"}}),a("g",{attrs:{id:"SvgjsG1124"}},[a("text",{attrs:{id:"SvgjsText1125","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1126",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1127"}},[t._v("field1")])])])])]),a("g",{attrs:{id:"SvgjsG1128",transform:"translate(286.50001525878906,64.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1129",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(33,150,243,1)","stroke-width":"2","fill-opacity":"1",fill:"#c9e2f7"}}),a("g",{attrs:{id:"SvgjsG1130"}},[a("text",{attrs:{id:"SvgjsText1131","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1132",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1133"}},[t._v("nil")])])])])]),a("g",{attrs:{id:"SvgjsG1134",transform:"translate(182.50001525878906,115.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1135",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(76,175,80,1)","stroke-width":"2","fill-opacity":"1",fill:"#d8f0d8"}}),a("g",{attrs:{id:"SvgjsG1136"}},[a("text",{attrs:{id:"SvgjsText1137","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1138",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1139"}},[t._v("field2")])])])])]),a("g",{attrs:{id:"SvgjsG1140",transform:"translate(286.50001525878906,115.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1141",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(76,175,80,1)","stroke-width":"2","fill-opacity":"1",fill:"#d8f0d8"}}),a("g",{attrs:{id:"SvgjsG1142"}},[a("text",{attrs:{id:"SvgjsText1143","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1144",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1145"}},[t._v("nil")])])])])]),a("g",{attrs:{id:"SvgjsG1146",transform:"translate(182.50001525878906,166.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1147",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(156,39,176,1)","stroke-width":"2","fill-opacity":"1",fill:"#f5dafa"}}),a("g",{attrs:{id:"SvgjsG1148"}},[a("text",{attrs:{id:"SvgjsText1149","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1150",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1151"}},[t._v("field3")])])])])]),a("g",{attrs:{id:"SvgjsG1152",transform:"translate(286.50001525878906,166.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1153",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(156,39,176,1)","stroke-width":"2","fill-opacity":"1",fill:"#f5dafa"}}),a("g",{attrs:{id:"SvgjsG1154"}},[a("text",{attrs:{id:"SvgjsText1155","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1156",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1157"}},[t._v("nil")])])])])]),a("g",{attrs:{id:"SvgjsG1158",transform:"translate(390.50001525878906,64.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1159",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(158,158,158,1)","stroke-width":"2","fill-opacity":"1",fill:"#f5f5f5"}}),a("g",{attrs:{id:"SvgjsG1160"}},[a("text",{attrs:{id:"SvgjsText1161","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1162",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1163"}},[t._v("23")])])])])]),a("g",{attrs:{id:"SvgjsG1164"}},[a("path",{attrs:{id:"SvgjsPath1165",d:"M107.00001525878906 125.09999084472656L130.50001525878906 125.09999084472656L130.50001525878906 125.09999084472656L151.40001525878904 125.09999084472656",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1166)"}})]),a("g",{attrs:{id:"SvgjsG1168",transform:"translate(390.50001525878906,115.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1169",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(158,158,158,1)","stroke-width":"2","fill-opacity":"1",fill:"#f5f5f5"}}),a("g",{attrs:{id:"SvgjsG1170"}},[a("text",{attrs:{id:"SvgjsText1171","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1172",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1173"}},[t._v("4")])])])])]),a("g",{attrs:{id:"SvgjsG1174",transform:"translate(390.50001525878906,166.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1175",d:"M 0 4Q 0 0 4 0L 77 0Q 81 0 81 4L 81 28Q 81 32 77 32L 4 32Q 0 32 0 28Z","stroke-dasharray":"10,6",stroke:"rgba(158,158,158,1)","stroke-width":"2","fill-opacity":"1",fill:"#f5f5f5"}}),a("g",{attrs:{id:"SvgjsG1176"}},[a("text",{attrs:{id:"SvgjsText1177","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"61px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"5.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1178",dy:"16",x:"40.5"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1179"}},[t._v("57")])])])])]),a("g",{attrs:{id:"SvgjsG1180",transform:"translate(371.00001525878906,24.99999237060547)"}},[a("path",{attrs:{id:"SvgjsPath1181",d:"M 0 0L 120 0L 120 40L 0 40Z",stroke:"none",fill:"none"}}),a("g",{attrs:{id:"SvgjsG1182"}},[a("text",{attrs:{id:"SvgjsText1183","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"120px",fill:"#323232","font-weight":"700",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"700","font-style":"",opacity:"1",y:"9.375",transform:"rotate(0)"}},[a("tspan",{attrs:{id:"SvgjsTspan1184",dy:"16",x:"60"}},[a("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1185"}},[t._v("score")])])])])])]),t._v(" "),a("p",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("（Sorted Set 存储结构）")])]),t._v(" "),a("h3",{attrs:{id:"常用操作-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用操作-5"}},[t._v("#")]),t._v(" 常用操作")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将 score name 存储到指定的 key 中")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果有相同的 name 则覆盖之前的，返回值为新加入的元素，之前存在的不算")]),t._v("\nzadd key score name score2 name\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取指定 key 中 name 的 score")]),t._v("\nzscore key name\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取指定 key 中成员数量")]),t._v("\nzcard key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除指定 key 中指定 name、name2 的值，可以指定多个")]),t._v("\nzrem key name name2\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取指定 key 中起始位置到结束位置的元素")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不加 withscores 则只返回 name，加上将 score 一并返回，从小到大")]),t._v("\nzrange key start end withscores\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取指定 key 中起始位置到结束位置元素以从大到小的顺序返回，包含两端")]),t._v("\nzrevrange key start end withscores\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 按照指定的排名范围删除元素，排名为分数从小到大，排名从 0 开始")]),t._v("\nzremrangebyrank key start end\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 按照指定的分数范围删除元素，包含min和max")]),t._v("\nzremrangebyscore key min max\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回指定 key 中指定分数范围的元素从小大")]),t._v("\nzrangebyscore key min max withscores\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回指定 key 中指定分数范围中指定角标范围的元素，start 和 end 是索引")]),t._v("\nzrangebyscore key min max withscores limit start end\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将指定 key中指定 name 的元素的分数在原有基础上加 score，并返回增加后的分数")]),t._v("\nzincrby key score name\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回指定 key 中指定分数范围中元素的个数，包括起始和结束")]),t._v("\nzcount key min max\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回指定 key 中指定 name 元素的排名（从小到大），起始位置从 0 开始")]),t._v("\nzrank key name\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回指定 key 中指定 name 元素的排名（从大到小），起始位置从 0 开始")]),t._v("\nzrevrank key name\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br")])]),a("h3",{attrs:{id:"适用场景-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#适用场景-5"}},[t._v("#")]),t._v(" 适用场景")]),t._v(" "),a("h4",{attrs:{id:"_1-为所有参与排名的资源建立排序依据。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-为所有参与排名的资源建立排序依据。"}},[t._v("#")]),t._v(" 1）为所有参与排名的资源建立排序依据。")]),t._v(" "),a("p",[t._v("TOP10（歌曲，电影）。")]),t._v(" "),a("h4",{attrs:{id:"_2-定时任务执行顺序管理或者过期管理。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-定时任务执行顺序管理或者过期管理。"}},[t._v("#")]),t._v(" 2）定时任务执行顺序管理或者过期管理。")]),t._v(" "),a("p",[t._v("会员制度（月、季度、年），time 获取系统当前时间。")]),t._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("简介")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("特性")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("场景")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("String（字符串）")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("二进制安全")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("可以包含任何数据，比如 jpg 图片或者序"),a("br"),t._v("列化的对象，一个键最大能存储 512M")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("---")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Hash（字典）")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("键值对集合，"),a("br"),t._v("即编程语言中的 Map 类型")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("适合存储对象，并且可以像数据库中 "),a("br"),t._v("update 一个属性一样只修改某一项属性值（Memcached 中需要取出整个字符串"),a("br"),t._v("反序列化成对象修改完再序列化存回去）")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("存储、读取、修改用户属性")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("List（列表）")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("链表（双向链表）")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("增删快，提供了操作某一段元素的 API")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("1. 最新消息排行等功能"),a("br"),t._v("（比如朋友圈的时间线）"),a("br"),t._v("2. 消息队列")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Set（集合）")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("哈希表实现，元素不重复")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("1. 添加、删除、查找的复杂度都是 O(1) "),a("br"),t._v("2. 为集合提供了求交集、并集、差集等操作")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("1. 共同好友"),a("br"),t._v("2. 利用唯一性，统计访问网站"),a("br"),t._v("的所有独立 ip"),a("br"),t._v("3. 好友推荐时，根据 tag 求交集，大于某个阈值就可以推荐")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Sorted Set（有序集合）")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("将 Set 中的元素增加一"),a("br"),t._v("个权重参数 score，元素按 score 有序排列")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("数据插入集合时，已经进行天然排序")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("1. 排行榜"),a("br"),t._v("2. 带权重的消息队列")])])])]),t._v(" "),a("p",[t._v("（完）")])])}),[],!1,null,null,null);s.default=n.exports}}]);