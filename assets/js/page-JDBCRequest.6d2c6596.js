(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{1333:function(t,v,_){"use strict";_.r(v);var e=_(1),a=Object(e.a)({},(function(){var t=this,v=t.$createElement,e=t._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"jdbc-request"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jdbc-request"}},[t._v("#")]),t._v(" JDBC Request")]),t._v(" "),e("h2",{attrs:{id:"前提"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前提"}},[t._v("#")]),t._v(" 前提")]),t._v(" "),e("ul",[e("li",[t._v("需要了解 SQL 语句")]),t._v(" "),e("li",[t._v("JDBC Request 主要是向数据库发送请求，获取返回的数据集")]),t._v(" "),e("li",[t._v("需要和 JDBC  Connection Configuration 一起使用，具体配置可参考 "),e("a",{attrs:{href:"test/tools/Jmeter/JDBC%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AE"}},[t._v("JDBC 连接配置")])]),t._v(" "),e("li",[t._v("位置：取样器中")])]),t._v(" "),e("h2",{attrs:{id:"界面介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#界面介绍"}},[t._v("#")]),t._v(" 界面介绍")]),t._v(" "),e("p",[e("img",{attrs:{src:_(853),alt:"jdbc"}})]),t._v(" "),e("p",[t._v("参数字段：")]),t._v(" "),e("p",[e("strong",[t._v("Variable Name Bound to Pool 部分")]),t._v("：")]),t._v(" "),e("p",[t._v("Variable Name of Pool declared in JDBC Connection Configuration： 数据库连接池配置的名称，与 JDBC Connection Configuration 中一致")]),t._v(" "),e("p",[e("strong",[t._v("SQL Query 部分")]),t._v("：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("参数")]),t._v(" "),e("th",[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("Query Type")]),t._v(" "),e("td",[t._v("SQL 语句的类型")])]),t._v(" "),e("tr",[e("td",[t._v("SQL Query")]),t._v(" "),e("td",[t._v("SQL 语句"),e("br"),t._v("语句结尾不需要添加 "),e("code",[t._v(";")]),e("br"),t._v("变量用 "),e("code",[t._v("?")]),t._v(" 占位")])]),t._v(" "),e("tr",[e("td",[t._v("Parameter values")]),t._v(" "),e("td",[t._v("需要传递的变量值，多个变量用 "),e("code",[t._v(",")]),t._v(" 分隔")])]),t._v(" "),e("tr",[e("td",[t._v("Parameter types")]),t._v(" "),e("td",[t._v("变量类型")])]),t._v(" "),e("tr",[e("td",[t._v("Variable Names")]),t._v(" "),e("td",[t._v("保存 SQL 语句返回的数据和返回数据的总行数"),e("br"),t._v("用 "),e("code",[t._v(",")]),t._v(" 分隔")])]),t._v(" "),e("tr",[e("td",[t._v("Result Variable Name")]),t._v(" "),e("td",[t._v("一个 Object 变量存储所有返回值")])]),t._v(" "),e("tr",[e("td",[t._v("Query timeout(s)")]),t._v(" "),e("td",[t._v("超时时间；默认0，代表无限时间")])]),t._v(" "),e("tr",[e("td",[t._v("Limit ResultSet")]),t._v(" "),e("td",[t._v("和 limit 类似作用，限制 sql 语句返回结果集的行数")])]),t._v(" "),e("tr",[e("td",[t._v("Handle ResultSet")]),t._v(" "),e("td",[t._v("如何定义 callable statements 返回的结果集；默认是存储为字符串")])])])]),t._v(" "),e("h2",{attrs:{id:"实例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[t._v("#")]),t._v(" 实例")]),t._v(" "),e("h3",{attrs:{id:"纯-sql-的例子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#纯-sql-的例子"}},[t._v("#")]),t._v(" 纯 SQL 的例子")]),t._v(" "),e("p",[t._v("JDBC  Request")]),t._v(" "),e("p",[e("img",{attrs:{src:_(854),alt:"jdbc"}})]),t._v(" "),e("p",[t._v("输入的是 SQL 语句，不同类型的语句需要选择不同的 Query Type")]),t._v(" "),e("p",[t._v("运行结果：")]),t._v(" "),e("p",[e("img",{attrs:{src:_(855),alt:"jdbc"}})]),t._v(" "),e("h3",{attrs:{id:"使用参数的例子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用参数的例子"}},[t._v("#")]),t._v(" 使用参数的例子")]),t._v(" "),e("p",[t._v("JDBC Request")]),t._v(" "),e("p",[e("img",{attrs:{src:_(856),alt:"jdbc"}})]),t._v(" "),e("p",[t._v("运行结果：")]),t._v(" "),e("p",[e("img",{attrs:{src:_(305),alt:"jdbc"}})]),t._v(" "),e("p",[e("strong",[t._v("注意")]),t._v(":")]),t._v(" "),e("ul",[e("li",[t._v("Parameter value、Parameter type 填写"),e("strong",[t._v("值的数量要与语句中的参数个数保持一致")]),t._v("，用,分隔")]),t._v(" "),e("li",[t._v("问号是"),e("strong",[t._v("占位符")]),t._v("，可以"),e("strong",[t._v("避免 SQL 注入")]),t._v("的问题")]),t._v(" "),e("li",[t._v("SQL 中"),e("strong",[t._v("使用占位符")]),t._v("时，"),e("strong",[t._v("Query Type")]),t._v(" "),e("strong",[t._v("必须选择")]),t._v(" Prepared Select Statement 或者 Prepared Update Statement")]),t._v(" "),e("li",[t._v("如果在 Parameter values 中使用变量，且是字符串类型，不需要加上引号，只需要在 Parameter types 里写明为 varchar 即可")])]),t._v(" "),e("h3",{attrs:{id:"使用变量的例子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用变量的例子"}},[t._v("#")]),t._v(" 使用变量的例子")]),t._v(" "),e("p",[t._v("JDBC Request")]),t._v(" "),e("p",[t._v("在测试计划中添加一个用户自定义的变量：nick")]),t._v(" "),e("p",[e("img",{attrs:{src:_(857),alt:"jdbc"}})]),t._v(" "),e("p",[t._v("运行结果：")]),t._v(" "),e("p",[e("img",{attrs:{src:_(305),alt:"jdbc"}})]),t._v(" "),e("p",[e("strong",[t._v("重点")]),t._v(":")]),t._v(" "),e("ul",[e("li",[t._v("如果在 SQL 语句中使用变量，且是字符串类型，需要加上引号（前提是变量值没有加引号），如 "),e("code",[t._v("${nick_name}")])])]),t._v(" "),e("h2",{attrs:{id:"使用-variable-names-的例子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-variable-names-的例子"}},[t._v("#")]),t._v(" 使用 Variable Names 的例子")]),t._v(" "),e("p",[t._v("JDBC Request")]),t._v(" "),e("p",[t._v("这里添加了 Debug Sample")]),t._v(" "),e("p",[e("img",{attrs:{src:_(858),alt:"jdbc"}})]),t._v(" "),e("p",[t._v("运行结果：")]),t._v(" "),e("p",[e("img",{attrs:{src:_(306),alt:"jdbc"}})]),t._v(" "),e("p",[t._v("Debug Sample 结果：")]),t._v(" "),e("p",[e("img",{attrs:{src:_(859),alt:"jdbc"}})]),t._v(" "),e("p",[e("strong",[t._v("重点")]),t._v("：")]),t._v(" "),e("ul",[e("li",[t._v("test：数据库连接池对象")]),t._v(" "),e("li",[e("code",[t._v("a_#")]),t._v("、"),e("code",[t._v("b_#")]),t._v("、"),e("code",[t._v("c_#")]),t._v("、"),e("code",[t._v("d_#")]),t._v("：代表第几列，从第一列开始")]),t._v(" "),e("li",[e("code",[t._v("a_#")]),t._v("=3：第一列取 3 行数据，因为 SQL 中限制了 limit = 3")]),t._v(" "),e("li",[t._v("a_1：第 1 列、第 1 行")]),t._v(" "),e("li",[t._v("b_2：第 2 列、第 2 行")]),t._v(" "),e("li",[t._v("以此类推....")]),t._v(" "),e("li",[t._v("一般如果 HTTP 请求需要用到 SQL 查出来的数据的话，就会用到 Variable names 这个字段")])]),t._v(" "),e("h2",{attrs:{id:"使用-result-variable-name-的例子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-result-variable-name-的例子"}},[t._v("#")]),t._v(" 使用 Result variable name 的例子")]),t._v(" "),e("p",[t._v("JDBC Request")]),t._v(" "),e("p",[e("img",{attrs:{src:_(860),alt:"jdbc"}})]),t._v(" "),e("p",[t._v("运行的 Request 结果和 Debug Sample 的结果：")]),t._v(" "),e("p",[e("img",{attrs:{src:_(861),alt:"jdbc"}})]),t._v(" "),e("p",[e("strong",[t._v("注意")]),t._v("：Result variable name 的结果是一个数组，每个元素代表一个记录")]),t._v(" "),e("h2",{attrs:{id:"使用-limit-resultset-的栗子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-limit-resultset-的栗子"}},[t._v("#")]),t._v(" 使用 Limit ResultSet 的栗子")]),t._v(" "),e("p",[t._v("JDBC Request")]),t._v(" "),e("p",[e("img",{attrs:{src:_(862),alt:"jdbc"}})]),t._v(" "),e("p",[t._v("运行结果：")]),t._v(" "),e("p",[e("img",{attrs:{src:_(306),alt:"jdbc"}})]),t._v(" "),e("p",[e("strong",[t._v("重点")]),t._v("：")]),t._v(" "),e("ul",[e("li",[t._v("Limit ResultSet 是对 SQL 语句返回的结果集限制行数")]),t._v(" "),e("li",[e("code",[t._v("imit 10")]),t._v(" 限制只返回了 10 条数据，然后 "),e("code",[t._v("Limit ResultSet = 3")]),t._v(" 限制结果集最终只返回 3 条数据")])]),t._v(" "),e("p",[t._v("（完）")])])}),[],!1,null,null,null);v.default=a.exports},305:function(t,v,_){t.exports=_.p+"assets/img/jdbc11.2a10f8e6.png"},306:function(t,v,_){t.exports=_.p+"assets/img/jdbc13.3eb3cfa2.png"},853:function(t,v,_){t.exports=_.p+"assets/img/jdbc7.650da02f.png"},854:function(t,v,_){t.exports=_.p+"assets/img/jdbc8.1fcaa209.png"},855:function(t,v,_){t.exports=_.p+"assets/img/jdbc9.7ffc1388.png"},856:function(t,v,_){t.exports=_.p+"assets/img/jdbc10.d0e62e2c.png"},857:function(t,v,_){t.exports=_.p+"assets/img/jdbc12.912db890.png"},858:function(t,v,_){t.exports=_.p+"assets/img/jdbc14.11939f41.png"},859:function(t,v,_){t.exports=_.p+"assets/img/jdbc15.29996722.png"},860:function(t,v,_){t.exports=_.p+"assets/img/jdbc16.73998ecd.png"},861:function(t,v,_){t.exports=_.p+"assets/img/jdbc17.b210d6c1.png"},862:function(t,v,_){t.exports=_.p+"assets/img/jdbc18.a367223d.png"}}]);