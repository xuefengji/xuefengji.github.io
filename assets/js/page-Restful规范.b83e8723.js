(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{1303:function(s,a,t){"use strict";t.r(a);var e=t(1),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"restful-规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#restful-规范"}},[s._v("#")]),s._v(" Restful 规范")]),s._v(" "),t("h2",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),t("p",[s._v("Rest：")]),s._v(" "),t("ul",[t("li",[s._v("Representational State Transfer 的简称")]),s._v(" "),t("li",[s._v("代表的是一种软件架构风格，基于 HTTP、URL、XML、JSON 等标准和协议，支持轻量级、跨平台、跨语言的架构设计")])]),s._v(" "),t("p",[s._v("作用：通过一套统一的接口为所有 Web 相关提供服务，实现前后端分离")]),s._v(" "),t("h2",{attrs:{id:"rest-设计原则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rest-设计原则"}},[s._v("#")]),s._v(" Rest 设计原则")]),s._v(" "),t("h3",{attrs:{id:"规范原则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#规范原则"}},[s._v("#")]),s._v(" 规范原则：")]),s._v(" "),t("ul",[t("li",[s._v("每一个 URL 代表一种资源")]),s._v(" "),t("li",[s._v("同一种资源有多种表现形式（XML/JSON）")]),s._v(" "),t("li",[s._v("所以操作都是无状态的")]),s._v(" "),t("li",[s._v("规范统一接口")]),s._v(" "),t("li",[s._v("返回一致的数据格式")]),s._v(" "),t("li",[s._v("可缓存(客户端可以缓存响应的内容)")])]),s._v(" "),t("h4",{attrs:{id:"理解为什么所有的操作需要无状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#理解为什么所有的操作需要无状态"}},[s._v("#")]),s._v(" 理解为什么所有的操作需要无状态：")]),s._v(" "),t("ul",[t("li",[s._v("基于 C/S 架构的 HTTP 请求本身是无状态的，向客户端发的每一次请求都必须带有充分的信息能够让服务器识别")]),s._v(" "),t("li",[s._v("请求信息一般包含在 URL 的查询参数或 Header 中，服务端能够根据请求参数，不需要报错客户端的状态，直接将数据返回")])]),s._v(" "),t("p",[t("strong",[s._v("无状态的优点")]),s._v("：")]),s._v(" "),t("p",[s._v("可以大大提高服务器的健壮性和扩展性")]),s._v(" "),t("h4",{attrs:{id:"理解规范统一的接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#理解规范统一的接口"}},[s._v("#")]),s._v(" 理解规范统一的接口：")]),s._v(" "),t("p",[t("strong",[s._v("Rest 接口约束定义")]),s._v("：")]),s._v(" "),t("ul",[t("li",[s._v("资源识别")])]),s._v(" "),t("p",[s._v("通过 URL 表示要操作的资源")]),s._v(" "),t("ul",[t("li",[s._v("请求动作")])]),s._v(" "),t("p",[s._v("通过请求动作（HTTP Method）标识要执行的操作")]),s._v(" "),t("ul",[t("li",[s._v("响应信息")])]),s._v(" "),t("p",[s._v("通过返回的状态码标识这次请求的执行结果")]),s._v(" "),t("p",[t("strong",[s._v("举个例子")]),s._v("：")]),s._v(" "),t("p",[s._v("对数据进行增删改查，设计接口")]),s._v(" "),t("p",[t("strong",[s._v("未使用 Rest 规范前")]),s._v("：")]),s._v(" "),t("p",[s._v("需要设计 4 个接口，XXX/api/add、XXX/api/delete、XXX/api/query、XXX/api/update，难维护")]),s._v(" "),t("p",[t("strong",[s._v("使用 Rest 规范")]),s._v("：")]),s._v(" "),t("p",[s._v("只需要设计一个接口 XXX/api，使用不同的请求方式 GET、POST 、DELETE、PUT，维护方便")]),s._v(" "),t("h4",{attrs:{id:"理解返回一致的数据格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#理解返回一致的数据格式"}},[s._v("#")]),s._v(" 理解返回一致的数据格式：")]),s._v(" "),t("p",[s._v("服务端返回的数据可以是 XML 或 JSON 或直接返回状态码")]),s._v(" "),t("p",[t("strong",[s._v("返回 JSON 数据")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('返回错误的数据格式：\n{\n    "code": 401,\n    "status": "error",\n    "message": \'用户没有权限\',\n    "data": null\n}\n正确的数据格式可以如下：\n{\n    "code": 200,\n    "status": "success",\n    "data": [{\n        "userName": "tugenhua",\n        "age": 31\n    }]\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h2",{attrs:{id:"url-及参数设计规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#url-及参数设计规范"}},[s._v("#")]),s._v(" URL 及参数设计规范")]),s._v(" "),t("h3",{attrs:{id:"url-设计规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#url-设计规范"}},[s._v("#")]),s._v(" URL 设计规范")]),s._v(" "),t("ul",[t("li",[s._v("URL 末尾不需要出现斜杠/")]),s._v(" "),t("li",[s._v("在 URL 中使用 / 是表达层级关系的")]),s._v(" "),t("li",[s._v("在 URL 中可以使用连接符 - 来提升可读性")]),s._v(" "),t("li",[s._v("在 URL 中不允许出现下划线 _")]),s._v(" "),t("li",[s._v("在 URL 中尽量使用小写字符")]),s._v(" "),t("li",[s._v("在 URL 中不允许出现文件扩展名、")]),s._v(" "),t("li",[s._v("在 URL 中使用复数形式")])]),s._v(" "),t("p",[t("strong",[s._v("接口设计对比")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("未使用规范前，接口形式不固定：\nhttp://xxx.com/api/getallUsers; // GET请求方式，获取所有的用户信息\nhttp://xxx.com/api/getuser/1;   // GET请求方式，获取标识为1的用户信息\nhttp://xxx.com/api/user/delete/1 // GET、POST 删除标识为1的用户信息\nhttp://xxx.com/api/updateUser/1  // POST请求方式 更新标识为1的用户信息\nhttp://xxx.com/api/User/add      // POST请求方式，添加新的用户\n\n使用规范后：\nhttp://xxx.com/api/users;     // GET请求方式 获取所有用户信息\nhttp://xxx.com/api/users/1;   // GET请求方式 获取标识为1的用户信息\nhttp://xxx.com/api/users/1;   // DELETE请求方式 删除标识为1的用户信息\nhttp://xxx.com/api/users/1;   // PATCH请求方式，更新标识为1的用户部分信息\nhttp://xxx.com/api/users;     // POST请求方式 添加新的用户\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"http-请求规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-请求规范"}},[s._v("#")]),s._v(" HTTP 请求规范")]),s._v(" "),t("ul",[t("li",[s._v("GET（SELECT）: 查询；从服务器取出资源")]),s._v(" "),t("li",[s._v("POST（CREATE）: 新增; 在服务器上新建一个资源")]),s._v(" "),t("li",[s._v("PUT（UPDATE）: 更新; 在服务器上更新资源(客户端提供改变后的完整资源)")]),s._v(" "),t("li",[s._v("PATCH（UPDATE）: 更新；在服务器上更新部分资源(客户端提供改变的属性)")]),s._v(" "),t("li",[s._v("DELETE（DELETE）: 删除; 从服务器上删除资源")])]),s._v(" "),t("h3",{attrs:{id:"参数命名规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数命名规范"}},[s._v("#")]),s._v(" 参数命名规范")]),s._v(" "),t("p",[s._v("推荐采用下划线方式：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("http://xxx.com/api/today_login // 获取今天登录的用户。\nhttp://xxx.com/api/today_login&sort=login_desc // 获取今天登录的用户、登录时间降序排序。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"http-状态码相关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-状态码相关"}},[s._v("#")]),s._v(" HTTP 状态码相关")]),s._v(" "),t("h3",{attrs:{id:"状态码范围"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#状态码范围"}},[s._v("#")]),s._v(" 状态码范围")]),s._v(" "),t("ul",[t("li",[s._v("1xx: 信息，请求收到了，继续处理")]),s._v(" "),t("li",[s._v("2xx: 代表成功. 行为被成功地接收、理解及采纳")]),s._v(" "),t("li",[s._v("3xx: 重定向")]),s._v(" "),t("li",[s._v("4xx: 客户端错误，请求包含语法错误或请求无法实现")]),s._v(" "),t("li",[s._v("5xx: 服务器端错误")])]),s._v(" "),t("p",[s._v("具体的状态码及解释可参考 "),t("RouterLink",{attrs:{to:"/basic-skills/network/HTTP协议/"}},[s._v("HTTP 协议中的状态码")])],1),s._v(" "),t("h3",{attrs:{id:"返回统一数据格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#返回统一数据格式"}},[s._v("#")]),s._v(" 返回统一数据格式")]),s._v(" "),t("p",[s._v("包含的字段：")]),s._v(" "),t("ul",[t("li",[s._v("code：HTTP 响应状态码")]),s._v(" "),t("li",[s._v("status：比如  success（code 在 200-299 之间） 、fail（code 在 500-599 之间）、error（code 在400-499 之间）")]),s._v(" "),t("li",[s._v("data：请求成功时返回的数据信息，当 status 为 fail 或 error 时，包含错误原因或异常信息")])]),s._v(" "),t("p",[s._v("（完）")])])}),[],!1,null,null,null);a.default=r.exports}}]);