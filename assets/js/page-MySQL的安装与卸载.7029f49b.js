(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{672:function(s,a,n){"use strict";n.r(a);var t=n(1),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"mysql-的安装与卸载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql-的安装与卸载"}},[s._v("#")]),s._v(" MySQL 的安装与卸载")]),s._v(" "),n("h2",{attrs:{id:"windows-下安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#windows-下安装"}},[s._v("#")]),s._v(" Windows 下安装")]),s._v(" "),n("blockquote",[n("p",[s._v("Windows 下的 MySQL 不能用于生产，一般用于开发目的或者尝鲜体验。")])]),s._v(" "),n("h3",{attrs:{id:"安装-mysql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-mysql"}},[s._v("#")]),s._v(" 安装 MySQL")]),s._v(" "),n("p",[s._v("我比较喜欢免安装版本的，轻便干净，删起来方便。")]),s._v(" "),n("p",[s._v("到官网的开发者专区下载 MySQL（Community版）免安装软件包：")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://dev.mysql.com/downloads/mysql/",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载地址"),n("OutboundLink")],1),s._v("。")]),s._v(" "),n("li",[s._v("安装包名字：mysql-8.0.28-winx64.zip")])]),s._v(" "),n("blockquote",[n("p",[s._v("当前最新版本是 8.0，如果需要下载其它版本，可以点击页面中的 "),n("strong",[s._v("Looking for previous GA versions?")]),s._v("（网站可能会更新，未来入口也许会变化）")])]),s._v(" "),n("h3",{attrs:{id:"解压压缩包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解压压缩包"}},[s._v("#")]),s._v(" 解压压缩包")]),s._v(" "),n("p",[s._v("将下载的软件包解压并重命名到 "),n("code",[s._v("D:\\mysql-8.0")]),s._v(" 目录下。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("├── mysql-8.0\n    │── bin\n    │── docs\n    │── include\n    │── lib\n    │── share\n    │── LICENSE\n    └── README\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h3",{attrs:{id:"进入命令行终端"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#进入命令行终端"}},[s._v("#")]),s._v(" 进入命令行终端")]),s._v(" "),n("p",[s._v("以 Window10 为例，有两种方法能以管理员身份运行 CMD 命令提示符：")]),s._v(" "),n("ul",[n("li",[s._v("在"),n("strong",[s._v("开始菜单")]),s._v("上，单击"),n("strong",[s._v("鼠标右键")]),s._v("，在出现的菜单中，选择**命令提示符（管理员）**点击打开这样即可。")]),s._v(" "),n("li",[s._v("点击开始菜单，在 "),n("strong",[s._v("Windows 系统")]),s._v("中找到"),n("strong",[s._v("命令提示符")]),s._v("，然后这时候在命令提示符上单击鼠标右键，选择"),n("strong",[s._v("以管理员身份打开命令提示符")]),s._v("。")])]),s._v(" "),n("p",[s._v("进入终端后，在终端中依次输入如下指令：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("d:\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" D:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("mysql-8.0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("bin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"初始化-mysql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始化-mysql"}},[s._v("#")]),s._v(" 初始化 MySQL")]),s._v(" "),n("p",[s._v("初始化可以选择带有随机密码或无密码，建议采用无密码初始化（可以设置密码），以免随机密码丢失。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 随机密码")]),s._v("\n."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("mysqld --initialize\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 无密码")]),s._v("\n."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("mysqld --initialize-insecure\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("执行完初始化命令后，可以发现解压路径下多了一个 "),n("code",[s._v("data")]),s._v(" 的文件夹，在里面找到 "),n("code",[s._v("计算机名.err")]),s._v(" 的文件，并打开。如果你设置了随机密码，在里面就能找到初始密码："),n("code",[s._v("root@localhost: (这个位置的字符串就是临时密码)")]),s._v("。")]),s._v(" "),n("h3",{attrs:{id:"安装-mysqld"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-mysqld"}},[s._v("#")]),s._v(" 安装 mysqld")]),s._v(" "),n("p",[s._v("继续在当前路径下执行下列命令，安装 Windows 服务：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("mysqld -install\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("PS："),n("code",[s._v("mysql")]),s._v(" 用于执行 SQL 命令，"),n("code",[s._v("mysqld")]),s._v(" 用于执行数据库命令：")]),s._v(" "),n("h3",{attrs:{id:"启动-mysql-服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动-mysql-服务"}},[s._v("#")]),s._v(" 启动 MySQL 服务")]),s._v(" "),n("p",[s._v("安装提示 success 后，可以准备启动数据库并连接了。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动数据库")]),s._v("\nnet start mysql\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 root 连接数据库, 没有密码的话直接回车即可")]),s._v("\n."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("mysql -u root -p\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭数据库")]),s._v("\nnet stop mysql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h3",{attrs:{id:"添加-修改-root-账号登录密码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#添加-修改-root-账号登录密码"}},[s._v("#")]),s._v(" 添加/修改 root 账号登录密码")]),s._v(" "),n("p",[s._v("启动数据库并登录 MySQL：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("net start mysql\n."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("mysql -u root -p\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("查询用户密码，可以看到，root 用户的密码是空的：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" host,user,authentication_string from mysql.user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("修改 root 用户的密码，执行命令：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("ALTER "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" IDENTIFIED WITH mysql_native_password BY "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这里的密码就随意填写，生产环境不建议使用过于简单的 "),n("code",[s._v("123456")]),s._v("、"),n("code",[s._v("root")]),s._v("、"),n("code",[s._v("admin")]),s._v(" 之类的密码。该命令执行完毕会得到结果："),n("code",[s._v("Query OK, 0 rows affected (0.01 sec)")]),s._v("。")]),s._v(" "),n("p",[s._v("接着需要继续执行命令：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("flush privileges"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("该命令作用是刷新 MySQL 的系统权限相关表，这样才能使刚刚的密码修改成功。")]),s._v(" "),n("p",[s._v("每次 MySQL 新设置用户或更改密码后都需要用 "),n("code",[s._v("flush privileges;")]),s._v(" 来刷新 MySQL 的系统权限相关表，否则会出现拒绝访问。还有一种方法，就是重新启动 MySQL 服务，来使新设置生效。")]),s._v(" "),n("p",[s._v("退出登录，并重新登录，此时必须使用刚才添加的密码才能登录 MySQL：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出登录")]),s._v("\nquit\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新登录")]),s._v("\n."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("mysql -u root -p\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"卸载-mysql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#卸载-mysql"}},[s._v("#")]),s._v(" 卸载 MySQL")]),s._v(" "),n("p",[s._v("同样是以管理员身份运行命名提示符，先停止服务，然后执行卸载命令卸载：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("net stop mysql\n."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("mysqld --remove mysql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"centos-7-6-下安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#centos-7-6-下安装"}},[s._v("#")]),s._v(" CentOS 7.6 下安装")]),s._v(" "),n("h3",{attrs:{id:"安装对比"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装对比"}},[s._v("#")]),s._v(" 安装对比")]),s._v(" "),n("p",[s._v("MySQL 有两种安装方式：")]),s._v(" "),n("ul",[n("li",[s._v("yum 安装：安装过程人为无法干预，不能按需安装。rpm 包里面有什么就安装什么，安装的版本也比较低。")]),s._v(" "),n("li",[s._v("源码包安装：分为编译安装和免编译安装：可以设定参数，按照需求进行安装，并且安装的版本，可以自己选择，灵活性比较大。")])]),s._v(" "),n("p",[s._v("这里我们采用源码包 - 免编译的方式安装 MySQL。")]),s._v(" "),n("h3",{attrs:{id:"下载并解压安装包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下载并解压安装包"}},[s._v("#")]),s._v(" 下载并解压安装包")]),s._v(" "),n("p",[s._v("MySQL 源码包下载地址："),n("a",{attrs:{href:"https://dev.mysql.com/downloads/mysql/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://dev.mysql.com/downloads/mysql/"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("CentOS 是基于红帽的，因此操作系统选择 Red Hat，OS 版本选择 Linux 7 (x86, 64-bit)。")]),s._v(" "),n("p",[s._v("选择 "),n("strong",[s._v("Compressed TAR Archive")]),s._v(" 点击 Download，获取到下载链接如下：")]),s._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.28-el7-x86_64.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("登录服务器，切换到 "),n("code",[s._v("/opt")]),s._v(" 目录并新建一个 "),n("code",[s._v("mysql")]),s._v(" 文件夹，下载 MySQL 安装包（如果下载慢的话，可以在本地下载后传到服务器）：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建一个文件夹用于放 mysql")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" mysql\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" mysql/\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载安装包")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.28-el7-x86_64.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("解压并重命名：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf mysql-8.0.28-el7-x86_64.tar.gz\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重命名, 原来的名字太长了")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" ./mysql-8.0.28-el7-x86_64 mysql-8.0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"创建数据文件夹以及用户并赋予权限"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建数据文件夹以及用户并赋予权限"}},[s._v("#")]),s._v(" 创建数据文件夹以及用户并赋予权限")]),s._v(" "),n("p",[s._v("以下步骤需要在 "),n("code",[s._v("/opt/mysql/")]),s._v(" 目录下执行。")]),s._v(" "),n("p",[s._v("创建数据文件夹：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 data 目录(用于放置 mysql 数据文件)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" data\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("创建用户组，并授权操作：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为 MySQL 创建一个不能 ssh 登陆的用户, 且不创建用户主目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" mysql -s /sbin/nologin -M\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改文件所有者")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql:mysql /opt/mysql/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("blockquote",[n("p",[s._v("在 useradd 命令后跟了两个参数，它们分别表示：")]),s._v(" "),n("ul",[n("li",[s._v("-s：表示指定用户所用的 shell，此处为 "),n("code",[s._v("/sbin/nologin")]),s._v("，表示不登录")]),s._v(" "),n("li",[s._v("-M：表示不创建用户主目录")])])]),s._v(" "),n("h3",{attrs:{id:"初始化数据库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始化数据库"}},[s._v("#")]),s._v(" 初始化数据库")]),s._v(" "),n("p",[s._v("以下步骤需要在 "),n("code",[s._v("/opt/mysql/")]),s._v(" 目录下执行。")]),s._v(" "),n("p",[s._v("初始化数据库：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("/opt/mysql/mysql-8.0/bin/mysqld --initialize --user"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql --basedir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/mysql/mysql-8.0/ --datadir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/mysql/data/ --lower_case_table_names"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("MySQL 8.0 后，在 Linux 端，对于 lower_case_table_names 参数，只又在初始化的时候设置才有效，若初始化的时候没设置，后面修改配置文件后再启动服务就会报错了。")])]),s._v(" "),n("p",[s._v("在这行命令的输出中，这里我们会看到初始密码（应该实在最后一行），记下来：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("A temporary password is generated "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" root@localhost: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("这个位置的字符串就是临时密码"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"创建-mysql-配置文件-my-cnf"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建-mysql-配置文件-my-cnf"}},[s._v("#")]),s._v(" 创建 MySQL 配置文件 my.cnf")]),s._v(" "),n("p",[s._v("通过阅读 "),n("code",[s._v("support-files/mysql.server")]),s._v(" 这个脚本知道，如果我们的 MySQL 不是安装在默认的 "),n("code",[s._v("/usr/local/mysql")]),s._v(" 里，就需要新建一个 "),n("code",[s._v("/etc/my.cnf")]),s._v(" 文件，在 "),n("code",[s._v("[mysqld]")]),s._v(" 段中设置 "),n("code",[s._v("basedir")]),s._v(" 参数。")]),s._v(" "),n("p",[s._v("新建文本文档 "),n("code",[s._v("my.cnf")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该配置文件必须建立在该目录下")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/my.cnf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("将下面的内容添加到该配置文件中（此处是学习用的配置示例，生产环境需要根据实际情况定制，详细参数"),n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/server-configuration-defaults.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("见官网"),n("OutboundLink")],1),s._v("）：")]),s._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[mysqld]\n# mysql 服务的唯一编号, 每个 mysql 服务 id 需唯一\nserver-id=1\n\n# mysql 服务端口号, 默认3306\nport=3306\n\n# mysql 安装目录, 默认 /usr\nbasedir=/opt/mysql/mysql-8.0\n\n# mysql 数据文件放置位置\ndatadir=/opt/mysql/data\n\n# 记录的是当前 mysqld 进程的 pid\npid-file=/opt/mysql/mysql-8.0/mysql.pid\n\n# 设置 socket 文件所在目录\nsocket=/opt/mysql/mysql-8.0/mysql.sock\n\n# 设置用来保存临时文件的目录\ntmpdir=/opt/mysql/mysql-8.0/tmp\n\n# 用户\nuser=mysql\n\n# 允许访问的 IP 网段(系统默认配置监听所有网卡, 即允许所有 IP 访问)\n# 生产环境下建议设置为: 127.0.0.1(只允许本机访问) 或某个网卡的 IP\nbind-address=0.0.0.0\n\n# 数据库默认字符集为 utf8, 并支持一些特殊表情符号(占用 4 个字节)\ncharacter-set-server=utf8mb4\n\n# 数据库字符集对应一些排序等规则, 注意要和 character-set-server 对应\ncollation-server=utf8mb4_general_ci\n\n# 是否对 sql 语句大小写敏感, 1 表示不敏感\nlower_case_table_names=1\n\n# 允许最大连接进程数\nmax_connections=400\n\n# 最大错误连接数, 这是为了防止有人从该主机试图攻击数据库系统\n# 如果某个用户发起的连接 error 超过该数值, 则该用户的下次连接将被阻塞, 直到管理员执行 flush hosts\nmax_connect_errors=100\n\n# TIMESTAMP 如果没有显示声明 NOT NULL, 允许 NULL 值\nexplicit_defaults_for_timestamp=true\n\n# SQL 数据包发送的大小, 如果有 BLOB 对象建议修改成 1G\nmax_allowed_packet=128M\n\n# MySQL连接闲置超过一定时间后(秒)将会被强行关闭\n# MySQL 默认的 wait_timeout 值为 8 个小时, interactive_timeout 参数需要同时配置才能生效\ninteractive_timeout=1800\nwait_timeout=1800\n\n# 内部内存临时表的最大值, 设置成 128M\n# 比如大数据量的 group by, order by 时可能用到临时表\n# 超过了这个值将写入磁盘, 系统 IO 压力增大\ntmp_table_size=128M\nmax_heap_table_size=128M\n\n# 数据库错误日志文件\nlog-error=/opt/mysql/mysql-8.0/err/mysqld.err\n\n# 数据库日志文件存放的位置(一般不会开启该功能, 因为 log 的量会非常庞大)\ngeneral_log_file=/opt/mysql/mysql-8.0/log/mysql.log\n# 日志文件是否开启(0 是关闭、1 是开启)\ngeneral_log=0\n\n[client]\n# 默认路径是在 /tmp/mysql.sock\n# 因为我们修改了默认的路径, 所以需要在 [client] 段再指定一下\n# 如果不指定, 虽然数据库能正常启动, 但使用 mysql 命令时还是会报找不到 mysql.sock 错误\nsocket=/opt/mysql/mysql-8.0/mysql.sock\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br")])]),n("p",[s._v("创建配置文件中所需的目录：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /opt/mysql/mysql-8.0/err /opt/mysql/mysql-8.0/tmp\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /opt/mysql/mysql-8.0/err/mysqld.err\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建了文件, 需要再次修改文件所有者")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql:mysql /opt/mysql/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"配置全局环境变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置全局环境变量"}},[s._v("#")]),s._v(" 配置全局环境变量")]),s._v(" "),n("p",[s._v("MySQL 命令默认读取的是 "),n("code",[s._v("/usr/local/bin")]),s._v(" 目录，由于我们修改了 MySQL 的默认安装路径。为了可直接使用 "),n("code",[s._v("mysql")]),s._v(" 命令，而不用 "),n("code",[s._v("/opt/mysql/mysql-8.0/bin/mysql")]),s._v(" 这样一大串，可以添加环境变量：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("在最下面添加这两行代码：")]),s._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# MySQL\nexport PATH=$PATH:/opt/mysql/mysql-8.0/bin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("保存文件后，执行刷新操作：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"启动-mysql-服务并修改密码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动-mysql-服务并修改密码"}},[s._v("#")]),s._v(" 启动 MySQL 服务并修改密码")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 MySQL 服务")]),s._v("\n/opt/mysql/mysql-8.0/support-files/mysql.server start\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录 root 用户, 记得输入之前默认生成的密码")]),s._v("\nmysql -uroot -p\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("通过下面这句代码就可直接修改密码，不用像之前的老版本一样那么复杂：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 两种改密方式二选一, 跟 5.7 版本的改密命令不同")]),s._v("\nALTER "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" IDENTIFIED WITH mysql_native_password BY "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'新密码'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" password "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" root@localhost "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'新密码'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("接着需要继续执行命令：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("// 刷新权限\nflush privileges"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"开机自启配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开机自启配置"}},[s._v("#")]),s._v(" 开机自启配置")]),s._v(" "),n("p",[s._v("下面的命令是将服务文件拷贝到 "),n("code",[s._v("/etc/init.d/")]),s._v(" 下，并重命名为 "),n("code",[s._v("mysqld")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /opt/mysql/mysql-8.0/support-files/mysql.server /etc/init.d/mysqld\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("赋予可执行权限：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /etc/init.d/mysqld\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("添加服务：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --add mysqld\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("显示服务列表：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --list\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("注：如果看到 mysqld 的服务，并且 3，4，5 都是 "),n("code",[s._v("on")]),s._v(" 的话则成功，如果是 "),n("code",[s._v("off")]),s._v("，则：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --level "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("345")]),s._v(" mysqld on\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("测试开机自启，重启电脑：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启后查看 mysql 服务是否开机自启。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("接下来可以通过一些命令操作 MySQL 服务：")]),s._v(" "),n("ul",[n("li",[s._v("启动 MySQL 服务："),n("code",[s._v("service mysql start")])]),s._v(" "),n("li",[s._v("停止 MySQL 服务："),n("code",[s._v("service mysql stop")])]),s._v(" "),n("li",[s._v("查看错误日志（如果上面两个命令执行后没效果）："),n("code",[s._v("systemctl status mysqld")])])]),s._v(" "),n("h3",{attrs:{id:"开放远程连接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开放远程连接"}},[s._v("#")]),s._v(" 开放远程连接")]),s._v(" "),n("p",[s._v("先通过 "),n("code",[s._v("mysql -uroot -p")]),s._v(" 命令连接 MySQL，然后在 MySQL 窗口下执行如下命令：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 选择 mysql 这个数据库")]),s._v("\nuse mysql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看原来数据, 方便修改以后重置回来")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" host, user, authentication_string, plugin from user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改值")]),s._v("\nupdate user "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("host")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" where "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v(" limit "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 刷新权限")]),s._v("\nflush privileges"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("blockquote",[n("ul",[n("li",[n("code",[s._v("root")]),s._v(" 可以改为你自己定义的用户名。")]),s._v(" "),n("li",[n("code",[s._v("localhost")]),s._v(" 指的是该用户开放的 IP，可以是 "),n("code",[s._v("localhost")]),s._v(" 或 "),n("code",[s._v("127.0.0.1")]),s._v("（仅本机访问），可以是具体的某一 IP，也可以是 "),n("code",[s._v("%")]),s._v(" （所有 IP 均可访问)。")]),s._v(" "),n("li",[n("code",[s._v("password")]),s._v(" 是你想使用的验证密码。")])])]),s._v(" "),n("p",[s._v("如果使用 Navicat 连接时报 "),n("code",[s._v("2003 - Can't connect to MySQL server on ...")]),s._v(" 错误，就要先看下服务器是不是开启了防火墙但又没开放端口（你可以选择不开防火墙，或者开完防火墙后记得开放 MySQL 监听的端口号）。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看状态, 发现当前是 dead 状态, 即防火墙未开启")]),s._v("\nsystemctl status firewalld\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启防火墙, 没有任何提示即开启成功")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 再次查看状态, 显示 running 即已开启了")]),s._v("\nsystemctl start firewalld\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开放默认端口号 3306, 提示 success, 表示设置成功")]),s._v("\nfirewall-cmd --permanent --zone"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改后需要重新加载配置才生效")]),s._v("\nfirewall-cmd --reload"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看已经开放的端口")]),s._v("\nfirewall-cmd --permanent --list-port\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭默认的端口号 3306(如果需要的话, 执行这个命令就行了)")]),s._v("\nfirewall-cmd --permanent --zone"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --remove-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭防火墙(如果需要的话, 执行这个命令就行了)")]),s._v("\nsystemctl stop firewalld\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("另外，如果使用的是阿里云等云厂家的服务器，无法连接的原因可能是需要去云管理平台进行一些设置。大致的入口是：")]),s._v(" "),n("p",[s._v("进入云服务管理控制平台 ——> 进入云服务器 ——> 选择实例 ——> 管理。")]),s._v(" "),n("ul",[n("li",[s._v("阿里云就找到：本实例安全组 --\x3e 配置规则 --\x3e 添加安全组规则，端口范围写 "),n("code",[s._v("3306/3306")]),s._v("，授权对象写 "),n("code",[s._v("0.0.0.0/0")]),s._v("。")]),s._v(" "),n("li",[s._v("腾讯云就找到：防火墙 --\x3e 管理规则 --\x3e 添加规则，应用类型下拉框选择 MySQL(3306) 就可以了。")]),s._v(" "),n("li",[s._v("如果改了 MySQL 的默认端口，或者想进行更多限制，或者是别的云服务商，稍微摸索下即可，这个没多少坑。")])]),s._v(" "),n("h3",{attrs:{id:"卸载-mysql-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#卸载-mysql-2"}},[s._v("#")]),s._v(" 卸载 MySQL")]),s._v(" "),n("p",[s._v("首先输入命令 "),n("code",[s._v("ps -ef | grep mysql")]),s._v(" 检查一下 MySQL 服务是否在运行，在卸载之前需要先停止服务：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql stop\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("关闭并删除自启动脚本：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/init.d\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看该服务进程状态")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --list mysqld\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除 chkconfig 管理的 MySQL 启动服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --del /etc/init.d/mysqld\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除自启动脚本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /etc/init.d/mysqld\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("删除 MySQL 安装目录（如果是按照我上文的步骤安装， 删除安装目录的命令如下）：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /opt/mysql/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("删除 MySQL 配置文件：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" /etc/my.cnf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("删除环境变量：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("删掉之前添加的 MySQL 相关的代码后，保存文件后，执行刷新操作：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("find 查找相关文件并删除：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查找相关文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / -name mysql\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 判断是否能删除后, 执行删除命令")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("删除 mysql 用户和用户组：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" mysql\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("userdel")]),s._v(" -rf mysql\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupdel")]),s._v(" mysql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("blockquote",[n("p",[s._v("注意："),n("code",[s._v("-rf")]),s._v(" 参数表示删除当前已登陆的用户，并删除与其相关的所有文件。")]),s._v(" "),n("p",[s._v("慎用 "),n("code",[s._v("-r")]),s._v(" 选项，如果用户目录下有重要文件，删除前请备份。")])]),s._v(" "),n("h2",{attrs:{id:"参考资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://blog.51cto.com/luecsc/1953842",target:"_blank",rel:"noopener noreferrer"}},[s._v("那些你不知道的MySQL配置文件的坑"),n("OutboundLink")],1)])]),s._v(" "),n("p",[s._v("（完）")])])}),[],!1,null,null,null);a.default=e.exports}}]);