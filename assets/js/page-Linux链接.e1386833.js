(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{1059:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"linux-链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux-链接"}},[s._v("#")]),s._v(" Linux 链接")]),s._v(" "),a("p",[s._v("Linux 链接分两种，一种被称为硬链接（Hard Link），另一种被称为符号链接（Symbolic Link）")]),s._v(" "),a("h2",{attrs:{id:"硬链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#硬链接"}},[s._v("#")]),s._v(" 硬链接")]),s._v(" "),a("h3",{attrs:{id:"什么是硬链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是硬链接"}},[s._v("#")]),s._v(" 什么是硬链接")]),s._v(" "),a("ul",[a("li",[s._v("硬链接指通过索引节点来进行连接")]),s._v(" "),a("li",[s._v("在 Linux 的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为索引节点号(Inode Index)")]),s._v(" "),a("li",[s._v("在 Linux 中，多个文件名指向同一索引节点是存在的")])]),s._v(" "),a("h3",{attrs:{id:"为什么要使用硬链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么要使用硬链接"}},[s._v("#")]),s._v(" 为什么要使用硬链接")]),s._v(" "),a("p",[s._v("允许一个文件拥有多个有效路径名，这样用户就可以建立硬连接到重要文件，以防止“误删”的功能")]),s._v(" "),a("p",[s._v("例如：")]),s._v(" "),a("p",[s._v("A 是 B 的硬链接（A 和 B 都是文件名）")]),s._v(" "),a("ul",[a("li",[s._v("A 的目录项中的 inode 节点号与 B 的目录项中的 inode 节点号相同")]),s._v(" "),a("li",[s._v("一个 inode 节点对应两个不同的文件名，两个文件名指向同一个文件，A 和 B 对文件系统来说是完全平等的")]),s._v(" "),a("li",[s._v("删除其中任何一个都不会影响另外一个的访问")]),s._v(" "),a("li",[s._v("当所有硬链接被删除后，文件才会被真正删除")])]),s._v(" "),a("h3",{attrs:{id:"语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),a("p",[s._v("使用 ln 命令")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln f1 f2")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"软链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#软链接"}},[s._v("#")]),s._v(" 软链接")]),s._v(" "),a("h3",{attrs:{id:"什么是软链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是软链接"}},[s._v("#")]),s._v(" 什么是软链接")]),s._v(" "),a("ul",[a("li",[s._v("软链接文件有类似于 Windows 的快捷方式")]),s._v(" "),a("li",[s._v("实际上是一个特殊的文件")]),s._v(" "),a("li",[s._v("包含的有另一文件的位置信息")])]),s._v(" "),a("p",[s._v("例如：")]),s._v(" "),a("p",[s._v("A 是 B 的软链接（A 和 B 都是文件名）")]),s._v(" "),a("ul",[a("li",[s._v("A 的目录项中的 inode 节点号与 B 的目录项中的 inode 节点号不相同")]),s._v(" "),a("li",[s._v("A 和 B 指向的是两个不同的 inode，继而指向两块不同的数据块")]),s._v(" "),a("li",[s._v("A 的数据块中存放的只是 B 的路径名（可以根据这个找到 B 的目录项）")]),s._v(" "),a("li",[s._v("A 和 B 之间是“主从”关系，如果 B 被删除了，A 仍然存在（因为两个是不同的文件），但指向的是一个无效的链接")])]),s._v(" "),a("h3",{attrs:{id:"语法-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法-2"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),a("p",[s._v("使用 ln -s 命令")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln -s f1 f2")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /home")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch f1 # 创建一个测试文件f1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nf1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln f1 f2     # 创建f1的一个硬连接文件f2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln -s f1 f3   # 创建f1的一个符号连接文件f3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -li       # -i参数显示文件的inode节点信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("397247")]),s._v(" -rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Mar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 00:50 f1\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("397247")]),s._v(" -rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Mar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 00:50 f2\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("397248")]),s._v(" lrwxrwxrwx "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" Mar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 00:50 f3 -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" f1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ul",[a("li",[s._v("硬连接文件 f2 与原文件 f1 的 inode 节点相同，均为 397247")]),s._v(" "),a("li",[s._v("软连接文件的 inode 节点不同")])]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo 字符串输出 >> f1 输出到 f1文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# echo "I am f1 file" >>f1')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat f1")]),s._v("\nI am f1 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat f2")]),s._v("\nI am f1 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat f3")]),s._v("\nI am f1 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -f f1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat f2")]),s._v("\nI am f1 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-7-centos home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat f3")]),s._v("\ncat: f3: No such "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("结论：")]),s._v(" "),a("ul",[a("li",[s._v("删除符号连接 f3,对 f1,f2 无影响")]),s._v(" "),a("li",[s._v("删除硬连接 f2，对 f1,f3 也无影响")]),s._v(" "),a("li",[s._v("删除原文件 f1，对硬连接 f2 没有影响，导致符号连接 f3 失效")]),s._v(" "),a("li",[s._v("同时删除原文件 f1,硬连接 f2，整个文件会真正的被删除")])])])}),[],!1,null,null,null);t.default=e.exports}}]);