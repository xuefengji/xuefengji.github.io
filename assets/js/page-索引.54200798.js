(window.webpackJsonp=window.webpackJsonp||[]).push([[315],{1146:function(a,e,s){"use strict";s.r(e);var t=s(1),r=Object(t.a)({},(function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#索引"}},[a._v("#")]),a._v(" 索引")]),a._v(" "),s("h2",{attrs:{id:"什么是索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是索引"}},[a._v("#")]),a._v(" 什么是索引")]),a._v(" "),s("p",[s("strong",[a._v("官方定义")]),a._v("：一种帮助 MySql 提高查询速率的数据结构")]),a._v(" "),s("p",[a._v("索引：")]),a._v(" "),s("ul",[s("li",[a._v("一种数据结构")]),a._v(" "),s("li",[a._v("帮助 MySql 高效获取数据的数据结构")]),a._v(" "),s("li",[a._v("存储在文件系统中")]),a._v(" "),s("li",[a._v("索引的文件存储形式与存储引擎有关")]),a._v(" "),s("li",[a._v("索引文件的结构\n"),s("ul",[s("li",[a._v("hash")]),a._v(" "),s("li",[a._v("二叉树")]),a._v(" "),s("li",[a._v("B 树")]),a._v(" "),s("li",[a._v("B+ 树")])])])]),a._v(" "),s("p",[s("strong",[a._v("索引的优点")]),a._v("：")]),a._v(" "),s("ul",[s("li",[a._v("大大加快查询速度")])]),a._v(" "),s("p",[s("strong",[a._v("索引的缺点")]),a._v("：")]),a._v(" "),s("ul",[s("li",[a._v("维护索引需要耗费数据库资源")]),a._v(" "),s("li",[a._v("索引需要占用磁盘空间")]),a._v(" "),s("li",[a._v("当对表的数据进行增删改的时候，因为要维护索引，速度会受到影响")])]),a._v(" "),s("h2",{attrs:{id:"索引的分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#索引的分类"}},[a._v("#")]),a._v(" 索引的分类")]),a._v(" "),s("p",[s("strong",[a._v("InnoDB")]),a._v("：")]),a._v(" "),s("ul",[s("li",[a._v("主键索引(primary key)\n"),s("ul",[s("li",[a._v("唯一的标识，主键不可重复，只能有一个列作为主键")]),a._v(" "),s("li",[a._v("主键索引在主键被创建的时候自动创建，InnoDB 为聚簇索引")]),a._v(" "),s("li",[a._v("索引列的值不能为空")])])]),a._v(" "),s("li",[a._v("唯一索引(unique key)\n"),s("ul",[s("li",[a._v("避免重复的列出现，唯一索引可以重复，多个列都可以标识唯一索引")]),a._v(" "),s("li",[a._v("唯一索引列值可以为 null，但是只能存在一个 null")])])]),a._v(" "),s("li",[a._v("单值(普通)索引(key/index)\n只包含单个列，一个表中可以有多个单列索引")]),a._v(" "),s("li",[a._v("复合索引\n一个索引包含多个列")])]),a._v(" "),s("p",[s("strong",[a._v("MyISAM")]),a._v("：")]),a._v(" "),s("ul",[s("li",[a._v("全文索引(fulltext)\n"),s("ul",[s("li",[a._v("MySQL 5.7 版本之前只用于 MyISAM")]),a._v(" "),s("li",[a._v("在特定的数据库引擎下才有，MyISAM")]),a._v(" "),s("li",[a._v("快速定位数据")])])])]),a._v(" "),s("h2",{attrs:{id:"索引的使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#索引的使用"}},[a._v("#")]),a._v(" 索引的使用")]),a._v(" "),s("h3",{attrs:{id:"索引的创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#索引的创建"}},[a._v("#")]),a._v(" 索引的创建")]),a._v(" "),s("h4",{attrs:{id:"创建表时创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建表时创建"}},[a._v("#")]),a._v(" 创建表时创建")]),a._v(" "),s("p",[s("strong",[a._v("语法")]),a._v("：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("   create table tbl_name(字段名称 字段类型[完整性约束条件]，\n\n    ....,\n\n    [unique|fulltext|spatial] index|key [索引名称] (字段名称 [( 长度)] [asc|desc])\n\n    )\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("p",[s("strong",[a._v("示例")]),a._v("：")]),a._v(" "),s("ul",[s("li",[a._v("创建主键索引")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("create table t_user(id varchar(20) primary key, name varchar(20))\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("创建单值索引")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("create table t_user(id varchar(20) primary key, name varchar(20),key(name))\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("创建唯一索引")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("create table t_user(id varchar(20) primary key, name varchar(20),age int, unique key(name))\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("创建唯一索引")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("create table t_user(id varchar(20) primary key, name varchar(20),age int, unique key(name))\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("创建复合索引")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("create table t_user(id varchar(20) primary key, name varchar(20),age int, key(name，age))\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"在已存在的表上创建索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在已存在的表上创建索引"}},[a._v("#")]),a._v(" 在已存在的表上创建索引")]),a._v(" "),s("p",[s("strong",[a._v("语法")]),a._v("：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("  create [unique|fulltext|spatial] index 索引名称 on 表名(字段名[(长度)] [asc|desc])\n  \n  alter table tbl_name add [unique|fulltext|spatial] index 索引名称(字段名称[(长度)] [asc|desc])\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[s("strong",[a._v("示例")]),a._v("：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("create index name on t_user1(name)\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[a._v("重点")]),a._v(" "),s("p",[a._v("复合索引：")]),a._v(" "),s("ul",[s("li",[a._v("最左前缀原则")]),a._v(" "),s("li",[a._v("MySQL 引擎在查询为了更好利用索引，在查询过程中会动态调整查询字段顺序以便利用索引")])]),a._v(" "),s("p",[a._v("比如：给一个表添加了复合索引，添加顺序为：name age bir\n基于 name ：可以使用索引\n基于 name age：可以使用索引\n基于 name age bir：可以使用索引\n基于 name bir age：可以使用索引\n基于 bir age name：可以使用索引")]),a._v(" "),s("p",[s("strong",[a._v("总结")]),a._v("：必须要包含最左边的 name 才可以使用索引")])]),a._v(" "),s("h3",{attrs:{id:"查询索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查询索引"}},[a._v("#")]),a._v(" 查询索引")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("show index from tbl_name\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("全文索引查询：select * from tbl_name where match(要查询的列名) against（'查询匹配的字符'）")]),a._v(" "),s("h3",{attrs:{id:"删除索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除索引"}},[a._v("#")]),a._v(" 删除索引")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("  drop index 索引名称 on tbl_name\n\n  alter table tbl_name drop index 索引名称\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h2",{attrs:{id:"参考文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[a._v("#")]),a._v(" 参考文档")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.bilibili.com/video/BV19y4y127h4?p=1",target:"_blank",rel:"noopener noreferrer"}},[a._v("MySql 索引"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("（完）")])])}),[],!1,null,null,null);e.default=r.exports}}]);