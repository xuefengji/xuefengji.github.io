(window.webpackJsonp=window.webpackJsonp||[]).push([[301],{1239:function(s,t,a){"use strict";a.r(t);var e=a(1),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"环境准备与入门"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境准备与入门"}},[s._v("#")]),s._v(" 环境准备与入门")]),s._v(" "),e("h2",{attrs:{id:"安装-pytest"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-pytest"}},[s._v("#")]),s._v(" 安装 Pytest")]),s._v(" "),e("p",[s._v("安装方法")]),s._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[s._v("pip install pytest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("安装完成后查看版本信息")]),s._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[s._v("pip show pytest\n或\npytest "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("version\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"快速入门"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速入门"}},[s._v("#")]),s._v(" 快速入门")]),s._v(" "),e("h3",{attrs:{id:"测试函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试函数"}},[s._v("#")]),s._v(" 测试函数")]),s._v(" "),e("p",[s._v("新建 "),e("code",[s._v("test_sample.py")]),s._v(" 文件")]),s._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("func")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" x "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("test_answer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("assert")]),s._v(" func"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("在该 py 文件所在的路径下运行："),e("code",[s._v("pytest")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(705),alt:"pytest"}})]),s._v(" "),e("p",[e("strong",[s._v("知识点")]),s._v("：")]),s._v(" "),e("p",[s._v("查找当前目录及其子目录下以 "),e("code",[s._v("test_*.py")]),s._v(" 或"),e("code",[s._v("*_test.py")]),s._v("文件，找到文件后，在文件中找到以 test 开头函数并执行")]),s._v(" "),e("h3",{attrs:{id:"测试类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试类"}},[s._v("#")]),s._v(" 测试类")]),s._v(" "),e("p",[s._v("当用例有多个的时候，可以把多个测试用例，写到一个测试类里")]),s._v(" "),e("p",[s._v("新建一个 "),e("code",[s._v("test_class.py")])]),s._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TestClass")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("test_one")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        x "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"this"')]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("assert")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'h'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" x\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("test_two")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        x "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("assert")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("hasattr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'check'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("在该 py 文件所在的路径下指定该文件运行："),e("code",[s._v("pytest -q test_class.py")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(706),alt:"pytest"}})]),s._v(" "),e("h2",{attrs:{id:"用例设计原则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用例设计原则"}},[s._v("#")]),s._v(" 用例设计原则")]),s._v(" "),e("p",[s._v("用 Pytest 写用例时候，一定要按照下面的规则去写，否则不符合规则的测试用例是不会执行的")]),s._v(" "),e("ul",[e("li",[s._v("文件名以 "),e("code",[s._v("test_*.py")]),s._v(" 文件和 "),e("code",[s._v("*_test.py")])]),s._v(" "),e("li",[s._v("以 "),e("code",[s._v("test_")]),s._v(" 开头的函数")]),s._v(" "),e("li",[s._v("以 Test 开头的类，不能包含"),e("code",[s._v("__init__")]),s._v(" 方法")]),s._v(" "),e("li",[s._v("以 "),e("code",[s._v("test_")]),s._v(" 开头的方法")]),s._v(" "),e("li",[s._v("所有的包 package 必须要有 "),e("code",[s._v("__init__.py")]),s._v(" 文件")])]),s._v(" "),e("h2",{attrs:{id:"执行用例规则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行用例规则"}},[s._v("#")]),s._v(" 执行用例规则")]),s._v(" "),e("p",[e("strong",[s._v("注意，下面讲的都是在 cmd 中执行 pytest 命令")])]),s._v(" "),e("h3",{attrs:{id:"某个目录下所有的用例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#某个目录下所有的用例"}},[s._v("#")]),s._v(" 某个目录下所有的用例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pytest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"执行某一个-py-文件下用例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行某一个-py-文件下用例"}},[s._v("#")]),s._v(" 执行某一个 py 文件下用例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pytest 脚本名称.py\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"运行-start-py-模块里面的某个函数-或者某个类-某个类里面的方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行-start-py-模块里面的某个函数-或者某个类-某个类里面的方法"}},[s._v("#")]),s._v(" 运行 start.py 模块里面的某个函数，或者某个类，某个类里面的方法")]),s._v(" "),e("p",[s._v("加v和不加 -v 都可以，加 -v 的话，打印的信息更详细")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pytest -v 08_mark.py::TestClass::test_method \npytest start.py::test_answer\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"运行-start-py-模块里面-测试类里面的某个方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行-start-py-模块里面-测试类里面的某个方法"}},[s._v("#")]),s._v(" 运行 start.py 模块里面,测试类里面的某个方法")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pytest start.py::TestClass::test_two\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"m-标记表达式-后续讲解"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#m-标记表达式-后续讲解"}},[s._v("#")]),s._v(" "),e("code",[s._v("-m")]),s._v(" 标记表达式（后续讲解）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" pytest -m login\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("将运行用 "),e("code",[s._v("@pytest.mark.login")]),s._v(" 装饰器修饰的所有测试，后面再展开讲标记哦")]),s._v(" "),e("h3",{attrs:{id:"q-简单打印-只打印测试用例的执行结果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#q-简单打印-只打印测试用例的执行结果"}},[s._v("#")]),s._v(" "),e("code",[s._v("-q")]),s._v(" 简单打印，只打印测试用例的执行结果")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" pytest -q start.py\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"s-详细打印"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#s-详细打印"}},[s._v("#")]),s._v(" "),e("code",[s._v("-s")]),s._v(" 详细打印")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" pytest -s start.py\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"x-遇到错误时停止测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#x-遇到错误时停止测试"}},[s._v("#")]),s._v(" "),e("code",[s._v("-x")]),s._v(" 遇到错误时停止测试")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pytest start.py -x\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"maxfail-num-当用例错误个数达到指定数量时-停止测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#maxfail-num-当用例错误个数达到指定数量时-停止测试"}},[s._v("#")]),s._v(" "),e("code",[s._v("--maxfail=num")]),s._v("，当用例错误个数达到指定数量时，停止测试")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pytest start.py --maxfail=1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"k-匹配用例名称"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#k-匹配用例名称"}},[s._v("#")]),s._v(" "),e("code",[s._v("-k")]),s._v(" 匹配用例名称")]),s._v(" "),e("p",[s._v("执行测试用例名称包含http的所有用例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pytest -s -k http start.py\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"k-根据用例名称排除某些用例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#k-根据用例名称排除某些用例"}},[s._v("#")]),s._v(" "),e("code",[s._v("-k")]),s._v(" 根据用例名称排除某些用例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('pytest -s -k "not http" start.py\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"k-同时匹配不同的用例名称"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#k-同时匹配不同的用例名称"}},[s._v("#")]),s._v(" "),e("code",[s._v("-k")]),s._v(" 同时匹配不同的用例名称")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('pytest -s -k "method or weibo" start.py\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[s._v("Python 测试发现约定")]),s._v(" "),e("ul",[e("li",[s._v("如果未指定任何参数，则收集从 testpaths（如果已配置）或当前目录开始")]),s._v(" "),e("li",[s._v("命令行参数可以在目录、文件名或节点 ID 的任何组合中使用")]),s._v(" "),e("li",[s._v("递归到目录，除非它们匹配 norecursedirs")]),s._v(" "),e("li",[s._v("在这些目录中，搜索 "),e("code",[s._v("test_*.py")]),s._v(" 或 "),e("code",[s._v("*_test.py")])]),s._v(" "),e("li",[s._v("从这些文件中，搜集测试项目：\n"),e("ul",[e("li",[s._v("在类之外拥有 test 前缀的测试函数或方法")]),s._v(" "),e("li",[s._v("在拥有 Test 前缀中的测试类(不含 "),e("code",[s._v("__init__")]),s._v(" 方法)中的拥有 test 前缀的测试函数或方法")])])]),s._v(" "),e("li",[s._v("可自定义测试发现规则")]),s._v(" "),e("li",[s._v("Pytest 是可以兼容 Unittest 脚本的，之前写的 Unittest 用例也能用 Pytest 框架去运行")])])]),s._v(" "),e("h2",{attrs:{id:"pycharm-运行-pytest"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pycharm-运行-pytest"}},[s._v("#")]),s._v(" Pycharm 运行 Pytest")]),s._v(" "),e("p",[e("img",{attrs:{src:a(707),alt:"pytest"}})]),s._v(" "),e("p",[e("img",{attrs:{src:a(708),alt:"pytest"}})]),s._v(" "),e("p",[s._v("（完）")])])}),[],!1,null,null,null);t.default=r.exports},705:function(s,t,a){s.exports=a.p+"assets/img/1.1dbb01f7.png"},706:function(s,t,a){s.exports=a.p+"assets/img/2.8ced597e.png"},707:function(s,t,a){s.exports=a.p+"assets/img/3.e4b42ff3.png"},708:function(s,t,a){s.exports=a.p+"assets/img/4.2a90ffd3.png"}}]);