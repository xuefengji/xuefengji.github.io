(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1229:function(s,a,t){"use strict";t.r(a);var e=t(1),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"allure-主要特性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#allure-主要特性"}},[s._v("#")]),s._v(" Allure 主要特性")]),s._v(" "),e("p",[s._v("Allure 除了可以在命令行敲命令之外，还有一些内置的主要特性")]),s._v(" "),e("h2",{attrs:{id:"environment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#environment"}},[s._v("#")]),s._v(" Environment")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("环境变量配置可以添加报告相关的配置参数，如运行的系统环境，版本号，测试环境，测试人员等基本信息")])]),s._v(" "),e("li",[e("p",[s._v("默认报告中是没有的")])]),s._v(" "),e("li",[e("p",[s._v("用处不大")])])]),s._v(" "),e("h3",{attrs:{id:"配置方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置方式"}},[s._v("#")]),s._v(" 配置方式")]),s._v(" "),e("h4",{attrs:{id:"方式一"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方式一"}},[s._v("#")]),s._v(" 方式一")]),s._v(" "),e("p",[s._v("添加 "),e("code",[s._v("environment.properties")]),s._v(" 文件放入 allure 目录中")]),s._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[s._v("systemVersion"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("win11\npythonVersion"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nallureVersion"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.17")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nbaseUrl"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\nprojectName"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("img",{attrs:{src:t(675),alt:"pytest"}})]),s._v(" "),e("h4",{attrs:{id:"方式二"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方式二"}},[s._v("#")]),s._v(" 方式二")]),s._v(" "),e("p",[s._v("也可以用 "),e("code",[s._v("environment.xml")]),s._v(" 文件，格式如下")]),s._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("environment"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("parameter"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("key"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Browser"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("key"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Chrome"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("value"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("parameter"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("parameter"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("key"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Browser"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Version"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("key"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("63.0")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("value"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("parameter"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("parameter"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("key"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Stand"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("key"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Production"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("value"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("parameter"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("environment"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),e("p",[s._v("都不可以写中文，会乱码")])]),s._v(" "),e("h4",{attrs:{id:"报告展示"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#报告展示"}},[s._v("#")]),s._v(" 报告展示")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pytest -sq --alluredir ./allure\nallure serve ./report\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("img",{attrs:{src:t(676),alt:"pytest"}})]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("思考")]),s._v(" "),e("p",[s._v("在运行 Pytest 生成 Allure 报告的时候，有时候需要加 "),e("code",[s._v("--clean")]),s._v(" 参数，清楚之前的报告记录，这样会之前清空 report 目录，"),e("code",[s._v("environment.properties")]),s._v(" 文件也会被删除，那是不是每次都要重新新建这个文件？")])]),s._v(" "),e("p",[s._v("解决方案：")]),s._v(" "),e("p",[e("strong",[s._v("使用 copy 命令")]),s._v("：")]),s._v(" "),e("p",[s._v("为了不让 "),e("code",[s._v("environment.properties")]),s._v(" 文件删除掉，可以把 "),e("code",[s._v("environment.properties")]),s._v(" 文件放项目根目录，在运行报告的时候，先 copy 到 allure 目录")]),s._v(" "),e("p",[s._v("Windows：")]),s._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[s._v("pytest "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sq "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("alluredir "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("allure "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("clean\n\ncopy environment"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("properties allure\\environment"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("properties\n\nallure serve "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("allure\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("Linux 使用 cp 命令：")]),s._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[s._v("pytest "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sq "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("alluredir "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("allure "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("clean\ncp environment"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("properties "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("allure"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("environment"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("properties\nallure serve "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("allure\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"categories"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#categories"}},[s._v("#")]),s._v(" categories")]),s._v(" "),e("p",[s._v("测试用例结果的分类")]),s._v(" "),e("p",[s._v("默认情况下，有两类缺陷：")]),s._v(" "),e("ul",[e("li",[s._v("Product defects 产品缺陷（测试结果：failed）")]),s._v(" "),e("li",[s._v("Test defects 测试缺陷（测试结果：error/broken）")])]),s._v(" "),e("p",[s._v("可以创建自定义缺陷分类的，将 "),e("code",[s._v("categories.json")]),s._v(" 文件添加到 allure 目录即可（和上面 "),e("code",[s._v("environment.properties")]),s._v(" 放同一个目录）")]),s._v(" "),e("p",[s._v("categories.json")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('[\n  {\n    "name": "Ignored tests", \n    "matchedStatuses": ["skipped"] \n  },\n  {\n    "name": "Infrastructure problems",\n    "matchedStatuses": ["broken", "failed"],\n    "messageRegex": ".*bye-bye.*" \n  },\n  {\n    "name": "Outdated tests",\n    "matchedStatuses": ["broken"],\n    "traceRegex": ".*FileNotFoundException.*" \n  },\n  {\n    "name": "Product defects",\n    "matchedStatuses": ["failed"]\n  },\n  {\n    "name": "Test defects",\n    "matchedStatuses": ["broken"]\n  }\n]\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br")])]),e("ul",[e("li",[e("strong",[s._v("name")]),s._v("：分类名称，"),e("strong",[s._v("可以是中文哦")])]),s._v(" "),e("li",[e("strong",[s._v("matchedStatuses")]),s._v('：测试用例的运行状态，默认["failed", "broken", "passed", "skipped", "unknown"]')]),s._v(" "),e("li",[e("strong",[s._v("messageRegex")]),s._v("：测试用例运行的错误信息，默认是 .* ，是通过正则去匹配的")]),s._v(" "),e("li",[e("strong",[s._v("traceRegex")]),s._v("：测试用例运行的错误堆栈信息，默认是 .* ，也是通过正则去匹配的")])]),s._v(" "),e("h2",{attrs:{id:"flaky-test"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#flaky-test"}},[s._v("#")]),s._v(" Flaky test")]),s._v(" "),e("p",[s._v("可以将整个测试类标记为 Flaky")]),s._v(" "),e("p",[e("strong",[s._v("用法")]),s._v("：在类或者方法上直接加 @Flaky")]),s._v(" "),e("h3",{attrs:{id:"flaky-是什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#flaky-是什么"}},[s._v("#")]),s._v(" Flaky 是什么")]),s._v(" "),e("ul",[e("li",[s._v("简单来说就是，不够稳定的测试用例集，有可能前阵子还运行成功，过阵子就运行失败，理解成“闪烁”")]),s._v(" "),e("li",[s._v("标记成 Flaky 的好处就是：当用例失败的情况下，我们能获取足够详细的信息，毕竟有可能某些测试用例是非常重要的")]),s._v(" "),e("li",[s._v("如果不标记为 Flaky 的话，可能就要禁用这些测试")])]),s._v(" "),e("h2",{attrs:{id:"参考资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料：")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://docs.qameta.io/allure/#_features",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("（完）")])])}),[],!1,null,null,null);a.default=r.exports},675:function(s,a,t){s.exports=t.p+"assets/img/44.8ba932fb.png"},676:function(s,a,t){s.exports=t.p+"assets/img/45.cd7e2bc3.png"}}]);