(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{1332:function(t,v,_){"use strict";_.r(v);var e=_(1),r=Object(e.a)({},(function(){var t=this,v=t.$createElement,e=t._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"jdbc-连接配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jdbc-连接配置"}},[t._v("#")]),t._v(" JDBC  连接配置")]),t._v(" "),e("h2",{attrs:{id:"前提条件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),e("ul",[e("li",[t._v("本文所述为连接 Mysql")]),t._v(" "),e("li",[t._v("需要先下载连接 Mysql 的 jar 包")])]),t._v(" "),e("p",[e("strong",[t._v("jar 包下载")]),t._v("：")]),t._v(" "),e("p",[t._v("下载链接：https://dev.mysql.com/downloads/")]),t._v(" "),e("p",[e("img",{attrs:{src:_(848),alt:"jdbc"}})]),t._v(" "),e("p",[t._v("选择 Connect/J ，选择下图框出来的")]),t._v(" "),e("p",[e("img",{attrs:{src:_(849),alt:"jdbc"}})]),t._v(" "),e("p",[t._v("选择 ZIP 文件下载")]),t._v(" "),e("p",[e("img",{attrs:{src:_(850),alt:"jdbc"}})]),t._v(" "),e("p",[t._v("下载完成后，将解压出的 jar 包文件放在 lib/ext 目录下")]),t._v(" "),e("h2",{attrs:{id:"jdbc-连接配置-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jdbc-连接配置-2"}},[t._v("#")]),t._v(" JDBC 连接配置")]),t._v(" "),e("p",[t._v("位置：配置元件中 JDBC Connection Configuration")]),t._v(" "),e("p",[t._v("在配置 JDBC Connection Configuration 前需要在测试计划中引入连接的 jar 包")]),t._v(" "),e("p",[e("strong",[t._v("方式一")]),t._v("：")]),t._v(" "),e("p",[t._v("将上述下载好的 jar 包放入 JMeter 文件下的 lib/ext 目录下，JMeter 启动时，可以自动加载")]),t._v(" "),e("p",[e("strong",[t._v("方式二")]),t._v("：")]),t._v(" "),e("p",[t._v("在测试计划底部引入 jar 包")]),t._v(" "),e("p",[e("img",{attrs:{src:_(851),alt:"jdbc"}})]),t._v(" "),e("h2",{attrs:{id:"配置介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置介绍"}},[t._v("#")]),t._v(" 配置介绍")]),t._v(" "),e("p",[e("img",{attrs:{src:_(852),alt:"jdbc"}})]),t._v(" "),e("p",[t._v("参数介绍：")]),t._v(" "),e("p",[e("strong",[t._v("Variable Name Bound to Pool 部分")]),t._v("：")]),t._v(" "),e("p",[t._v("Variable Name for created Pool：变量名绑定到池，与 JDBC 取样器中对应")]),t._v(" "),e("p",[e("strong",[t._v("Connection Pool Configuration 部分")]),t._v("：")]),t._v(" "),e("p",[t._v("此部分一般用默认值")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("参数")]),t._v(" "),e("th",[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("Max Number of Connections")]),t._v(" "),e("td",[t._v("最大连接数，性能测试时，建议填 0")])]),t._v(" "),e("tr",[e("td",[t._v("Max Wait(ms)")]),t._v(" "),e("td",[t._v("在连接池中取回连接最大等待时间")])]),t._v(" "),e("tr",[e("td",[t._v("Time Between Eviction Runs(ms)")]),t._v(" "),e("td",[t._v("线程可空闲时间"),e("br"),t._v("如果使用当前连接池中某个连接在空闲 Time Between Eviction Runs Millis 时间后仍然没有使用，则被物理性的关闭掉")])]),t._v(" "),e("tr",[e("td",[t._v("Auto Commit")]),t._v(" "),e("td",[t._v("自动提交 SQL 语句")])]),t._v(" "),e("tr",[e("td",[t._v("Transation Isolation")]),t._v(" "),e("td",[t._v("事务隔离级别")])]),t._v(" "),e("tr",[e("td",[t._v("Preinit Pool")]),t._v(" "),e("td",[t._v("立即初始化连接池"),e("br"),t._v("如果为 False 则第一个 JDBC 的请求的响应时间会比较长，因为包含了连接池建立的时间")])]),t._v(" "),e("tr",[e("td",[t._v("Init SQL statements separated by new line")]),t._v(" "),e("td",[t._v("初始化语句，在连接成功后执行")])])])]),t._v(" "),e("p",[e("strong",[t._v("Connection Validation by Pool  部分")]),t._v("：")]),t._v(" "),e("p",[t._v("验证连接池是否可响应")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("参数")]),t._v(" "),e("th",[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("Test While Idle")]),t._v(" "),e("td",[t._v("当连接空闲时是否断开")])]),t._v(" "),e("tr",[e("td",[t._v("Soft Min Evictable Idle Time(ms)")]),t._v(" "),e("td",[t._v("连接在池中处于空闲状态的最短时间")])]),t._v(" "),e("tr",[e("td",[t._v("Validation Query")]),t._v(" "),e("td",[t._v("一个简单的查询，确定数据库是否仍在响应"),e("br"),t._v("默认为 JDBC 驱动程序的 isValid() 方法，适用于许多数据库")])])])]),t._v(" "),e("p",[e("strong",[t._v("Database Connection Configuration 部分")]),t._v("：")]),t._v(" "),e("p",[t._v("数据库连接配置")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("参数")]),t._v(" "),e("th",[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("Database URL")]),t._v(" "),e("td",[t._v("数据库连接 URL")])]),t._v(" "),e("tr",[e("td",[t._v("JDBC Driver class")]),t._v(" "),e("td",[t._v("数据库驱动，可根据数据库类型下拉选择相应的驱动")])]),t._v(" "),e("tr",[e("td",[t._v("Username")]),t._v(" "),e("td",[t._v("数据库登录用户名")])]),t._v(" "),e("tr",[e("td",[t._v("Password")]),t._v(" "),e("td",[t._v("数据库登录密码")])]),t._v(" "),e("tr",[e("td",[t._v("Connection Properties")]),t._v(" "),e("td",[t._v("建立连接时要设置的连接属性")])])])]),t._v(" "),e("p",[t._v("Database URL 举例")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("jdbc:mysql://localhost:3306/dbname?useUnicode=true&characterEncoding=UTF8&autoReconnect=true&allowMultiQueries=true（允许执行多条 sql）\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("常见数据库的连接 URL和驱动")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("数据库")]),t._v(" "),e("th",[t._v("驱动")]),t._v(" "),e("th",[t._v("URL")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("MySQL")]),t._v(" "),e("td",[t._v("com.mysql.jdbc.Driver")]),t._v(" "),e("td",[t._v("jdbc:mysql://host:port/{dbname}")])]),t._v(" "),e("tr",[e("td",[t._v("PostgreSQL")]),t._v(" "),e("td",[t._v("org.postgresql.Driver")]),t._v(" "),e("td",[t._v("jdbc:postgresql:{dbname}")])]),t._v(" "),e("tr",[e("td",[t._v("Oracle")]),t._v(" "),e("td",[t._v("oracle.jdbc.driver.OracleDriver")]),t._v(" "),e("td",[t._v("jdbc:oracle:thin:user/pass@//host:port/service")])]),t._v(" "),e("tr",[e("td",[t._v("sqlServer")]),t._v(" "),e("td",[t._v("com.microsoft.sqlserver.jdbc.SQLServerDriver")]),t._v(" "),e("td",[t._v("jdbc:sqlserver://host:port;databaseName=databaseName")])])])]),t._v(" "),e("p",[t._v("（完）")])])}),[],!1,null,null,null);v.default=r.exports},848:function(t,v,_){t.exports=_.p+"assets/img/jdbc1.e1cd0a0b.png"},849:function(t,v,_){t.exports=_.p+"assets/img/jdbc2.8b8b8c99.png"},850:function(t,v,_){t.exports=_.p+"assets/img/jdbc3.a1407a73.png"},851:function(t,v,_){t.exports=_.p+"assets/img/jdbc6.f69075a4.png"},852:function(t,v,_){t.exports=_.p+"assets/img/jdbc5.02c21790.png"}}]);