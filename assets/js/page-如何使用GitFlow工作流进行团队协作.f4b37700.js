(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{678:function(s,n,t){"use strict";t.r(n);var a=t(1),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"如何使用-gitflow-工作流进行团队协作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何使用-gitflow-工作流进行团队协作"}},[s._v("#")]),s._v(" 如何使用 GitFlow 工作流进行团队协作")]),s._v(" "),t("blockquote",[t("p",[s._v("以博客项目为例，记录一下应用 GitFlow 工作流进行团队协作的主要步骤和命令。")])]),s._v(" "),t("h2",{attrs:{id:"初始化项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始化项目"}},[s._v("#")]),s._v(" 初始化项目")]),s._v(" "),t("p",[s._v("首先创建项目，并创建一个 "),t("code",[s._v("develop")]),s._v(" 分支，以后更多操作是在 "),t("code",[s._v("develop")]),s._v(" 分支上进行的：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建项目")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" blog "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" blog\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化 Git 版本库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加远程版本库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" origin https://github.com/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("your-github-id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("/blog.git\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建 develop 分支并切换")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b develop\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化项目")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'# 个人博客'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" README.md\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 .gitignore 文件, 用于忽略一些临时文件或自动编译生成文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" .gitignore\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ...")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"init repo"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 推送到远程开发分支")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -u origin develop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h2",{attrs:{id:"功能开发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能开发"}},[s._v("#")]),s._v(" 功能开发")]),s._v(" "),t("p",[s._v("我和小明开始独立开发自己的功能。比如，我开发"),t("code",[s._v("角色模块")]),s._v("，小明开发"),t("code",[s._v("文章模块")]),s._v("。我们都新建自己的功能分支，独立开发、独立测试，互不干扰。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (我)克隆版本库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("your-github-id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("/blog.git\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (我)切换到 develop 分支")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout develop\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (我)创建功能分支, 功能分支是从开发分支分叉出去的")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b feature/role\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (我)现在可以愉快地开发新功能了")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (我)将分支推送到远程版本库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin feature/role\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h2",{attrs:{id:"代码-review-和合并"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码-review-和合并"}},[s._v("#")]),s._v(" 代码 Review 和合并")]),s._v(" "),t("p",[s._v("现在，我已经完成角色模块，而且基本功能也通过了测试，是时候合并到开发分支了。我发起了 Pull Request，接受群众 Review。项目负责人可以接收 Pull Request 并将分支合并到开发分支。")]),s._v(" "),t("p",[s._v("当然 Pull Request 只是一个可选的步骤，你可以直接将分支合并到开发分支。")]),s._v(" "),t("h2",{attrs:{id:"发布分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布分支"}},[s._v("#")]),s._v(" 发布分支")]),s._v(" "),t("p",[s._v("现在角色模块和文章模块都开发完毕了，项目负责人小甲掐指一算，发布新版本吉时已到，假设是 v0.1.0，从开发分支中拉取出一个发布分支：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保持是最新代码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout develop\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b release/v0.1.0\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -u origin release/v0.1.0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("我们已经开始新的功能了，突然间测试报了个 bug, 我得优先处理这个 bug：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 但是(我)在切换分支时报了个错:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout release/v0.1.0\nerror: Your "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" changes to the following files would be overwritten by checkout:\n  xxx.js\nPlease commit your changes or stash them before you switch branches.\nAborting\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("意思是，你的本地已经修改了一些文件，如果就这样 "),t("code",[s._v("checkout")]),s._v(" 过去，将会被覆盖。你可以提交（"),t("code",[s._v("commit")]),s._v("）你的变更，或者暂存（"),t("code",[s._v("stash")]),s._v("）起来。因为我的代码写到一半，不能将没有意义的代码提交到版本库，所以只能使用后者：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 推荐在暂存时添加描述信息,")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash push -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"更改了 xx"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout release/v0.1.0\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修复完 bug 回到原来的功能分支")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 恢复暂存")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash pop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"合并发布分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#合并发布分支"}},[s._v("#")]),s._v(" 合并发布分支")]),s._v(" "),t("p",[s._v("发布分支在经过几次迭代之后，稳定性已经足以合并到 master 了：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换到 master 分支")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 合并分支")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge release/v0.1.0\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打个 tag")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" tag -a v0.1.0 -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v0.1.0: 包含了角色模块和文章模块等功能更新"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 推送版本库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 推送 tags")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push --tags\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换到开发分支")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout develop\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge release/v0.1.0\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除发布分支")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -d release/v0.1.0\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除远程发布分支")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -d release/v0.1.0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("h2",{attrs:{id:"修复-bug"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修复-bug"}},[s._v("#")]),s._v(" 修复 bug")]),s._v(" "),t("p",[s._v("客户报了一个生产版本的 bug，这 bug 影响使用，我们必须马上修复这个 bug 并发个版：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换到 master 分支")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 bug 修复分支")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b bug/B20220212\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修复 bug 并提交")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"紧急修复xxxbug"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 合并到 master")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge bug/B20220212\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" tag -a v0.1.1 -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"紧急修复xxxbug"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 合并到开发分支, 因为开发分支同样有这个 bug")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout develop\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge bug/B20220212\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除 bug 分支")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -d bug/B20220212\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("p",[s._v("（完）")])])}),[],!1,null,null,null);n.default=e.exports}}]);