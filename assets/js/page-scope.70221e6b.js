(window.webpackJsonp=window.webpackJsonp||[]).push([[193],{1237:function(s,n,t){"use strict";t.r(n);var e=t(1),a=Object(e.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"scope"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scope"}},[s._v("#")]),s._v(" scope")]),s._v(" "),e("h2",{attrs:{id:"scope-是什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scope-是什么"}},[s._v("#")]),s._v(" scope 是什么")]),s._v(" "),e("ul",[e("li",[s._v("fixture 的一个参数")]),s._v(" "),e("li",[s._v("控制 fixture 的作用范围")]),s._v(" "),e("li",[s._v("有以下可选值：\n"),e("ul",[e("li",[s._v("function：默认，每个函数或方法都会调用")]),s._v(" "),e("li",[s._v("class：每个类会调用，一个类可以有多个方法")]),s._v(" "),e("li",[s._v("module：每一个 "),e("code",[s._v(".py")]),s._v(" 文件调用一次，该文件内又有多个 function 和 class")]),s._v(" "),e("li",[s._v("package/session：多个文件调用一次，可以跨 "),e("code",[s._v(".py")]),s._v(" 文件")])])])]),s._v(" "),e("h2",{attrs:{id:"scope-作用范围顺序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scope-作用范围顺序"}},[s._v("#")]),s._v(" scope 作用范围顺序")]),s._v(" "),e("p",[s._v("先来看个例子")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('import pytest\n\n@pytest.fixture(scope="function")\ndef login():\n    print("先进行登录")\n\ndef test_001(login):\n    print("执行用例001")\n\n@pytest.fixture(scope="class")\ndef login1():\n    print("先进行登录111")\n\n@pytest.mark.usefixtures("login3","login2","login4","login1","login")\nclass Test_Case():\n    def test_002(self):\n        print("执行用例002")\n\n    def test_003(self):\n        print("执行用例003")\n\n@pytest.fixture(scope="session")\ndef login2():\n    print("先进行登录222")\n\n@pytest.fixture(scope="package")\ndef login3():\n    print("先进行登录333")\n\n@pytest.fixture(scope="module")\ndef login4():\n    print("先进行登录444")\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br")])]),e("p",[s._v("执行结果：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(699),alt:"pytest"}})]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("总结")]),s._v(" "),e("ul",[e("li",[s._v("作用范围顺序：session > package > module > class > function")]),s._v(" "),e("li",[s._v("session/package、module 级别的 fixture 只执行了一次")]),s._v(" "),e("li",[s._v("session/package 可以结合 "),e("code",[s._v("conftest.py")]),s._v(" 文件使用")])])]),s._v(" "),e("p",[s._v("相关 "),e("code",[s._v("conftest.py")]),s._v(" 可参考 "),e("a",{attrs:{href:"test/frameworks/pytest/conftest.py"}},[s._v("conftest.py")])]),s._v(" "),e("p",[s._v("（完）")])])}),[],!1,null,null,null);n.default=a.exports},699:function(s,n,t){s.exports=t.p+"assets/img/22.70790e71.png"}}]);