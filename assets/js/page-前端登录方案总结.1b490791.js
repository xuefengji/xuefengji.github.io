(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{587:function(t,a,s){t.exports=s.p+"assets/img/oauth.4ade0971.jpg"},588:function(t,a,s){t.exports=s.p+"assets/img/wx-oauth.4214f5a3.png"},859:function(t,a,s){"use strict";s.r(a);var e=s(1),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"前端登录方案总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前端登录方案总结"}},[t._v("#")]),t._v(" 前端登录方案总结")]),t._v(" "),e("h2",{attrs:{id:"场景描述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#场景描述"}},[t._v("#")]),t._v(" 场景描述")]),t._v(" "),e("p",[t._v("登录是几乎每个网站都有的一个基本功能，本文介绍几种常用的登录方式和背后的原理：")]),t._v(" "),e("ul",[e("li",[t._v("Cookie + Session 登录")]),t._v(" "),e("li",[t._v("Token 登录")]),t._v(" "),e("li",[t._v("SSO 单点登录")]),t._v(" "),e("li",[t._v("OAuth 第三方登录")])]),t._v(" "),e("h2",{attrs:{id:"cookie-session-登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie-session-登录"}},[t._v("#")]),t._v(" Cookie + Session 登录")]),t._v(" "),e("p",[t._v("HTTP 是一种无状态的协议，客户端每次发送请求时，首先要和服务器端建立一个连接，在请求完成后又会断开这个连接。")]),t._v(" "),e("p",[t._v("这种方式可以节省传输时占用的连接资源，但同时也存在一个问题：每次请求都是独立的，服务器端无法判断本次请求和上一次请求是否来自同一个用户，进而也就无法判断用户的登录状态。")]),t._v(" "),e("p",[t._v("为了解决 HTTP 无状态的问题，就有了 Cookie。")]),t._v(" "),e("blockquote",[e("p",[t._v("Cookie 是服务器端发送给客户端的一段特殊信息，这些信息以文本的方式存放在客户端，客户端每次向服务器端发送请求时都会带上这些特殊信息。")])]),t._v(" "),e("p",[t._v("有了 Cookie 之后，服务器端就能够获取到客户端传递过来的信息了，如果需要对信息进行验证，还需要通过 Session。")]),t._v(" "),e("blockquote",[e("p",[t._v("客户端请求服务端，服务端会为这次请求开辟一块内存空间，这个便是 Session 对象。")])]),t._v(" "),e("p",[t._v("有了 Cookie 和 Session 之后，我们就可以进行登录认证了。")]),t._v(" "),e("h3",{attrs:{id:"实现流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实现流程"}},[t._v("#")]),t._v(" 实现流程")]),t._v(" "),e("p",[t._v("Cookie + Session 的登录方式是最传统的一种登录方式，现在仍然有大量的企业在使用。")]),t._v(" "),e("p",[t._v("用户首次登录时：")]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("svg",{attrs:{id:"SvgjsSvg1006",width:"708",height:"239",xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs"}},[e("defs",{attrs:{id:"SvgjsDefs1007"}},[e("marker",{attrs:{id:"SvgjsMarker1028",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1029",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1044",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1045",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1060",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1061",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1076",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1077",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1090",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1091",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1094",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1095",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})])]),e("g",{attrs:{id:"SvgjsG1008",transform:"translate(37,25)"}},[e("path",{attrs:{id:"SvgjsPath1009",d:"M 0 10C 0 -3.3333333333333335 20 -3.3333333333333335 20 10C 20 23.333333333333332 0 23.333333333333332 0 10Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1010"}},[e("text",{attrs:{id:"SvgjsText1011","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"-0.625",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1012"}},[e("path",{attrs:{id:"SvgjsPath1013",d:"M25 61L47 61L47 61L69 61",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1014"}},[e("path",{attrs:{id:"SvgjsPath1015",d:"M47 46L47 59.5L47 59.5L47 74",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1016"}},[e("path",{attrs:{id:"SvgjsPath1017",d:"M46 73L29 91",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1018"}},[e("path",{attrs:{id:"SvgjsPath1019",d:"M47 73L62 91",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1020",transform:"translate(151,33)"}},[e("path",{attrs:{id:"SvgjsPath1021",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1022"}},[e("text",{attrs:{id:"SvgjsText1023","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"17.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1024",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1025"}},[t._v("a.com/page-a")])])])])]),e("g",{attrs:{id:"SvgjsG1026"}},[e("path",{attrs:{id:"SvgjsPath1027",d:"M73 61L147.39999999999998 61",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1028)"}}),e("rect",{attrs:{id:"SvgjsRect1030",width:"26",height:"16",x:"97.19999999999999",y:"53",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1031","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"26px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"50.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1032",dy:"16",x:"110.19999999999999"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1033"}},[t._v("访问")])])])]),e("g",{attrs:{id:"SvgjsG1034",transform:"translate(365,33)"}},[e("path",{attrs:{id:"SvgjsPath1035",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1036"}},[e("text",{attrs:{id:"SvgjsText1037","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"8.875",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1038",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1039"}},[t._v("服务器")])]),e("tspan",{attrs:{id:"SvgjsTspan1040",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1041"}},[t._v("验证账号密码")])])])])]),e("g",{attrs:{id:"SvgjsG1042"}},[e("path",{attrs:{id:"SvgjsPath1043",d:"M260 61L361.4 61",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1044)"}}),e("rect",{attrs:{id:"SvgjsRect1046",width:"52",height:"16",x:"284.7",y:"53",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1047","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"52px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"50.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1048",dy:"16",x:"310.7"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1049"}},[t._v("输入密码")])])])]),e("g",{attrs:{id:"SvgjsG1050",transform:"translate(575,33)"}},[e("path",{attrs:{id:"SvgjsPath1051",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1052"}},[e("text",{attrs:{id:"SvgjsText1053","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"8.875",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1054",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1055"}},[t._v("创建并保存")])]),e("tspan",{attrs:{id:"SvgjsTspan1056",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1057"}},[t._v("SessionId")])])])])]),e("g",{attrs:{id:"SvgjsG1058"}},[e("path",{attrs:{id:"SvgjsPath1059",d:"M474 61L571.4 61",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1060)"}}),e("rect",{attrs:{id:"SvgjsRect1062",width:"52",height:"16",x:"496.70000000000005",y:"53",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1063","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"52px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"50.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1064",dy:"16",x:"522.7"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1065"}},[t._v("验证成功")])])])]),e("g",{attrs:{id:"SvgjsG1066",transform:"translate(365,158)"}},[e("path",{attrs:{id:"SvgjsPath1067",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1068"}},[e("text",{attrs:{id:"SvgjsText1069","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"8.875",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1070",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1071"}},[t._v("将 SessionId")])]),e("tspan",{attrs:{id:"SvgjsTspan1072",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1073"}},[t._v("写入 Cookie")])])])])]),e("g",{attrs:{id:"SvgjsG1074"}},[e("path",{attrs:{id:"SvgjsPath1075",d:"M629 90L629 186L476.6 186",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1076)"}}),e("rect",{attrs:{id:"SvgjsRect1078",width:"68",height:"16",x:"540",y:"178",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1079","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"68px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"175.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1080",dy:"16",x:"574"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1081"}},[t._v("Set-Cookie")])])])]),e("g",{attrs:{id:"SvgjsG1082",transform:"translate(151,158)"}},[e("path",{attrs:{id:"SvgjsPath1083",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1084"}},[e("text",{attrs:{id:"SvgjsText1085","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"17.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1086",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1087"}},[t._v("登录成功")])])])])]),e("g",{attrs:{id:"SvgjsG1088"}},[e("path",{attrs:{id:"SvgjsPath1089",d:"M364 186L312 186L312 186L262.6 186",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1090)"}})]),e("g",{attrs:{id:"SvgjsG1092"}},[e("path",{attrs:{id:"SvgjsPath1093",d:"M205 157L205 123.5L205 123.5L205 92.6",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1094)"}}),e("rect",{attrs:{id:"SvgjsRect1096",width:"52",height:"16",x:"179",y:"116.8",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1097","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"52px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"114.175",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1098",dy:"16",x:"205"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1099"}},[t._v("允许访问")])])])])]),t._v(" "),e("p",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("（Cookie + Session 实现流程 - 首次登录）")])]),t._v(" "),e("ol",[e("li",[t._v("用户访问 "),e("code",[t._v("a.com/page-a")]),t._v("，并输入密码登录。")]),t._v(" "),e("li",[t._v("服务器验证密码无误后，会创建 SessionId，并将它保存起来。")]),t._v(" "),e("li",[t._v("服务器端响应这个 HTTP 请求，并通过 Set-Cookie 头信息，将 SessionId 写入 Cookie 中。")])]),t._v(" "),e("blockquote",[e("p",[t._v("服务器端的 SessionId 可能存放在很多地方，例如：内存、文件、数据库等。")])]),t._v(" "),e("p",[t._v("第一次登录完成之后，后续的访问就可以直接使用 Cookie 进行身份验证了：")]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("svg",{attrs:{id:"SvgjsSvg1100",width:"718",height:"240",xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs"}},[e("defs",{attrs:{id:"SvgjsDefs1101"}},[e("marker",{attrs:{id:"SvgjsMarker1122",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1123",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1138",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1139",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1152",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1153",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1166",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1167",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1174",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1175",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})])]),e("g",{attrs:{id:"SvgjsG1102",transform:"translate(37,25)"}},[e("path",{attrs:{id:"SvgjsPath1103",d:"M 0 10C 0 -3.3333333333333335 20 -3.3333333333333335 20 10C 20 23.333333333333332 0 23.333333333333332 0 10Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1104"}},[e("text",{attrs:{id:"SvgjsText1105","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"-0.625",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1106"}},[e("path",{attrs:{id:"SvgjsPath1107",d:"M25 61L47 61L47 61L69 61",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1108"}},[e("path",{attrs:{id:"SvgjsPath1109",d:"M47 46L47 59.5L47 59.5L47 74",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1110"}},[e("path",{attrs:{id:"SvgjsPath1111",d:"M46 73L29 91",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1112"}},[e("path",{attrs:{id:"SvgjsPath1113",d:"M47 73L62 91",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1114",transform:"translate(151,33)"}},[e("path",{attrs:{id:"SvgjsPath1115",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1116"}},[e("text",{attrs:{id:"SvgjsText1117","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"17.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1118",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1119"}},[t._v("a.com/page-b")])])])])]),e("g",{attrs:{id:"SvgjsG1120"}},[e("path",{attrs:{id:"SvgjsPath1121",d:"M73 61L147.39999999999998 61",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1122)"}}),e("rect",{attrs:{id:"SvgjsRect1124",width:"26",height:"16",x:"97.19999999999999",y:"53",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1125","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"26px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"50.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1126",dy:"16",x:"110.19999999999999"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1127"}},[t._v("访问")])])])]),e("g",{attrs:{id:"SvgjsG1128",transform:"translate(385,33)"}},[e("path",{attrs:{id:"SvgjsPath1129",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1130"}},[e("text",{attrs:{id:"SvgjsText1131","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"8.875",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1132",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1133"}},[t._v("服务器")])]),e("tspan",{attrs:{id:"SvgjsTspan1134",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1135"}},[t._v("验证 Cookie")])])])])]),e("g",{attrs:{id:"SvgjsG1136"}},[e("path",{attrs:{id:"SvgjsPath1137",d:"M260 61L381.4 61",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1138)"}}),e("rect",{attrs:{id:"SvgjsRect1140",width:"73",height:"16",x:"284.2",y:"53",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1141","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"73px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"50.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1142",dy:"16",x:"320.7"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1143"}},[t._v("传递 Cookie")])])])]),e("g",{attrs:{id:"SvgjsG1144",transform:"translate(585,33)"}},[e("path",{attrs:{id:"SvgjsPath1145",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1146"}},[e("text",{attrs:{id:"SvgjsText1147","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"17.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1148",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1149"}},[t._v("踢回登录")])])])])]),e("g",{attrs:{id:"SvgjsG1150"}},[e("path",{attrs:{id:"SvgjsPath1151",d:"M494 61L581.4 61",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1152)"}}),e("rect",{attrs:{id:"SvgjsRect1154",width:"26",height:"16",x:"524.7",y:"53",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1155","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"26px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"50.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1156",dy:"16",x:"537.7"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1157"}},[t._v("无效")])])])]),e("g",{attrs:{id:"SvgjsG1158",transform:"translate(385,159)"}},[e("path",{attrs:{id:"SvgjsPath1159",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1160"}},[e("text",{attrs:{id:"SvgjsText1161","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"17.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1162",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1163"}},[t._v("登录成功")])])])])]),e("g",{attrs:{id:"SvgjsG1164"}},[e("path",{attrs:{id:"SvgjsPath1165",d:"M439 90L439 124L439 124L439 155.4",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1166)"}}),e("rect",{attrs:{id:"SvgjsRect1168",width:"26",height:"16",x:"426",y:"114.7",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1169","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"26px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"112.075",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1170",dy:"16",x:"439"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1171"}},[t._v("有效")])])])]),e("g",{attrs:{id:"SvgjsG1172"}},[e("path",{attrs:{id:"SvgjsPath1173",d:"M384 187L205 187L205 92.6",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1174)"}}),e("rect",{attrs:{id:"SvgjsRect1176",width:"52",height:"16",x:"221.3",y:"179",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1177","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"52px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"176.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1178",dy:"16",x:"247.3"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1179"}},[t._v("允许访问")])])])])]),t._v(" "),e("p",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("（Cookie + Session 实现流程 - 身份验证）")])]),t._v(" "),e("ol",[e("li",[t._v("用户访问 "),e("code",[t._v("a.com/page-b")]),t._v(" 页面时，会自动带上第一次登录时写入的 Cookie。")]),t._v(" "),e("li",[t._v("服务器端比对 Cookie 中的 SessionId 和保存在服务器端的 SessionId 是否一致。")]),t._v(" "),e("li",[t._v("如果一致，则身份验证成功。")])]),t._v(" "),e("h3",{attrs:{id:"存在的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#存在的问题"}},[t._v("#")]),t._v(" 存在的问题")]),t._v(" "),e("p",[t._v("虽然使用 Cookie + Session 的方式可以完成登录验证，但仍然存在一些问题：")]),t._v(" "),e("ul",[e("li",[t._v("由于服务器端需要对接大量的客户端，也就需要存放大量的 SessionId，这样会导致服务器压力过大。")]),t._v(" "),e("li",[t._v("如果服务器端是一个集群，为了同步登录态，需要将 SessionId 同步到每一台机器上，无形中增加了服务器端维护成本。")]),t._v(" "),e("li",[t._v("由于 SessionId 存放在 Cookie 中，所以无法避免 CSRF 攻击。")])]),t._v(" "),e("h2",{attrs:{id:"token-登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#token-登录"}},[t._v("#")]),t._v(" Token 登录")]),t._v(" "),e("p",[t._v("为了解决 Session + Cookie 机制暴露出的诸多问题，我们可以使用 Token 的登录方式。")]),t._v(" "),e("blockquote",[e("p",[t._v("Token 是服务端生成的一串字符串，以作为客户端请求的一个令牌。当第一次登录后，服务器会生成一个 Token 并返回给客户端，客户端后续访问时，只需带上这个 Token 即可完成身份认证。")])]),t._v(" "),e("h3",{attrs:{id:"token-机制实现流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#token-机制实现流程"}},[t._v("#")]),t._v(" Token 机制实现流程")]),t._v(" "),e("p",[t._v("用户首次登录时：")]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("svg",{attrs:{id:"SvgjsSvg1180",width:"518",height:"240",xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs"}},[e("defs",{attrs:{id:"SvgjsDefs1181"}},[e("marker",{attrs:{id:"SvgjsMarker1202",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1203",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1219",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1220",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1233",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1234",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1247",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1248",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1255",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1256",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})])]),e("g",{attrs:{id:"SvgjsG1182",transform:"translate(37,25)"}},[e("path",{attrs:{id:"SvgjsPath1183",d:"M 0 10C 0 -3.3333333333333335 20 -3.3333333333333335 20 10C 20 23.333333333333332 0 23.333333333333332 0 10Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1184"}},[e("text",{attrs:{id:"SvgjsText1185","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"-0.625",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1186"}},[e("path",{attrs:{id:"SvgjsPath1187",d:"M25 61L47 61L47 61L69 61",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1188"}},[e("path",{attrs:{id:"SvgjsPath1189",d:"M47 46L47 59.5L47 59.5L47 74",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1190"}},[e("path",{attrs:{id:"SvgjsPath1191",d:"M46 73L29 91",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1192"}},[e("path",{attrs:{id:"SvgjsPath1193",d:"M47 73L62 91",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1194",transform:"translate(151,33)"}},[e("path",{attrs:{id:"SvgjsPath1195",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1196"}},[e("text",{attrs:{id:"SvgjsText1197","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"17.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1198",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1199"}},[t._v("a.com/page-a")])])])])]),e("g",{attrs:{id:"SvgjsG1200"}},[e("path",{attrs:{id:"SvgjsPath1201",d:"M73 61L147.39999999999998 61",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1202)"}}),e("rect",{attrs:{id:"SvgjsRect1204",width:"26",height:"16",x:"97.19999999999999",y:"53",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1205","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"26px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"50.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1206",dy:"16",x:"110.19999999999999"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1207"}},[t._v("访问")])])])]),e("g",{attrs:{id:"SvgjsG1208",transform:"translate(385,33)"}},[e("path",{attrs:{id:"SvgjsPath1209",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1210"}},[e("text",{attrs:{id:"SvgjsText1211","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"8.875",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1212",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1213"}},[t._v("服务器")]),e("tspan",{staticStyle:{"font-size":"inherit"},attrs:{id:"SvgjsTspan1214"}},[t._v("验证")])]),e("tspan",{attrs:{id:"SvgjsTspan1215",dy:"16",x:"54"}},[e("tspan",{staticStyle:{"font-size":"inherit"},attrs:{id:"SvgjsTspan1216"}},[t._v("账号密码")])])])])]),e("g",{attrs:{id:"SvgjsG1217"}},[e("path",{attrs:{id:"SvgjsPath1218",d:"M260 61L381.4 61",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1219)"}}),e("rect",{attrs:{id:"SvgjsRect1221",width:"52",height:"16",x:"294.7",y:"53",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1222","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"52px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"50.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1223",dy:"16",x:"320.7"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1224"}},[t._v("输入密码")])])])]),e("g",{attrs:{id:"SvgjsG1225",transform:"translate(385,159)"}},[e("path",{attrs:{id:"SvgjsPath1226",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1227"}},[e("text",{attrs:{id:"SvgjsText1228","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"17.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1229",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1230"}},[t._v("生成 token")])])])])]),e("g",{attrs:{id:"SvgjsG1231"}},[e("path",{attrs:{id:"SvgjsPath1232",d:"M439 90L439 124L439 124L439 155.4",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1233)"}}),e("rect",{attrs:{id:"SvgjsRect1235",width:"52",height:"16",x:"413",y:"114.7",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1236","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"52px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"112.075",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1237",dy:"16",x:"439"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1238"}},[t._v("验证成功")])])])]),e("g",{attrs:{id:"SvgjsG1239",transform:"translate(151,159)"}},[e("path",{attrs:{id:"SvgjsPath1240",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1241"}},[e("text",{attrs:{id:"SvgjsText1242","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"17.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1243",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1244"}},[t._v("登录成功")])])])])]),e("g",{attrs:{id:"SvgjsG1245"}},[e("path",{attrs:{id:"SvgjsPath1246",d:"M384 187L322 187L322 187L262.6 187",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1247)"}}),e("rect",{attrs:{id:"SvgjsRect1249",width:"65",height:"16",x:"290.8",y:"179",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1250","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"65px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"176.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1251",dy:"16",x:"323.3"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1252"}},[t._v("返回客户端")])])])]),e("g",{attrs:{id:"SvgjsG1253"}},[e("path",{attrs:{id:"SvgjsPath1254",d:"M205 158L205 124L205 124L205 92.6",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1255)"}}),e("rect",{attrs:{id:"SvgjsRect1257",width:"52",height:"16",x:"179",y:"117.3",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1258","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"52px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"114.675",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1259",dy:"16",x:"205"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1260"}},[t._v("允许访问")])])])])]),t._v(" "),e("p",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("（Token 机制实现流程 - 首次登录）")])]),t._v(" "),e("ol",[e("li",[t._v("用户输入账号密码，并点击登录。")]),t._v(" "),e("li",[t._v("服务器端验证账号密码无误，创建 Token。")]),t._v(" "),e("li",[t._v("服务器端将 Token 返回给客户端，由"),e("strong",[t._v("客户端自由保存")]),t._v("。")])]),t._v(" "),e("p",[t._v("后续页面访问时：")]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("svg",{attrs:{id:"SvgjsSvg1261",width:"707",height:"240",xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs"}},[e("defs",{attrs:{id:"SvgjsDefs1262"}},[e("marker",{attrs:{id:"SvgjsMarker1283",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1284",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1299",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1300",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1313",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1314",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1327",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1328",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1335",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1336",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})])]),e("g",{attrs:{id:"SvgjsG1263",transform:"translate(37,25)"}},[e("path",{attrs:{id:"SvgjsPath1264",d:"M 0 10C 0 -3.3333333333333335 20 -3.3333333333333335 20 10C 20 23.333333333333332 0 23.333333333333332 0 10Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1265"}},[e("text",{attrs:{id:"SvgjsText1266","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"-0.625",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1267"}},[e("path",{attrs:{id:"SvgjsPath1268",d:"M25 61L47 61L47 61L69 61",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1269"}},[e("path",{attrs:{id:"SvgjsPath1270",d:"M47 46L47 59.5L47 59.5L47 74",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1271"}},[e("path",{attrs:{id:"SvgjsPath1272",d:"M46 73L29 91",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1273"}},[e("path",{attrs:{id:"SvgjsPath1274",d:"M47 73L62 91",stroke:"#323232","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1275",transform:"translate(151,33)"}},[e("path",{attrs:{id:"SvgjsPath1276",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1277"}},[e("text",{attrs:{id:"SvgjsText1278","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"17.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1279",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1280"}},[t._v("a.com/page-b")])])])])]),e("g",{attrs:{id:"SvgjsG1281"}},[e("path",{attrs:{id:"SvgjsPath1282",d:"M73 61L147.39999999999998 61",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1283)"}}),e("rect",{attrs:{id:"SvgjsRect1285",width:"26",height:"16",x:"97.19999999999999",y:"53",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1286","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"26px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"50.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1287",dy:"16",x:"110.19999999999999"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1288"}},[t._v("访问")])])])]),e("g",{attrs:{id:"SvgjsG1289",transform:"translate(385,33)"}},[e("path",{attrs:{id:"SvgjsPath1290",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1291"}},[e("text",{attrs:{id:"SvgjsText1292","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"8.875",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1293",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1294"}},[t._v("服务器")])]),e("tspan",{attrs:{id:"SvgjsTspan1295",dy:"16",x:"54"}},[e("tspan",{staticStyle:{"font-size":"inherit"},attrs:{id:"SvgjsTspan1296"}},[t._v("验证 token")])])])])]),e("g",{attrs:{id:"SvgjsG1297"}},[e("path",{attrs:{id:"SvgjsPath1298",d:"M260 61L381.4 61",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1299)"}}),e("rect",{attrs:{id:"SvgjsRect1301",width:"65",height:"16",x:"288.2",y:"53",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1302","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"65px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"50.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1303",dy:"16",x:"320.7"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1304"}},[t._v("传递 token")])])])]),e("g",{attrs:{id:"SvgjsG1305",transform:"translate(385,159)"}},[e("path",{attrs:{id:"SvgjsPath1306",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1307"}},[e("text",{attrs:{id:"SvgjsText1308","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"17.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1309",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1310"}},[t._v("登录成功")])])])])]),e("g",{attrs:{id:"SvgjsG1311"}},[e("path",{attrs:{id:"SvgjsPath1312",d:"M439 90L439 124L439 124L439 155.4",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1313)"}}),e("rect",{attrs:{id:"SvgjsRect1315",width:"26",height:"16",x:"426",y:"114.7",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1316","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"26px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"112.075",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1317",dy:"16",x:"439"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1318"}},[t._v("有效")])])])]),e("g",{attrs:{id:"SvgjsG1319",transform:"translate(574,33)"}},[e("path",{attrs:{id:"SvgjsPath1320",d:"M 0 0L 108 0L 108 56L 0 56Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffffff"}}),e("g",{attrs:{id:"SvgjsG1321"}},[e("text",{attrs:{id:"SvgjsText1322","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"88px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"17.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1323",dy:"16",x:"54"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1324"}},[t._v("踢回登录")])])])])]),e("g",{attrs:{id:"SvgjsG1325"}},[e("path",{attrs:{id:"SvgjsPath1326",d:"M494 61L533.5 61L533.5 61L570.4 61",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1327)"}}),e("rect",{attrs:{id:"SvgjsRect1329",width:"26",height:"16",x:"519.2",y:"53",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1330","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"26px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"50.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1331",dy:"16",x:"532.2"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1332"}},[t._v("无效")])])])]),e("g",{attrs:{id:"SvgjsG1333"}},[e("path",{attrs:{id:"SvgjsPath1334",d:"M384 187L205 187L205 92.6",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1335)"}}),e("rect",{attrs:{id:"SvgjsRect1337",width:"52",height:"16",x:"221.3",y:"179",fill:"#ffffff"}}),e("text",{attrs:{id:"SvgjsText1338","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"52px",fill:"#323232","font-weight":"400",align:"top",lineHeight:"16px",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"176.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1339",dy:"16",x:"247.3"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1340"}},[t._v("允许访问")])])])])]),t._v(" "),e("p",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("（Token 机制实现流程 - 身份验证）")])]),t._v(" "),e("ol",[e("li",[t._v("用户访问 "),e("code",[t._v("a.com/pageB")]),t._v(" 时，带上第一次登录时获取的 Token。")]),t._v(" "),e("li",[t._v("服务器端验证 Token ，有效则身份验证成功。")])]),t._v(" "),e("h3",{attrs:{id:"token-机制的特点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#token-机制的特点"}},[t._v("#")]),t._v(" Token 机制的特点")]),t._v(" "),e("p",[t._v("根据上面的案例，我们可以分析出 Token 的优缺点：")]),t._v(" "),e("ul",[e("li",[t._v("服务器端不需要存放 Token，所以不会对服务器端造成压力，即使是服务器集群，也不需要增加维护成本。")]),t._v(" "),e("li",[t._v("Token 可以存放在前端任何地方，可以不用保存在 Cookie 中，提升了页面的安全性。")]),t._v(" "),e("li",[t._v("Token 下发之后，只要在生效时间之内，就一直有效，如果服务器端想收回此 Token 的权限，并不容易。")])]),t._v(" "),e("h3",{attrs:{id:"token-的生成方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#token-的生成方式"}},[t._v("#")]),t._v(" Token 的生成方式")]),t._v(" "),e("p",[t._v("最常见的 Token 生成方式是使用 JWT（Json Web Token），它是一种简洁的，自包含的方法用于通信双方之间以 JSON 对象的形式安全的传递信息。")]),t._v(" "),e("p",[t._v("前面说到，使用 Token 后，服务器端并不会存储 Token，那怎么判断客户端发过来的 Token 是合法有效的呢？")]),t._v(" "),e("p",[t._v("答案其实就在 Token 字符串中，其实 Token 并不是一串杂乱无章的字符串，而是通过多种算法拼接组合而成的字符串，我们来具体分析一下。")]),t._v(" "),e("p",[t._v("JWT 算法主要分为 3 个部分：header（头信息），playload（消息体），signature（签名）。")]),t._v(" "),e("p",[t._v("header 部分指定了该 JWT 使用的签名算法：")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("header "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"alg":"HS256","typ":"JWT"}\'')]),t._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "HS256" 表示使用了 HMAC-SHA256 来生成签名。')]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("playload 部分表明了 JWT 的意图：")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("payload "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"loggedInAs":"admin","iat":1422779638}\'')]),t._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// iat 表示令牌生成的时间")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("signature 部分为 JWT 的签名，主要为了让 JWT 不能被随意篡改，签名的方法分为两个步骤：")]),t._v(" "),e("ul",[e("li",[t._v("输入 "),e("code",[t._v("base64url")]),t._v(" 编码的 header 部分、"),e("code",[t._v(".")]),t._v("、"),e("code",[t._v("base64url")]),t._v(" 编码的 playload 部分，输出 unsignedToken。")]),t._v(" "),e("li",[t._v("输入服务器端私钥、unsignedToken，输出 signature 签名。")])]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" base64Header "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeBase64")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("header"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" base64Payload "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeBase64")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("payload"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" unsignedToken "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token template-string"}},[e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("base64Header"),e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("base64Payload"),e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" key "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'服务器私钥'")]),t._v("\n\nsignature "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HMAC")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unsignedToken"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("p",[t._v("最后的 Token 计算如下：")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" base64Header "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeBase64")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("header"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" base64Payload "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeBase64")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("payload"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" base64Signature "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeBase64")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("signature"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntoken "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token template-string"}},[e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("base64Header"),e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("base64Payload"),e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("base64Signature"),e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("p",[t._v("服务器在判断 Token 时：")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("base64Header"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" base64Payload"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" base64Signature"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" token"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" signature1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("decodeBase64")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("base64Signature"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" unsignedToken "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token template-string"}},[e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("base64Header"),e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("base64Payload"),e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" signature2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HMAC")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'服务器私钥'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unsignedToken"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("signature1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" signature2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'签名验证成功，token 没有被篡改'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" payload "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("decodeBase64")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("base64Payload"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" payload"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("iat "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'token 有效期'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'token 有效'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br")])]),e("p",[t._v("有了 Token 之后，登录方式已经变得非常高效。")]),t._v(" "),e("h2",{attrs:{id:"sso-单点登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sso-单点登录"}},[t._v("#")]),t._v(" SSO 单点登录")]),t._v(" "),e("p",[t._v("单点登录指的是在公司内部搭建一个公共的认证中心，公司下的所有产品的登录都可以在认证中心里完成，一个产品在认证中心登录后，再去访问另一个产品，可以不用再次登录，即可获取登录状态。")]),t._v(" "),e("h3",{attrs:{id:"sso-机制实现流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sso-机制实现流程"}},[t._v("#")]),t._v(" SSO 机制实现流程")]),t._v(" "),e("p",[t._v("用户首次访问时，需要在认证中心登录：")]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("svg",{attrs:{id:"SvgjsSvg1006",width:"899.5",height:"566",xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs"}},[e("defs",{attrs:{id:"SvgjsDefs1007"}},[e("marker",{attrs:{id:"SvgjsMarker1050",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1051",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1066",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1067",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1076",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1077",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1092",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1093",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1108",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1109",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1118",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1119",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1128",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1129",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1144",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1145",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1148",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1149",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1152",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1153",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1174",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1175",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})])]),e("g",{attrs:{id:"SvgjsG1008"}},[e("path",{attrs:{id:"SvgjsPath1009",d:"M91 68L91 541","stroke-dasharray":"8,5",stroke:"#e0e0e0","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1010"}},[e("path",{attrs:{id:"SvgjsPath1011",d:"M390 67L390 531","stroke-dasharray":"8,5",stroke:"#e0e0e0","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1012"}},[e("path",{attrs:{id:"SvgjsPath1013",d:"M689 68L689 537.5","stroke-dasharray":"8,5",stroke:"#e0e0e0","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1014",transform:"translate(623,25)"}},[e("path",{attrs:{id:"SvgjsPath1015",d:"M 0 0L 132 0L 132 42L 0 42Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffe0b2"}}),e("g",{attrs:{id:"SvgjsG1016"}},[e("text",{attrs:{id:"SvgjsText1017","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"112px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"10.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1018",dy:"16",x:"66"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1019"}},[t._v("认证中心(sso.com)")])])])])]),e("g",{attrs:{id:"SvgjsG1020",transform:"translate(324,25)"}},[e("path",{attrs:{id:"SvgjsPath1021",d:"M 0 0L 132 0L 132 42L 0 42Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#fff9c4"}}),e("g",{attrs:{id:"SvgjsG1022"}},[e("text",{attrs:{id:"SvgjsText1023","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"112px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"10.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1024",dy:"16",x:"66"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1025"}},[t._v("系统 A(a.com)")])])])])]),e("g",{attrs:{id:"SvgjsG1026",transform:"translate(25,25)"}},[e("path",{attrs:{id:"SvgjsPath1027",d:"M 0 0L 132 0L 132 42L 0 42Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#bbdefb"}}),e("g",{attrs:{id:"SvgjsG1028"}},[e("text",{attrs:{id:"SvgjsText1029","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"112px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"10.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1030",dy:"16",x:"66"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1031"}},[t._v("浏览器")])])])])]),e("g",{attrs:{id:"SvgjsG1032",transform:"translate(81,114.5)"}},[e("path",{attrs:{id:"SvgjsPath1033",d:"M 0 0L 20 0L 20 75L 0 75Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#bbdefb"}}),e("g",{attrs:{id:"SvgjsG1034"}},[e("text",{attrs:{id:"SvgjsText1035","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"26.875",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1036",transform:"translate(380,114.5)"}},[e("path",{attrs:{id:"SvgjsPath1037",d:"M 0 0L 20 0L 20 75L 0 75Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#fff9c4"}}),e("g",{attrs:{id:"SvgjsG1038"}},[e("text",{attrs:{id:"SvgjsText1039","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"26.875",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1040",transform:"translate(81,251.5)"}},[e("path",{attrs:{id:"SvgjsPath1041",d:"M 0 0L 20 0L 20 259L 0 259Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#bbdefb"}}),e("g",{attrs:{id:"SvgjsG1042"}},[e("text",{attrs:{id:"SvgjsText1043","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"118.875",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1044",transform:"translate(679,251.5)"}},[e("path",{attrs:{id:"SvgjsPath1045",d:"M 0 0L 20 0L 20 259L 0 259Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffe0b2"}}),e("g",{attrs:{id:"SvgjsG1046"}},[e("text",{attrs:{id:"SvgjsText1047","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"118.875",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1048"}},[e("path",{attrs:{id:"SvgjsPath1049",d:"M102 114.84452575685384L240.42758649849338 114.84452575685384L240.42758649849338 114.84452575685384L376.4 114.84452575685384",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1050)"}})]),e("g",{attrs:{id:"SvgjsG1052",transform:"translate(181.5,84)"}},[e("path",{attrs:{id:"SvgjsPath1053",d:"M 0 0L 119 0L 119 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1054"}},[e("text",{attrs:{id:"SvgjsText1055","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"119px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1056",dy:"16",x:"59.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1057"}},[t._v("访问受保护页面")])])])])]),e("g",{attrs:{id:"SvgjsG1058",transform:"translate(144.5,119)"}},[e("path",{attrs:{id:"SvgjsPath1059",d:"M 0 0L 193 0L 193 22L 0 22Z",stroke:"none","fill-opacity":"1",fill:"#e0e0e0"}}),e("g",{attrs:{id:"SvgjsG1060"}},[e("text",{attrs:{id:"SvgjsText1061","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"173px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"0.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1062",dy:"16",x:"96.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1063"}},[t._v("www.a.com/page-a")])])])])]),e("g",{attrs:{id:"SvgjsG1064"}},[e("path",{attrs:{id:"SvgjsPath1065",d:"M400.9860544094445 117.1120754343518C 479 123 472 137 403.4537995365141 150.98448596190178",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1066)"}})]),e("g",{attrs:{id:"SvgjsG1068",transform:"translate(435.5,115)"}},[e("path",{attrs:{id:"SvgjsPath1069",d:"M 0 0L 119 0L 119 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1070"}},[e("text",{attrs:{id:"SvgjsText1071","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"119px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1072",dy:"16",x:"59.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1073"}},[t._v("验证未登录")])])])])]),e("g",{attrs:{id:"SvgjsG1074"}},[e("path",{attrs:{id:"SvgjsPath1075",d:"M379 185.22339182284404L104.60000000000002 185.22339182284404",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1076)"}})]),e("g",{attrs:{id:"SvgjsG1078",transform:"translate(181.5,159)"}},[e("path",{attrs:{id:"SvgjsPath1079",d:"M 0 0L 119 0L 119 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1080"}},[e("text",{attrs:{id:"SvgjsText1081","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"119px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1082",dy:"16",x:"59.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1083"}},[t._v("302 重定向")])])])])]),e("g",{attrs:{id:"SvgjsG1084",transform:"translate(103,193)"}},[e("path",{attrs:{id:"SvgjsPath1085",d:"M 0 0L 332.5 0L 332.5 22L 0 22Z",stroke:"none","fill-opacity":"1",fill:"#e0e0e0"}}),e("g",{attrs:{id:"SvgjsG1086"}},[e("text",{attrs:{id:"SvgjsText1087","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"313px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"0.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1088",dy:"16",x:"166.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1089"}},[t._v("www.sso.com/login?redirect=www.a.com/page-a")])])])])]),e("g",{attrs:{id:"SvgjsG1090"}},[e("path",{attrs:{id:"SvgjsPath1091",d:"M102 253.84729635533387L675.4 253.84729635533387",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1092)"}})]),e("g",{attrs:{id:"SvgjsG1094",transform:"translate(307.25,226)"}},[e("path",{attrs:{id:"SvgjsPath1095",d:"M 0 0L 119 0L 119 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1096"}},[e("text",{attrs:{id:"SvgjsText1097","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"119px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1098",dy:"16",x:"59.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1099"}},[t._v("访问 www.sso.com")])])])])]),e("g",{attrs:{id:"SvgjsG1100",transform:"translate(205.25,260)"}},[e("path",{attrs:{id:"SvgjsPath1101",d:"M 0 0L 348.75 0L 348.75 22L 0 22Z",stroke:"none","fill-opacity":"1",fill:"#e0e0e0"}}),e("g",{attrs:{id:"SvgjsG1102"}},[e("text",{attrs:{id:"SvgjsText1103","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"329px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"0.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1104",dy:"16",x:"174.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1105"}},[t._v("www.sso.com/login?redirect=www.a.com/page-a")])])])])]),e("g",{attrs:{id:"SvgjsG1106"}},[e("path",{attrs:{id:"SvgjsPath1107",d:"M699.9377795270102 252.28300998928887C 771 263 716.6447150240459 298 702.4035464371821 297.32702444614347",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1108)"}})]),e("g",{attrs:{id:"SvgjsG1110",transform:"translate(714.5,256)"}},[e("path",{attrs:{id:"SvgjsPath1111",d:"M 0 0L 119 0L 119 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1112"}},[e("text",{attrs:{id:"SvgjsText1113","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"119px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1114",dy:"16",x:"59.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1115"}},[t._v("验证未登录")])])])])]),e("g",{attrs:{id:"SvgjsG1116"}},[e("path",{attrs:{id:"SvgjsPath1117",d:"M678 318L104.60000000000002 318",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1118)"}})]),e("g",{attrs:{id:"SvgjsG1120",transform:"translate(307.25,292.5)"}},[e("path",{attrs:{id:"SvgjsPath1121",d:"M 0 0L 119 0L 119 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1122"}},[e("text",{attrs:{id:"SvgjsText1123","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"119px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1124",dy:"16",x:"59.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1125"}},[t._v("展示登录 form")])])])])]),e("g",{attrs:{id:"SvgjsG1126"}},[e("path",{attrs:{id:"SvgjsPath1127",d:"M102 370L675.4 370",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1128)"}})]),e("g",{attrs:{id:"SvgjsG1130",transform:"translate(307.25,341)"}},[e("path",{attrs:{id:"SvgjsPath1131",d:"M 0 0L 119 0L 119 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1132"}},[e("text",{attrs:{id:"SvgjsText1133","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"119px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1134",dy:"16",x:"59.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1135"}},[t._v("POST 用户名+密码")])])])])]),e("g",{attrs:{id:"SvgjsG1136",transform:"translate(205.25,376)"}},[e("path",{attrs:{id:"SvgjsPath1137",d:"M 0 0L 348.75 0L 348.75 22L 0 22Z",stroke:"none","fill-opacity":"1",fill:"#e0e0e0"}}),e("g",{attrs:{id:"SvgjsG1138"}},[e("text",{attrs:{id:"SvgjsText1139","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"329px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"0.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1140",dy:"16",x:"174.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1141"}},[t._v("www.sso.com/login?redirect=www.a.com/page-a")])])])])]),e("g",{attrs:{id:"SvgjsG1142"}},[e("path",{attrs:{id:"SvgjsPath1143",d:"M699.9615239476408 369.27472112789735C 762 374 741 401 702.4423198398267 403.9462286204612",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1144)"}})]),e("g",{attrs:{id:"SvgjsG1146"}},[e("path",{attrs:{id:"SvgjsPath1147",d:"M699.9528888156635 410.30331980644746C 770 417 731 444 702.473730724737 444.05491013548044",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1148)"}})]),e("g",{attrs:{id:"SvgjsG1150"}},[e("path",{attrs:{id:"SvgjsPath1151",d:"M699.9528755086391 450.3033616077157C 777 458 722 482 702.449762779039 482.97085629363175",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1152)"}})]),e("g",{attrs:{id:"SvgjsG1154",transform:"translate(744.5,372)"}},[e("path",{attrs:{id:"SvgjsPath1155",d:"M 0 0L 130.5 0L 130.5 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1156"}},[e("text",{attrs:{id:"SvgjsText1157","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"131px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1158",dy:"16",x:"65.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1159"}},[t._v("验证用户名和密码成功")])])])])]),e("g",{attrs:{id:"SvgjsG1160",transform:"translate(723.5,411)"}},[e("path",{attrs:{id:"SvgjsPath1161",d:"M 0 0L 119 0L 119 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1162"}},[e("text",{attrs:{id:"SvgjsText1163","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"119px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1164",dy:"16",x:"59.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1165"}},[t._v("创建全局会话")])])])])]),e("g",{attrs:{id:"SvgjsG1166",transform:"translate(725,446)"}},[e("path",{attrs:{id:"SvgjsPath1167",d:"M 0 0L 103 0L 103 36L 0 36Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1168"}},[e("text",{attrs:{id:"SvgjsText1169","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"103px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"7.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1170",dy:"16",x:"51.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1171"}},[t._v("创建 ticket")])])])])]),e("g",{attrs:{id:"SvgjsG1172"}},[e("path",{attrs:{id:"SvgjsPath1173",d:"M678 486L104.60000000000002 486",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1174)"}})]),e("g",{attrs:{id:"SvgjsG1176",transform:"translate(307.25,456)"}},[e("path",{attrs:{id:"SvgjsPath1177",d:"M 0 0L 119 0L 119 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1178"}},[e("text",{attrs:{id:"SvgjsText1179","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"119px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1180",dy:"16",x:"59.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1181"}},[t._v("302 重定向")])])])])]),e("g",{attrs:{id:"SvgjsG1182",transform:"translate(205.25,492)"}},[e("path",{attrs:{id:"SvgjsPath1183",d:"M 0 0L 348.75 0L 348.75 45.5L 0 45.5Z",stroke:"none","fill-opacity":"1",fill:"#e0e0e0"}}),e("g",{attrs:{id:"SvgjsG1184"}},[e("text",{attrs:{id:"SvgjsText1185","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"329px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"3.625",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1186",dy:"16",x:"174.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1187"}},[t._v("Set cookie: ssoid=1234, sso.com")])]),e("tspan",{attrs:{id:"SvgjsTspan1188",dy:"16",x:"174.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1189"}},[t._v("redirect 目标: www.a.com/page-a?ticket=T123")])])])])])]),t._v(" "),e("p",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("（SSO 机制实现流程 - 首次访问）")])]),t._v(" "),e("ol",[e("li",[t._v("用户访问网站 "),e("code",[t._v("a.com")]),t._v(" 下的 page-a 页面。")]),t._v(" "),e("li",[t._v("由于没有登录，则会重定向到认证中心，并带上回调地址 "),e("code",[t._v("www.sso.com/login?redirect=www.a.com/page-a")]),t._v("，以便登录后直接进入对应页面。")]),t._v(" "),e("li",[t._v("用户在认证中心输入账号密码，提交登录。")]),t._v(" "),e("li",[t._v("认证中心验证账号密码有效，然后重定向  "),e("code",[t._v("a.com?ticket=123")]),t._v(" 带上授权码 ticket，并将认证中心 "),e("code",[t._v("sso.com")]),t._v(" 的登录态写入 Cookie。")]),t._v(" "),e("li",[t._v("在 "),e("code",[t._v("a.com")]),t._v(" 服务器中，拿着 ticket 向认证中心确认，授权码 ticket 真实有效。")]),t._v(" "),e("li",[t._v("验证成功后，服务器将登录信息写入 Cookie（此时客户端有 2 个 Cookie 分别存有 "),e("code",[t._v("a.com")]),t._v(" 和 "),e("code",[t._v("sso.com")]),t._v(" 的登录态）。")])]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("认证中心登录完成之后，继续访问 "),e("code",[t._v("a.com")]),t._v(" 下的其他页面：")]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("svg",{attrs:{id:"SvgjsSvg1006",width:"840",height:"566",xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs"}},[e("defs",{attrs:{id:"SvgjsDefs1007"}},[e("marker",{attrs:{id:"SvgjsMarker1066",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1067",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1070",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1071",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1080",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1081",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1090",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1091",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1100",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1101",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1110",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1111",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1120",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1121",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1130",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1131",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1140",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1141",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1156",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1157",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1166",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1167",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})])]),e("g",{attrs:{id:"SvgjsG1008"}},[e("path",{attrs:{id:"SvgjsPath1009",d:"M91 68L91 541","stroke-dasharray":"8,5",stroke:"#e0e0e0","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1010"}},[e("path",{attrs:{id:"SvgjsPath1011",d:"M390 67L390 541","stroke-dasharray":"8,5",stroke:"#e0e0e0","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1012"}},[e("path",{attrs:{id:"SvgjsPath1013",d:"M689 68L689 537.5","stroke-dasharray":"8,5",stroke:"#e0e0e0","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1014",transform:"translate(623,25)"}},[e("path",{attrs:{id:"SvgjsPath1015",d:"M 0 0L 132 0L 132 42L 0 42Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffe0b2"}}),e("g",{attrs:{id:"SvgjsG1016"}},[e("text",{attrs:{id:"SvgjsText1017","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"112px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"10.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1018",dy:"16",x:"66"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1019"}},[t._v("认证中心(sso.com)")])])])])]),e("g",{attrs:{id:"SvgjsG1020",transform:"translate(324,25)"}},[e("path",{attrs:{id:"SvgjsPath1021",d:"M 0 0L 132 0L 132 42L 0 42Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#fff9c4"}}),e("g",{attrs:{id:"SvgjsG1022"}},[e("text",{attrs:{id:"SvgjsText1023","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"112px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"10.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1024",dy:"16",x:"66"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1025"}},[t._v("系统 A(a.com)")])])])])]),e("g",{attrs:{id:"SvgjsG1026",transform:"translate(25,25)"}},[e("path",{attrs:{id:"SvgjsPath1027",d:"M 0 0L 132 0L 132 42L 0 42Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#bbdefb"}}),e("g",{attrs:{id:"SvgjsG1028"}},[e("text",{attrs:{id:"SvgjsText1029","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"112px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"10.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1030",dy:"16",x:"66"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1031"}},[t._v("浏览器")])])])])]),e("g",{attrs:{id:"SvgjsG1032",transform:"translate(81,114.5)"}},[e("path",{attrs:{id:"SvgjsPath1033",d:"M 0 0L 20 0L 20 257.5L 0 257.5Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#bbdefb"}}),e("g",{attrs:{id:"SvgjsG1034"}},[e("text",{attrs:{id:"SvgjsText1035","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"118.125",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1036",transform:"translate(380,175)"}},[e("path",{attrs:{id:"SvgjsPath1037",d:"M 0 0L 20 0L 20 197L 0 197Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#fff9c4"}}),e("g",{attrs:{id:"SvgjsG1038"}},[e("text",{attrs:{id:"SvgjsText1039","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"87.875",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1040",transform:"translate(81,430)"}},[e("path",{attrs:{id:"SvgjsPath1041",d:"M 0 0L 20 0L 20 80.5L 0 80.5Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#bbdefb"}}),e("g",{attrs:{id:"SvgjsG1042"}},[e("text",{attrs:{id:"SvgjsText1043","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"29.625",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1044",transform:"translate(679,160.5)"}},[e("path",{attrs:{id:"SvgjsPath1045",d:"M 0 0L 20 0L 20 124.5L 0 124.5Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffe0b2"}}),e("g",{attrs:{id:"SvgjsG1046"}},[e("text",{attrs:{id:"SvgjsText1047","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"51.625",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1048",transform:"translate(134.5,114.5)"}},[e("path",{attrs:{id:"SvgjsPath1049",d:"M 0 0L 169.5 0L 169.5 29.5L 0 29.5Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1050"}},[e("text",{attrs:{id:"SvgjsText1051","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"170px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.125",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1052",dy:"16",x:"85"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1053"}},[t._v("保存 sso.com 的 cookie")])])])])]),e("g",{attrs:{id:"SvgjsG1054",transform:"translate(124.25,353.5)"}},[e("path",{attrs:{id:"SvgjsPath1055",d:"M 0 0L 232.5 0L 232.5 24.5L 0 24.5Z",stroke:"none","fill-opacity":"1",fill:"#e0e0e0"}}),e("g",{attrs:{id:"SvgjsG1056"}},[e("text",{attrs:{id:"SvgjsText1057","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"213px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"1.625",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1058",dy:"16",x:"116.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1059"}},[t._v("Set cookie: sessionid=xxxx, a.com")])])])])]),e("g",{attrs:{id:"SvgjsG1060",transform:"translate(380,430)"}},[e("path",{attrs:{id:"SvgjsPath1061",d:"M 0 0L 20 0L 20 80.5L 0 80.5Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#fff9c4"}}),e("g",{attrs:{id:"SvgjsG1062"}},[e("text",{attrs:{id:"SvgjsText1063","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"29.625",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1064"}},[e("path",{attrs:{id:"SvgjsPath1065",d:"M101.97753660527621 117.2107657119767C 159 122 155 134 104.36395057678453 146.7178781193073",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1066)"}})]),e("g",{attrs:{id:"SvgjsG1068"}},[e("path",{attrs:{id:"SvgjsPath1069",d:"M102 188L376.4 188",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1070)"}})]),e("g",{attrs:{id:"SvgjsG1072",transform:"translate(123.25,160.5)"}},[e("path",{attrs:{id:"SvgjsPath1073",d:"M 0 0L 234.5 0L 234.5 27.5L 0 27.5Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1074"}},[e("text",{attrs:{id:"SvgjsText1075","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"235px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"3.125",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1076",dy:"16",x:"117.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1077"}},[t._v("www.a.com/page-a?ticket=T123")])])])])]),e("g",{attrs:{id:"SvgjsG1078"}},[e("path",{attrs:{id:"SvgjsPath1079",d:"M401 187L675.4 187",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1080)"}})]),e("g",{attrs:{id:"SvgjsG1082",transform:"translate(442.5,160.5)"}},[e("path",{attrs:{id:"SvgjsPath1083",d:"M 0 0L 169.5 0L 169.5 29.5L 0 29.5Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1084"}},[e("text",{attrs:{id:"SvgjsText1085","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"170px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.125",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1086",dy:"16",x:"85"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1087"}},[t._v("验证 ticket")])])])])]),e("g",{attrs:{id:"SvgjsG1088"}},[e("path",{attrs:{id:"SvgjsPath1089",d:"M699.9678414941243 186.25156081223298C 766 192 739 214 702.3805419509584 221.51228593051127",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1090)"}})]),e("g",{attrs:{id:"SvgjsG1092",transform:"translate(736,182)"}},[e("path",{attrs:{id:"SvgjsPath1093",d:"M 0 0L 79 0L 79 36L 0 36Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1094"}},[e("text",{attrs:{id:"SvgjsText1095","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"79px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"7.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1096",dy:"16",x:"39.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1097"}},[t._v("ticket 有效")])])])])]),e("g",{attrs:{id:"SvgjsG1098"}},[e("path",{attrs:{id:"SvgjsPath1099",d:"M697.96252089222 233.27120754421668C 775 237 722 270 700.465543384554 268.0253159230942",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1100)"}})]),e("g",{attrs:{id:"SvgjsG1102",transform:"translate(736,229.5)"}},[e("path",{attrs:{id:"SvgjsPath1103",d:"M 0 0L 79 0L 79 36L 0 36Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1104"}},[e("text",{attrs:{id:"SvgjsText1105","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"79px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"7.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1106",dy:"16",x:"39.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1107"}},[t._v("注册系统 A")])])])])]),e("g",{attrs:{id:"SvgjsG1108"}},[e("path",{attrs:{id:"SvgjsPath1109",d:"M678 273.5L403.6 273.5",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1110)"}})]),e("g",{attrs:{id:"SvgjsG1112",transform:"translate(438.5,247.5)"}},[e("path",{attrs:{id:"SvgjsPath1113",d:"M 0 0L 169.5 0L 169.5 29.5L 0 29.5Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1114"}},[e("text",{attrs:{id:"SvgjsText1115","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"170px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.125",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1116",dy:"16",x:"85"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1117"}},[t._v("令牌有效")])])])])]),e("g",{attrs:{id:"SvgjsG1118"}},[e("path",{attrs:{id:"SvgjsPath1119",d:"M400.94931991990256 295.31431145330106C 472 306 431 334 403.41341629114334 337.8560641524293",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1120)"}})]),e("g",{attrs:{id:"SvgjsG1122",transform:"translate(406,299)"}},[e("path",{attrs:{id:"SvgjsPath1123",d:"M 0 0L 157 0L 157 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1124"}},[e("text",{attrs:{id:"SvgjsText1125","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"157px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1126",dy:"16",x:"78.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1127"}},[t._v("创建局部会话")])])])])]),e("g",{attrs:{id:"SvgjsG1128"}},[e("path",{attrs:{id:"SvgjsPath1129",d:"M379 349C 268.4 349 212.60000000000002 349.0000000000001 104.60000000000002 349",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1130)"}})]),e("g",{attrs:{id:"SvgjsG1132",transform:"translate(134.5,321.5)"}},[e("path",{attrs:{id:"SvgjsPath1133",d:"M 0 0L 169.5 0L 169.5 29.5L 0 29.5Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1134"}},[e("text",{attrs:{id:"SvgjsText1135","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"170px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.125",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1136",dy:"16",x:"85"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1137"}},[t._v("返回受保护资源 page-a")])])])])]),e("g",{attrs:{id:"SvgjsG1138"}},[e("path",{attrs:{id:"SvgjsPath1139",d:"M101.01522120763303 431.3486229709906L376.9315389351832 431.3486229709906",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1140)"}})]),e("g",{attrs:{id:"SvgjsG1142",transform:"translate(129.5,405.5)"}},[e("path",{attrs:{id:"SvgjsPath1143",d:"M 0 0L 222 0L 222 24.5L 0 24.5Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1144"}},[e("text",{attrs:{id:"SvgjsText1145","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"222px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"1.625",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1146",dy:"16",x:"111"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1147"}},[t._v("访问另外一个受保护资源 page-a1")])])])])]),e("g",{attrs:{id:"SvgjsG1148",transform:"translate(119,435.5)"}},[e("path",{attrs:{id:"SvgjsPath1149",d:"M 0 0L 232.5 0L 232.5 24.5L 0 24.5Z",stroke:"none","fill-opacity":"1",fill:"#e0e0e0"}}),e("g",{attrs:{id:"SvgjsG1150"}},[e("text",{attrs:{id:"SvgjsText1151","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"213px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"1.625",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1152",dy:"16",x:"116.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1153"}},[t._v("cookie: sessionid=xxxx, a.com")])])])])]),e("g",{attrs:{id:"SvgjsG1154"}},[e("path",{attrs:{id:"SvgjsPath1155",d:"M400.9523392635343 432.305040861412C 473 441 423 465 403.3678961151569 468.9782784276773",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1156)"}})]),e("g",{attrs:{id:"SvgjsG1158",transform:"translate(406,432.75)"}},[e("path",{attrs:{id:"SvgjsPath1159",d:"M 0 0L 157 0L 157 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1160"}},[e("text",{attrs:{id:"SvgjsText1161","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"157px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1162",dy:"16",x:"78.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1163"}},[t._v("验证已经登录")])])])])]),e("g",{attrs:{id:"SvgjsG1164"}},[e("path",{attrs:{id:"SvgjsPath1165",d:"M379 508.26794919243116L104.60000000000002 508.26794919243116",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1166)"}})]),e("g",{attrs:{id:"SvgjsG1168",transform:"translate(119,484.5)"}},[e("path",{attrs:{id:"SvgjsPath1169",d:"M 0 0L 222 0L 222 24.5L 0 24.5Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1170"}},[e("text",{attrs:{id:"SvgjsText1171","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"222px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"1.625",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1172",dy:"16",x:"111"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1173"}},[t._v("返回 page-a1")])])])])])]),t._v(" "),e("p",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("（SSO 机制实现流程 - 系统 A 身份验证）")])]),t._v(" "),e("p",[t._v("这个时候，由于 "),e("code",[t._v("a.com")]),t._v(" 存在已登录的 Cookie 信息，所以服务器端直接认证成功。")]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("如果认证中心登录完成之后，访问 "),e("code",[t._v("b.com")]),t._v(" 下的页面：")]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("svg",{attrs:{id:"SvgjsSvg1006",width:"866.5",height:"425",xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs"}},[e("defs",{attrs:{id:"SvgjsDefs1007"}},[e("marker",{attrs:{id:"SvgjsMarker1050",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1051",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1066",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1067",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1076",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1077",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1092",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1093",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1110",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1111",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})]),e("marker",{attrs:{id:"SvgjsMarker1120",markerWidth:"14",markerHeight:"10",refX:"10",refY:"5",viewBox:"0 0 14 10",orient:"auto",markerUnits:"userSpaceOnUse","stroke-dasharray":"0,0"}},[e("path",{attrs:{id:"SvgjsPath1121",d:"M0,0 L14,5 L0,10 L0,0",fill:"#323232",stroke:"#323232","stroke-width":"1"}})])]),e("g",{attrs:{id:"SvgjsG1008"}},[e("path",{attrs:{id:"SvgjsPath1009",d:"M91 68L91 400","stroke-dasharray":"8,5",stroke:"#e0e0e0","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1010"}},[e("path",{attrs:{id:"SvgjsPath1011",d:"M390 67L390 400","stroke-dasharray":"8,5",stroke:"#e0e0e0","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1012"}},[e("path",{attrs:{id:"SvgjsPath1013",d:"M689 68L689 398","stroke-dasharray":"8,5",stroke:"#e0e0e0","stroke-width":"2",fill:"none"}})]),e("g",{attrs:{id:"SvgjsG1014",transform:"translate(623,25)"}},[e("path",{attrs:{id:"SvgjsPath1015",d:"M 0 0L 132 0L 132 42L 0 42Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffe0b2"}}),e("g",{attrs:{id:"SvgjsG1016"}},[e("text",{attrs:{id:"SvgjsText1017","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"112px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"10.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1018",dy:"16",x:"66"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1019"}},[t._v("认证中心(sso.com)")])])])])]),e("g",{attrs:{id:"SvgjsG1020",transform:"translate(324,25)"}},[e("path",{attrs:{id:"SvgjsPath1021",d:"M 0 0L 132 0L 132 42L 0 42Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#c8e6c9"}}),e("g",{attrs:{id:"SvgjsG1022"}},[e("text",{attrs:{id:"SvgjsText1023","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"112px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"10.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1024",dy:"16",x:"66"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1025"}},[t._v("系统 B(b.com)")])])])])]),e("g",{attrs:{id:"SvgjsG1026",transform:"translate(25,25)"}},[e("path",{attrs:{id:"SvgjsPath1027",d:"M 0 0L 132 0L 132 42L 0 42Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#bbdefb"}}),e("g",{attrs:{id:"SvgjsG1028"}},[e("text",{attrs:{id:"SvgjsText1029","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"112px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"10.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1030",dy:"16",x:"66"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1031"}},[t._v("浏览器")])])])])]),e("g",{attrs:{id:"SvgjsG1032",transform:"translate(81,114.5)"}},[e("path",{attrs:{id:"SvgjsPath1033",d:"M 0 0L 20 0L 20 75L 0 75Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#bbdefb"}}),e("g",{attrs:{id:"SvgjsG1034"}},[e("text",{attrs:{id:"SvgjsText1035","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"26.875",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1036",transform:"translate(380,114.5)"}},[e("path",{attrs:{id:"SvgjsPath1037",d:"M 0 0L 20 0L 20 75L 0 75Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#c8e6c9"}}),e("g",{attrs:{id:"SvgjsG1038"}},[e("text",{attrs:{id:"SvgjsText1039","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"26.875",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1040",transform:"translate(81,251.5)"}},[e("path",{attrs:{id:"SvgjsPath1041",d:"M 0 0L 20 0L 20 115.5L 0 115.5Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#bbdefb"}}),e("g",{attrs:{id:"SvgjsG1042"}},[e("text",{attrs:{id:"SvgjsText1043","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"47.125",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1044",transform:"translate(679,251.5)"}},[e("path",{attrs:{id:"SvgjsPath1045",d:"M 0 0L 20 0L 20 115.5L 0 115.5Z",stroke:"rgba(50,50,50,1)","stroke-width":"2","fill-opacity":"1",fill:"#ffe0b2"}}),e("g",{attrs:{id:"SvgjsG1046"}},[e("text",{attrs:{id:"SvgjsText1047","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"0px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"47.125",transform:"rotate(0)"}})])]),e("g",{attrs:{id:"SvgjsG1048"}},[e("path",{attrs:{id:"SvgjsPath1049",d:"M102 114.84452575685384L240.42758649849338 114.84452575685384L240.42758649849338 114.84452575685384L376.4 114.84452575685384",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1050)"}})]),e("g",{attrs:{id:"SvgjsG1052",transform:"translate(157,86.5)"}},[e("path",{attrs:{id:"SvgjsPath1053",d:"M 0 0L 160.5 0L 160.5 28L 0 28Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1054"}},[e("text",{attrs:{id:"SvgjsText1055","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"161px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"3.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1056",dy:"16",x:"80.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1057"}},[t._v("访问系统 B 的受保护资源")])])])])]),e("g",{attrs:{id:"SvgjsG1058",transform:"translate(144.5,119)"}},[e("path",{attrs:{id:"SvgjsPath1059",d:"M 0 0L 193 0L 193 22L 0 22Z",stroke:"none","fill-opacity":"1",fill:"#e0e0e0"}}),e("g",{attrs:{id:"SvgjsG1060"}},[e("text",{attrs:{id:"SvgjsText1061","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"173px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"0.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1062",dy:"16",x:"96.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1063"}},[t._v("www.b.com/page-b")])])])])]),e("g",{attrs:{id:"SvgjsG1064"}},[e("path",{attrs:{id:"SvgjsPath1065",d:"M400.9860544094445 117.1120754343518C 479 123 472 137 403.4537995365141 150.98448596190178",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1066)"}})]),e("g",{attrs:{id:"SvgjsG1068",transform:"translate(435.5,115)"}},[e("path",{attrs:{id:"SvgjsPath1069",d:"M 0 0L 180.5 0L 180.5 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1070"}},[e("text",{attrs:{id:"SvgjsText1071","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"181px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1072",dy:"16",x:"90.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1073"}},[t._v("未登录(没有局部会话)")])])])])]),e("g",{attrs:{id:"SvgjsG1074"}},[e("path",{attrs:{id:"SvgjsPath1075",d:"M379 185.22339182284404L104.60000000000002 185.22339182284404",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1076)"}})]),e("g",{attrs:{id:"SvgjsG1078",transform:"translate(181.5,159.5)"}},[e("path",{attrs:{id:"SvgjsPath1079",d:"M 0 0L 119 0L 119 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1080"}},[e("text",{attrs:{id:"SvgjsText1081","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"119px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1082",dy:"16",x:"59.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1083"}},[t._v("302 重定向")])])])])]),e("g",{attrs:{id:"SvgjsG1084",transform:"translate(101,193)"}},[e("path",{attrs:{id:"SvgjsPath1085",d:"M 0 0L 332.5 0L 332.5 22L 0 22Z",stroke:"none","fill-opacity":"1",fill:"#e0e0e0"}}),e("g",{attrs:{id:"SvgjsG1086"}},[e("text",{attrs:{id:"SvgjsText1087","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"313px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"0.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1088",dy:"16",x:"166.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1089"}},[t._v("www.sso.com/login?redirect=www.b.com/page-b")])])])])]),e("g",{attrs:{id:"SvgjsG1090"}},[e("path",{attrs:{id:"SvgjsPath1091",d:"M102 252.54676729359483L675.4 252.54676729359483",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1092)"}})]),e("g",{attrs:{id:"SvgjsG1094",transform:"translate(307.25,226)"}},[e("path",{attrs:{id:"SvgjsPath1095",d:"M 0 0L 119 0L 119 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1096"}},[e("text",{attrs:{id:"SvgjsText1097","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"119px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1098",dy:"16",x:"59.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1099"}},[t._v("访问 www.sso.com")])])])])]),e("g",{attrs:{id:"SvgjsG1100",transform:"translate(205.25,260)"}},[e("path",{attrs:{id:"SvgjsPath1101",d:"M 0 0L 347.75 0L 347.75 41L 0 41Z",stroke:"none","fill-opacity":"1",fill:"#e0e0e0"}}),e("g",{attrs:{id:"SvgjsG1102"}},[e("text",{attrs:{id:"SvgjsText1103","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"328px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"1.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1104",dy:"16",x:"174"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1105"}},[t._v("www.sso.com/login?redirect=www.b.com/page-b")])]),e("tspan",{attrs:{id:"SvgjsTspan1106",dy:"16",x:"174"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1107"}},[t._v("Cookie: ssoid=1234")])])])])]),e("g",{attrs:{id:"SvgjsG1108"}},[e("path",{attrs:{id:"SvgjsPath1109",d:"M699.9569302267545 251.98465175072067C 732 259 760 272 702.163639613562 294.2820406304279",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1110)"}})]),e("g",{attrs:{id:"SvgjsG1112",transform:"translate(714.5,256)"}},[e("path",{attrs:{id:"SvgjsPath1113",d:"M 0 0L 127.5 0L 127.5 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1114"}},[e("text",{attrs:{id:"SvgjsText1115","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"128px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1116",dy:"16",x:"64"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1117"}},[t._v("验证已经登录")])])])])]),e("g",{attrs:{id:"SvgjsG1118"}},[e("path",{attrs:{id:"SvgjsPath1119",d:"M678 349L104.60000000000002 349",stroke:"#323232","stroke-width":"2",fill:"none","marker-end":"url(#SvgjsMarker1120)"}})]),e("g",{attrs:{id:"SvgjsG1122",transform:"translate(311.5,319.5)"}},[e("path",{attrs:{id:"SvgjsPath1123",d:"M 0 0L 119 0L 119 30L 0 30Z",stroke:"none",fill:"none"}}),e("g",{attrs:{id:"SvgjsG1124"}},[e("text",{attrs:{id:"SvgjsText1125","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"119px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"4.375",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1126",dy:"16",x:"59.5"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1127"}},[t._v("302 重定向")])])])])]),e("g",{attrs:{id:"SvgjsG1128",transform:"translate(254.375,354)"}},[e("path",{attrs:{id:"SvgjsPath1129",d:"M 0 0L 249.5 0L 249.5 23L 0 23Z",stroke:"none","fill-opacity":"1",fill:"#e0e0e0"}}),e("g",{attrs:{id:"SvgjsG1130"}},[e("text",{attrs:{id:"SvgjsText1131","font-family":"微软雅黑","text-anchor":"middle","font-size":"13px",width:"230px",fill:"#323232","font-weight":"400",align:"middle",lineHeight:"125%",anchor:"middle",family:"微软雅黑",size:"13px",weight:"400","font-style":"",opacity:"1",y:"0.875",transform:"rotate(0)"}},[e("tspan",{attrs:{id:"SvgjsTspan1132",dy:"16",x:"125"}},[e("tspan",{staticStyle:{},attrs:{id:"SvgjsTspan1133"}},[t._v("www.b.com/page-b?ticket=T5678")])])])])])]),t._v(" "),e("p",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("（SSO 机制实现流程 - 系统 B 身份验证）")])]),t._v(" "),e("p",[t._v("这个时候，由于认证中心存在之前登录过的 Cookie，所以也不用再次输入账号密码，直接返回第 4 步，下发 ticket 给 "),e("code",[t._v("b.com")]),t._v(" 即可。")]),t._v(" "),e("h3",{attrs:{id:"sso-单点登录退出"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sso-单点登录退出"}},[t._v("#")]),t._v(" SSO 单点登录退出")]),t._v(" "),e("p",[t._v("目前我们已经完成了单点登录，在同一套认证中心的管理下，多个产品可以共享登录态。现在我们需要考虑退出了，即：在一个产品中退出了登录，怎么让其他的产品也都退出登录？")]),t._v(" "),e("p",[t._v("原理其实不难，可以回过头来看第 5 步，每一个产品在向认证中心验证 ticket 时，其实可以顺带将自己的退出登录 api 发送到认证中心。")]),t._v(" "),e("p",[t._v("当某个产品 "),e("code",[t._v("c.com")]),t._v(" 退出登录时：")]),t._v(" "),e("ol",[e("li",[t._v("清空 "),e("code",[t._v("c.com")]),t._v(" 中的登录态 Cookie。")]),t._v(" "),e("li",[t._v("请求认证中心 "),e("code",[t._v("sso.com")]),t._v(" 中的退出 api。")]),t._v(" "),e("li",[t._v("认证中心遍历下发过 ticket 的所有产品，并调用对应的退出 api，完成退出。")])]),t._v(" "),e("h2",{attrs:{id:"oauth-第三方登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#oauth-第三方登录"}},[t._v("#")]),t._v(" OAuth 第三方登录")]),t._v(" "),e("p",[t._v("在上一种方案中，我们使用单点登录完成了多产品的登录态共享，但都是建立在一套统一的认证中心下，对于一些小型企业，未免太麻烦，有没有一种登录能够做到开箱即用？")]),t._v(" "),e("p",[t._v("其实是有的，很多大厂都会提供自己的第三方登录服务，我们一起来分析一下。")]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("img",{staticStyle:{width:"460px"},attrs:{src:s(587),alt:"OAuth 第三方登录"}}),t._v(" "),e("p",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("（OAuth 第三方登录）")])]),t._v(" "),e("h3",{attrs:{id:"oauth-机制实现流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#oauth-机制实现流程"}},[t._v("#")]),t._v(" OAuth 机制实现流程")]),t._v(" "),e("p",[t._v("这里以微信开放平台的接入流程为例：")]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("img",{attrs:{src:s(588),alt:"微信开放平台的接入流程"}}),t._v(" "),e("p",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("（微信开放平台的接入流程，图来源于网络）")])]),t._v(" "),e("ol",[e("li",[t._v("首先，"),e("code",[t._v("a.com")]),t._v(" 的运营者需要在微信开放平台注册账号，并向微信申请使用微信登录功能。")]),t._v(" "),e("li",[t._v("申请成功后，得到申请的 appid、appsecret。")]),t._v(" "),e("li",[t._v("用户在 "),e("code",[t._v("a.com")]),t._v(" 上选择使用微信登录。")]),t._v(" "),e("li",[t._v("这时会跳转微信的 OAuth 授权登录，并带上 "),e("code",[t._v("a.com")]),t._v(" 的回调地址。")]),t._v(" "),e("li",[t._v("用户输入微信账号和密码，登录成功后，需要选择具体的授权范围，如：授权用户的头像、昵称等。")]),t._v(" "),e("li",[t._v("授权之后，微信会根据拉起 "),e("code",[t._v("a.com?code=123")]),t._v("，这时带上了一个临时票据 code。")]),t._v(" "),e("li",[t._v("获取 code 之后，"),e("code",[t._v("a.com")]),t._v(" 会拿着 code 、appid、appsecret，向微信服务器申请 token，验证成功后，微信会下发一个 token。")]),t._v(" "),e("li",[t._v("有了 token 之后，"),e("code",[t._v("a.com")]),t._v(" 就可以凭借 token 拿到对应的微信用户头像，用户昵称等信息了。")]),t._v(" "),e("li",[e("code",[t._v("a.com")]),t._v(" 提示用户登录成功，并将登录状态写入 Cookie，以作为后续访问的凭证。")])]),t._v(" "),e("h2",{attrs:{id:"总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),e("p",[t._v("本文介绍了 4 种常见的登录方式及其原理，总结一下这 4 种方案的使用场景：")]),t._v(" "),e("ul",[e("li",[t._v("Cookie + Session 历史悠久，适合于简单的后端架构，需开发人员自己处理好安全问题。")]),t._v(" "),e("li",[t._v("Token 方案对后端压力小，适合大型分布式的后端架构，但已分发出去的 token ，如果想收回权限，就不是很方便了。")]),t._v(" "),e("li",[t._v("SSO 单点登录，适用于中大型企业，想要统一内部所有产品的登录方式。")]),t._v(" "),e("li",[t._v("OAuth 第三方登录，简单易用，对用户和开发者都友好，但第三方平台很多，需要选择合适自己的第三方登录平台。")])]),t._v(" "),e("p",[t._v("（完）")])])}),[],!1,null,null,null);a.default=r.exports}}]);