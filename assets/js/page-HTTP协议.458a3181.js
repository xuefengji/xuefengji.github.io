(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1074:function(t,v,_){"use strict";_.r(v);var e=_(1),a=Object(e.a)({},(function(){var t=this,v=t.$createElement,e=t._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"http-协议"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-协议"}},[t._v("#")]),t._v(" HTTP 协议")]),t._v(" "),e("h2",{attrs:{id:"简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),e("p",[t._v("HTTP：Hyper Text Transfer Protocol，超文本传输协议，应用层协议")]),t._v(" "),e("p",[t._v("作用：用于从服务器传输超文本到本地浏览器的传送协议")]),t._v(" "),e("p",[t._v("构成：请求 + 响应")]),t._v(" "),e("p",[t._v("端口号：默认 80，基于 TCP 协议")]),t._v(" "),e("p",[t._v("无状态： 协议对于事务处理没有记忆能力")]),t._v(" "),e("p",[t._v("版本：")]),t._v(" "),e("ul",[e("li",[t._v("HTTP/1.0 ，发送请求，创建一次连接，获得一个 web 资源，断开连接")]),t._v(" "),e("li",[t._v("HTTP/1.1 ，发送请求，创建一次连接，获得多个 web 资源，断开连接")])]),t._v(" "),e("h2",{attrs:{id:"http-请求报文"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-请求报文"}},[t._v("#")]),t._v(" HTTP 请求报文")]),t._v(" "),e("p",[t._v("组成：请求行 + 请求头 + 请求体")]),t._v(" "),e("p",[e("img",{attrs:{src:_(561),alt:"header"}})]),t._v(" "),e("h3",{attrs:{id:"请求行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#请求行"}},[t._v("#")]),t._v(" 请求行")]),t._v(" "),e("p",[e("strong",[t._v("格式")]),t._v("：请求方式 资源路径 协议版本")]),t._v(" "),e("p",[t._v("如："),e("code",[t._v("post /api/ HTTP/1.1")])]),t._v(" "),e("h4",{attrs:{id:"请求方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#请求方式"}},[t._v("#")]),t._v(" 请求方式")]),t._v(" "),e("p",[t._v("在 REST 架构分隔中，有严格规定对于不同的请求类型要设置合适的请求方法，可参考 "),e("RouterLink",{attrs:{to:"/test/interface-test/Restful规范/"}},[t._v("Restful规范")])],1),t._v(" "),e("ul",[e("li",[t._v("GET\n"),e("ul",[e("li",[t._v("将请求参数追加在 URL 后面，不安全")]),t._v(" "),e("li",[t._v("URL 长度限制 GET 请求方式数据的大小")]),t._v(" "),e("li",[t._v("没有请求体")])])]),t._v(" "),e("li",[t._v("POST\n"),e("ul",[e("li",[t._v("请求参数在请求体中，相对于 GET 来说较安全")]),t._v(" "),e("li",[t._v("请求数据大小没有限制")])])]),t._v(" "),e("li",[t._v("HEAD\n"),e("ul",[e("li",[t._v("服务端值返回响应头，没有响应内容")])])]),t._v(" "),e("li",[t._v("DELETE\n"),e("ul",[e("li",[t._v("删除一个资源")])])]),t._v(" "),e("li",[t._v("OPTIONS\n"),e("ul",[e("li",[t._v("用于获取当前 URL 所支持的方法")]),t._v(" "),e("li",[t._v("请求成功后，会在HTTP头中包含一个名为 “Allow” 的头，值是所支持的方法")])])]),t._v(" "),e("li",[t._v("TRACE\n"),e("ul",[e("li",[t._v("回显服务器收到的请求，主要用于测试或诊断")])])]),t._v(" "),e("li",[t._v("CONNECT\n"),e("ul",[e("li",[t._v("HTTP/1.1 协议预留的，能够将连接改为管道方式的代理服务器")]),t._v(" "),e("li",[t._v("通常用于 SSL 加密服务器的链接与非加密的 HTTP 代理服务器的通信")])])])]),t._v(" "),e("h3",{attrs:{id:"请求头"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#请求头"}},[t._v("#")]),t._v(" 请求头")]),t._v(" "),e("p",[t._v("如："),e("code",[t._v("Host:39.108.107.149:8080")])]),t._v(" "),e("p",[t._v("请求头从第二行开始，到第一个空格结束")]),t._v(" "),e("p",[t._v("常以键值对 {key:value} 方式")]),t._v(" "),e("p",[e("strong",[t._v("常见请求头")]),t._v("：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("请求头")]),t._v(" "),e("th",[t._v("解释")]),t._v(" "),e("th",[t._v("示例")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Referer")]),t._v(" "),e("td",[t._v("表示从哪个 URL 跳转来的")]),t._v(" "),e("td",[t._v("Referer: http://www.zcmhi.com/archives/71.html")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Accept")]),t._v(" "),e("td",[t._v("指定客户端能够接收的内容类型")]),t._v(" "),e("td",[t._v("Accept: text/plain, text/html")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Cokkie")]),t._v(" "),e("td",[t._v("HTTP 请求发送时，会把保存在该请求域名下的所有cookie 值一起发送给web服务器")]),t._v(" "),e("td",[t._v("Cookie: $Version=1; Skin=new;")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("User-Agent")]),t._v(" "),e("td",[t._v("User-Agent的内容包含发出请求的用户信息")]),t._v(" "),e("td",[t._v("User-Agent: Mozilla/5.0 (Linux; X11)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Connection")]),t._v(" "),e("td",[t._v("表示是否需要持久连接，HTTP 1.1 默认进行持久连接")]),t._v(" "),e("td",[t._v("Connection: close")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Host")]),t._v(" "),e("td",[t._v("指定请求的服务器的域名和端口号")]),t._v(" "),e("td",[t._v("Host: www.zcmhi.com")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Content-Type")]),t._v(" "),e("td",[t._v("请求的与实体对应的 MIME 信息")]),t._v(" "),e("td",[t._v("Content-Type: application/x-www-form-urlencoded")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Accept-Encoding")]),t._v(" "),e("td",[t._v("指定浏览器可以支持的 web 服务器返回内容压缩编码类型")]),t._v(" "),e("td",[t._v("Accept-Encoding: compress, gzip")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Cache-Control")]),t._v(" "),e("td",[t._v("指定请求和响应遵循的缓存机制")]),t._v(" "),e("td",[t._v("Cache-Control: no-cache")])])])]),t._v(" "),e("p",[t._v("更多请求头属性可参考 "),e("a",{attrs:{href:"http://tools.jb51.net/table/http_header",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP请求头信息对照表"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"请求体"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#请求体"}},[t._v("#")]),t._v(" 请求体")]),t._v(" "),e("p",[t._v("当请求方式是 POST 时，请求体会有请求的参数，格式如下：")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    'username'"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 'zhangsan'"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    'password'"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" '"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("'\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("h2",{attrs:{id:"http-响应报文"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-响应报文"}},[t._v("#")]),t._v(" HTTP 响应报文")]),t._v(" "),e("p",[t._v("组成：响应行 + 响应头 + 响应体")]),t._v(" "),e("p",[e("img",{attrs:{src:_(562),alt:"response"}})]),t._v(" "),e("h3",{attrs:{id:"响应行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#响应行"}},[t._v("#")]),t._v(" 响应行")]),t._v(" "),e("p",[t._v("格式：HTTP 版本 返回状态码  状态码描述")]),t._v(" "),e("p",[t._v("如：")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("HTTP/1.1 200 OK\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h4",{attrs:{id:"状态码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#状态码"}},[t._v("#")]),t._v(" 状态码")]),t._v(" "),e("ul",[e("li",[t._v("1xx: 信息，请求收到了，继续处理")]),t._v(" "),e("li",[t._v("2xx: 代表成功. 行为被成功地接收、理解及采纳\n"),e("ul",[e("li",[t._v("200 OK [GET]: 服务器端成功返回用户请求的数据")]),t._v(" "),e("li",[t._v("201 CREATED [POST/PUT/PATCH]: 用户新建或修改数据成功")]),t._v(" "),e("li",[t._v("202 Accepted: 表示一个请求已经进入后台排队（一般是异步任务）")]),t._v(" "),e("li",[t._v("204 NO CONTENT -[DELETE]: 用户删除数据成功")])])]),t._v(" "),e("li",[t._v("3xx: 重定向")]),t._v(" "),e("li",[t._v("4xx: 客户端错误，请求包含语法错误或请求无法实现\n"),e("ul",[e("li",[t._v("400：Bad Request - [POST/PUT/PATCH]: 用户发出的请求有错误，服务器不理解客户端的请求，未做任何处理")]),t._v(" "),e("li",[t._v("401: Unauthorized 表示用户没有权限(令牌、用户名、密码错误)")]),t._v(" "),e("li",[t._v("403：Forbidden: 表示用户得到授权了，但是访问被禁止了, 也可以理解为不具有访问资源的权限")]),t._v(" "),e("li",[t._v("404：Not Found: 所请求的资源不存在，或不可用")]),t._v(" "),e("li",[t._v("405：Method Not Allowed: 用户已经通过了身份验证, 但是所用的 HTTP 方法不在它的权限之内")]),t._v(" "),e("li",[t._v("406：Not Acceptable: 用户的请求的格式不可得(比如用户请求的是 JSON 格式，但是只有XML 格式)")]),t._v(" "),e("li",[t._v("410：Gone - [GET]: 用户请求的资源被转移或被删除，且不会再得到的")]),t._v(" "),e("li",[t._v("415: Unsupported Media Type: 客户端要求的返回格式不支持，比如，API 只能返回 JSON 格式，但是客户端要求返回 XML 格式")]),t._v(" "),e("li",[t._v("422：Unprocessable Entity: 客户端上传的附件无法处理，导致请求失败")]),t._v(" "),e("li",[t._v("429：Too Many Requests: 客户端的请求次数超过限额")])])]),t._v(" "),e("li",[t._v("5xx: 服务器端错误\n"),e("ul",[e("li",[t._v("500：INTERNAL SERVER ERROR 服务器发生错误")]),t._v(" "),e("li",[t._v("502：网关错误")]),t._v(" "),e("li",[t._v("503: Service Unavailable 服务器端当前无法处理请求")]),t._v(" "),e("li",[t._v("504：网关超时")])])])]),t._v(" "),e("h3",{attrs:{id:"响应头"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#响应头"}},[t._v("#")]),t._v(" 响应头")]),t._v(" "),e("p",[t._v("响应头也是用键值对 "),e("code",[t._v("k：v")])]),t._v(" "),e("p",[e("strong",[t._v("常见响应头")]),t._v("：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("常见响应头")]),t._v(" "),e("th",[t._v("解释")]),t._v(" "),e("th",[t._v("示例")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("Location")]),t._v(" "),e("td",[t._v("用来重定向接收方到非请求 URL 的位置来完成请求或标识新的资源")]),t._v(" "),e("td",[t._v("Location: http://www.zcmhi.com/archives/94.html")])]),t._v(" "),e("tr",[e("td",[t._v("Content-Type")]),t._v(" "),e("td",[t._v("返回内容的 MIME 类型")]),t._v(" "),e("td",[t._v("Content-Type: text/html; charset=utf-8")])]),t._v(" "),e("tr",[e("td",[t._v("Set-Cookie")]),t._v(" "),e("td",[t._v("设置 Http Cookie")]),t._v(" "),e("td",[t._v("Set-Cookie: UserID=JohnDoe; Max-Age=3600; Version=1")])]),t._v(" "),e("tr",[e("td",[t._v("Content-Encoding")]),t._v(" "),e("td",[t._v("web 服务器支持的返回内容压缩编码类型")]),t._v(" "),e("td",[t._v("Content-Encoding: gzip")])]),t._v(" "),e("tr",[e("td",[t._v("Content-length")]),t._v(" "),e("td",[t._v("响应体的长度")]),t._v(" "),e("td",[t._v("Content-Length: 348")])]),t._v(" "),e("tr",[e("td",[t._v("Refresh")]),t._v(" "),e("td",[t._v("应用于重定向或一个新的资源被创造，在 5 秒之后重定向（由网景提出，被大部分浏览器支持）")]),t._v(" "),e("td",[t._v("Refresh: 5; url=http://www.zcmhi.com/archives/94.html")])]),t._v(" "),e("tr",[e("td",[t._v("Server")]),t._v(" "),e("td",[t._v("web 服务器软件名称")]),t._v(" "),e("td",[t._v("Server: Apache/1.3.27 (Unix) (Red-Hat/Linux)")])]),t._v(" "),e("tr",[e("td",[t._v("Cache-Control")]),t._v(" "),e("td",[t._v("告诉所有的缓存机制是否可以缓存及哪种类型")]),t._v(" "),e("td",[t._v("Cache-Control: no-cache")])])])]),t._v(" "),e("p",[t._v("更多响应头属性可参考 "),e("a",{attrs:{href:"http://tools.jb51.net/table/http_header",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP响应头信息对照表"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"响应体"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#响应体"}},[t._v("#")]),t._v(" 响应体")]),t._v(" "),e("p",[t._v("是服务器回写给客户端的页面正文，浏览器将正文加载到内存，然后解析渲染显示页面内容")]),t._v(" "),e("h2",{attrs:{id:"http-扩展"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-扩展"}},[t._v("#")]),t._v(" HTTP 扩展")]),t._v(" "),e("h3",{attrs:{id:"传输文件过大"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#传输文件过大"}},[t._v("#")]),t._v(" 传输文件过大")]),t._v(" "),e("p",[t._v("对于服务器返回的资源文件过大时，通常有以下方式解决方法：")]),t._v(" "),e("h4",{attrs:{id:"压缩文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#压缩文件"}},[t._v("#")]),t._v(" 压缩文件")]),t._v(" "),e("ul",[e("li",[t._v("服务端需要能支持文件的压缩功能，浏览器能够针对被压缩的文件进行解压缩")]),t._v(" "),e("li",[t._v("浏览器可以指定 Accept-Encoding 来告诉服务器我当前支持的编码类型 "),e("code",[t._v("Accept-Encoding:gzip,deflate")]),t._v("，那服务端会根据支持的编码类型，选择合适的类型进行压缩")]),t._v(" "),e("li",[t._v("常见的编码方式有："),e("code",[t._v("gzip/deflate")])])]),t._v(" "),e("h4",{attrs:{id:"分割传输"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分割传输"}},[t._v("#")]),t._v(" 分割传输")]),t._v(" "),e("p",[t._v("传输大容量数据时，通过分块传输编码 ，把数据分割成多块，能够让浏览器逐步显示页面")]),t._v(" "),e("h3",{attrs:{id:"请求连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#请求连接"}},[t._v("#")]),t._v(" 请求连接")]),t._v(" "),e("p",[t._v("HTTP 1.0 版本：")]),t._v(" "),e("ul",[e("li",[t._v("每一次通信都必须重新进行一次 TCP 连接，增加了通信开销")]),t._v(" "),e("li",[t._v("发送请求后需等待并收到响应， 才能发送下一个请求")])]),t._v(" "),e("p",[t._v("HTTP 1.1 版本：")]),t._v(" "),e("ul",[e("li",[t._v("通过 "),e("code",[t._v("Connection:Keep-Alive")]),t._v(" 字段保持持久链接，即只需要进行一次 TCP 连接，极大减少了连接开销")]),t._v(" "),e("li",[t._v("事务处理结束之后将连接关闭， 必须向报文中显示地添加一个 "),e("code",[t._v("Connection：close")]),t._v(" 首部")]),t._v(" "),e("li",[t._v("允许在持久连接上使用请求管道，能同时并行发送多个请求")])]),t._v(" "),e("h3",{attrs:{id:"无状态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#无状态"}},[t._v("#")]),t._v(" 无状态")]),t._v(" "),e("p",[t._v("HTTP 协议本身不会对请求和响应之间的通信状态做保存")]),t._v(" "),e("p",[t._v("无状态栗子：")]),t._v(" "),e("p",[t._v("访问一个 电商网站，先登录，然后去选购商品，当点击一个商品加入购物车以后又提示你登录")]),t._v(" "),e("p",[e("strong",[t._v("通常使用以下解决方案解决 HTTP 无状态")]),t._v("：")]),t._v(" "),e("ul",[e("li",[t._v("Cookies(客户端支持)")]),t._v(" "),e("li",[t._v("Session(服务端支持)")]),t._v(" "),e("li",[t._v("token")])]),t._v(" "),e("p",[t._v("具体原理请参考 "),e("RouterLink",{attrs:{to:"/test/interface-test/三种状态机制.html"}},[t._v("三种状态机制")])],1),t._v(" "),e("p",[t._v("（完）")])])}),[],!1,null,null,null);v.default=a.exports},561:function(t,v,_){t.exports=_.p+"assets/img/http1.76055d1e.png"},562:function(t,v,_){t.exports=_.p+"assets/img/http2.1597c417.png"}}]);