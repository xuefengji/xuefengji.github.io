(window.webpackJsonp=window.webpackJsonp||[]).push([[214],{1030:function(s,t,n){"use strict";n.r(t);var e=n(1),a=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"使用-jenkins-构建-pytest-项目生成-allure-报告"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-jenkins-构建-pytest-项目生成-allure-报告"}},[s._v("#")]),s._v(" 使用 Jenkins 构建 Pytest 项目生成 Allure 报告")]),s._v(" "),e("h2",{attrs:{id:"前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),e("ul",[e("li",[s._v("docker 中安装 Jenkins，可参考 "),e("RouterLink",{attrs:{to:"/basic-skills/docker/jenkins.html"}},[s._v("Jenkins 安装")])],1),s._v(" "),e("li",[s._v("Jenkins 容器中配置好 Python+Pytest+Allure 环境")])]),s._v(" "),e("h2",{attrs:{id:"安装插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装插件"}},[s._v("#")]),s._v(" 安装插件")]),s._v(" "),e("h3",{attrs:{id:"安装插件-allure"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装插件-allure"}},[s._v("#")]),s._v(" 安装插件 Allure")]),s._v(" "),e("p",[s._v("左边列表中选择 Manage Jenkins")]),s._v(" "),e("p",[e("img",{attrs:{src:n(496),alt:"jenkins"}})]),s._v(" "),e("p",[s._v("System Configuration 中选择 Manage Plugins")]),s._v(" "),e("p",[e("img",{attrs:{src:n(497),alt:"jenkins"}})]),s._v(" "),e("p",[s._v("在插件管理中，选择可安装的选项，并在搜索框中输入 allure，选择 Allure 并安装")]),s._v(" "),e("p",[e("img",{attrs:{src:n(498),alt:"jenkins"}})]),s._v(" "),e("p",[s._v("完成后，在全局工具配置中，设置 Allure 的路径，并保存")]),s._v(" "),e("p",[e("img",{attrs:{src:n(499),alt:"jenkins"}})]),s._v(" "),e("h2",{attrs:{id:"jenkins-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-配置"}},[s._v("#")]),s._v(" Jenkins 配置")]),s._v(" "),e("h3",{attrs:{id:"上传项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#上传项目"}},[s._v("#")]),s._v(" 上传项目")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("将本地已有的 Pytest 项目上传到服务器 "),e("code",[s._v("/var/jenkins_node/pytest_project")]),s._v("中")])]),s._v(" "),e("li",[e("p",[s._v("因为这个目录在创建 Jenkins 容器时已经映射到容器的内部了")])]),s._v(" "),e("li",[e("p",[s._v("进入容器中的此目录下，执行 "),e("code",[s._v("pytest -sq --alluredir=./allure-results --clean-alluredir")]),s._v("，执行成功")])])]),s._v(" "),e("h3",{attrs:{id:"jenkins-中配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-中配置"}},[s._v("#")]),s._v(" Jenkins 中配置")]),s._v(" "),e("p",[e("strong",[s._v("第一步")]),s._v("：新建一个任务，填入名称并选择”构建一个自由风格的软件项目“，并确定")]),s._v(" "),e("p",[e("img",{attrs:{src:n(500),alt:"jenkins"}})]),s._v(" "),e("p",[e("strong",[s._v("第二步")]),s._v("：进入配置页进行配置")]),s._v(" "),e("p",[s._v("构建：配置要执行的 Pytest 的命令")]),s._v(" "),e("p",[e("img",{attrs:{src:n(501),alt:"jenkins"}})]),s._v(" "),e("p",[s._v("构建后操作：输入要生成报告的文件目录")]),s._v(" "),e("p",[e("img",{attrs:{src:n(502),alt:"jenkins"}})]),s._v(" "),e("p",[s._v("完成配置后，在创建的项目中点击构建，构建成功后，可以看到 console 控制台的输出")]),s._v(" "),e("p",[e("img",{attrs:{src:n(503),alt:"jenkins"}})]),s._v(" "),e("p",[s._v("（完）")])])}),[],!1,null,null,null);t.default=a.exports},496:function(s,t,n){s.exports=n.p+"assets/img/jenkins3.0c55f3ab.png"},497:function(s,t,n){s.exports=n.p+"assets/img/jenkins4.0d3d25da.png"},498:function(s,t,n){s.exports=n.p+"assets/img/jenkins11.1775d0d5.png"},499:function(s,t,n){s.exports=n.p+"assets/img/jenkins12.f008a73c.png"},500:function(s,t,n){s.exports=n.p+"assets/img/jenkins8.9917d728.png"},501:function(s,t,n){s.exports=n.p+"assets/img/jenkins9.4b371d51.png"},502:function(s,t,n){s.exports=n.p+"assets/img/jenkins10.bf2ab998.png"},503:function(s,t,n){s.exports=n.p+"assets/img/jenkins13.40d8c927.png"}}]);