(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1324:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"beanshell"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#beanshell"}},[s._v("#")]),s._v(" BeanShell")]),s._v(" "),n("h2",{attrs:{id:"什么是-beanshell"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是-beanshell"}},[s._v("#")]),s._v(" 什么是 BeanShell")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("BeanShell 是一种类似 JAVA 的脚本语言")])]),s._v(" "),n("li",[n("p",[s._v("通过 BeanShell 可以对请求数据、响应数据或环境变量进行更加灵活的处理和判断")])]),s._v(" "),n("li",[n("p",[s._v("还可以直接调用外部的 JAR 包，例如：可以直接引入现成的第三方 JSON 解析包来使用")])])]),s._v(" "),n("p",[n("strong",[s._v("Jmeter 中 BeanShell")]),s._v("：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("定时器：BeanShell Timer")])]),s._v(" "),n("li",[n("p",[s._v("前置处理器：BeanShell PreProcessor")])]),s._v(" "),n("li",[n("p",[s._v("采样器：BeanShell Sampler")])]),s._v(" "),n("li",[n("p",[s._v("后置处理器：BeanShell PostProcessor")])]),s._v(" "),n("li",[n("p",[s._v("断言：BeanShell Assert")])]),s._v(" "),n("li",[n("p",[s._v("监听器：BeanShell Listener")])])]),s._v(" "),n("h2",{attrs:{id:"beanshell的内置变量和方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#beanshell的内置变量和方法"}},[s._v("#")]),s._v(" BeanShell的内置变量和方法")]),s._v(" "),n("p",[s._v("BeanShell 有一些默认的内置变量和方法，用户可以通过这些变量与 JMeter 进行交互")]),s._v(" "),n("h3",{attrs:{id:"log"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#log"}},[s._v("#")]),s._v(" log")]),s._v(" "),n("p",[n("strong",[s._v("作用")]),s._v("：输出信息到日志")]),s._v(" "),n("p",[n("strong",[s._v("用法")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("debu")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("“调试信息”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nlog"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("“响应状态码” "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("prev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("ResponseCode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \nlog"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("warn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("“警告信息”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nlog"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("“出错信息”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("示例：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(787),alt:"beanshell"}})]),s._v(" "),n("h3",{attrs:{id:"prev"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#prev"}},[s._v("#")]),s._v(" prev")]),s._v(" "),n("p",[n("strong",[s._v("作用")]),s._v("：获取当前请求结果")]),s._v(" "),n("p",[n("strong",[s._v("用法")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("prev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getResponseDataAsString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取响应体数据（"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" 类型"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nprev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getResponseCode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取状态码（同 "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ResponseCode")]),s._v("，"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" 类型）\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("示例：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(788),alt:"beanshell"}})]),s._v(" "),n("h3",{attrs:{id:"vars"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vars"}},[s._v("#")]),s._v(" vars")]),s._v(" "),n("p",[n("strong",[s._v("作用")]),s._v("：操作 JMeter 的变量")]),s._v(" "),n("p",[n("strong",[s._v("用法")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("vars"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("“变量名”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取变量的值（假设为 "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" 类型）\n\nvars"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("“变量名”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 变量值"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：设置变量值\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("示例：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(789),alt:"beanshell"}})]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("vars 设置的变量类似于局部变量")])]),s._v(" "),n("li",[n("p",[s._v("vars 不可以跨线程获取变量")])])])]),s._v(" "),n("p",[n("img",{attrs:{src:a(790),alt:"beanshell"}})]),s._v(" "),n("h3",{attrs:{id:"props"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#props"}},[s._v("#")]),s._v(" props")]),s._v(" "),n("p",[n("strong",[s._v("作用")]),s._v("：操作 JMeter 变量，类似 vars")]),s._v(" "),n("p",[n("strong",[s._v("用法")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("“变量名”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取变量的值（假设为 "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" 类型）\n\nprops"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("“变量名”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 变量值"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：设置变量值\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("props 设置的变量类似于全局变量")])]),s._v(" "),n("li",[n("p",[s._v("props 可以跨线程获取变量")])])])]),s._v(" "),n("p",[n("img",{attrs:{src:a(791),alt:"beanshell"}})]),s._v(" "),n("h3",{attrs:{id:"ctx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ctx"}},[s._v("#")]),s._v(" ctx")]),s._v(" "),n("p",[n("strong",[s._v("作用")]),s._v("：获取当前线程上下文数据（可获取所有信息）")]),s._v(" "),n("p",[n("strong",[s._v("用法")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getVariables")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("“变量名”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取变量值（同 vars"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setVariables")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("“变量名”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" “变量值”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：设置变量（同 vars"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getProperties")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("“属性名”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取属性值（同 props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("）\n\nctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setProperties")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("“属性名”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("“属性值”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：设置属性（同 props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("）\n\nctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPreviousResult")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取当前请求结果同（prev）\n\nctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCurrentSampler")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取当前采样器\n\nctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPreviousSampler")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取前一采样器\n\nctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getThreadNum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取线程数\n\nctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getThreadGroup")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取线程组\n\nctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getThread")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取当前线程\n\nctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getEngine")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取引擎\n\nctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("isSamplingStarted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：判断采样器是否启动\n\nctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("isRecording")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：判断是否开启录制\n\nctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSamplerContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：获取采样器上下文数据 \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("p",[s._v("可参考 JMeter 的 API 文档")]),s._v(" "),n("p",[n("img",{attrs:{src:a(792),alt:"beanshell"}})]),s._v(" "),n("p",[s._v("（完）")])])}),[],!1,null,null,null);t.default=e.exports},787:function(s,t,a){s.exports=a.p+"assets/img/beanshell1.933b8ac8.png"},788:function(s,t,a){s.exports=a.p+"assets/img/beanshell2.2271a0f8.png"},789:function(s,t,a){s.exports=a.p+"assets/img/beanshell3.76ccab5e.png"},790:function(s,t,a){s.exports=a.p+"assets/img/beanshell4.f002cff4.png"},791:function(s,t,a){s.exports=a.p+"assets/img/beanshell5.f9145d99.png"},792:function(s,t,a){s.exports=a.p+"assets/img/beanshell6.d5fd502f.png"}}]);